/*
	Copyright (c) 2004-2008, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

dojo._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dojo.back"],["provide","dojo.fx.easing"],["provide","dojox.data.dom"],["provide","dijit._base.focus"],["provide","dijit._base.manager"],["provide","dojo.AdapterRegistry"],["provide","dijit._base.place"],["provide","dijit._base.window"],["provide","dijit._base.popup"],["provide","dijit._base.scroll"],["provide","dijit._base.sniff"],["provide","dijit._base.typematic"],["provide","dijit._base.wai"],["provide","dijit._base"],["provide","dojo.date.stamp"],["provide","dojo.parser"],["provide","dijit._Widget"],["require","dijit._base"],["provide","dojo.string"],["provide","dijit._Templated"],["provide","dijit._Container"],["provide","dijit.layout._LayoutWidget"],["provide","dijit.form._FormWidget"],["provide","dijit.dijit"],["provide","dijit.form.Button"],["provide","tableau.base.types"],["provide","dojo.dnd.common"],["provide","dojo.dnd.autoscroll"],["provide","dojo.dnd.Mover"],["provide","dojo.dnd.Moveable"],["provide","dojo.dnd.move"],["provide","dojo.dnd.TimedMoveable"],["provide","dojo.fx"],["provide","dojo.fx.Toggler"],["provide","dojo.html"],["provide","dijit.layout.ContentPane"],["provide","dijit.form.Form"],["provide","dijit.Dialog"],["provide","tableau.base.widget.Dialog"],["provide","tableau.base.util.etc"],["provide","tableau.base.util.all"],["provide","tableau.base.widget.LegendPanel"],["provide","tableau.web.widget.LegendPanelWeb"],["provide","tableau.base.FilterItem"],["provide","tableau.base.widget.ParameterControl"],["provide","dijit.layout.LayoutContainer"],["provide","dijit.Menu"],["provide","dijit.layout.StackContainer"],["provide","dijit.layout.TabContainer"],["provide","tableau.base.widget.ui.iMenuItem"],["provide","tableau.base.widget.TabbedNavigation"],["provide","tableau.base.ShareDialog"],["provide","tableau.base.widget.ShareDialog"],["provide","tableau.base.Social"],["provide","tableau.base.metrics"],["provide","tableau.base.CategoricalSelectionMixin"],["provide","tableau.base.widget.catmode.BaseMode"],["provide","tableau.base.widget.catmode.Checklist"],["provide","tableau.base.widget.catmode.CheckDropdown"],["provide","tableau.base.widget.catmode.Dropdown"],["provide","tableau.base.widget.ui.TypeIn"],["provide","tableau.base.widget.catmode.Pattern"],["provide","tableau.base.widget.catmode.Radiolist"],["provide","dojo.regexp"],["provide","dojo.number"],["provide","dijit.form.Slider"],["provide","tableau.base.widget.ui.Slider"],["provide","tableau.base.widget.catmode.Slider"],["provide","tableau.base.widget.TypeInFilterContents"],["provide","tableau.base.widget.catmode.TypeIn"],["provide","tableau.base.widget.ConditionalsWidget"],["provide","tableau.base.widget.SearchWidgetBase"],["provide","tableau.base.widget.SearchWidget"],["provide","dojo.data.util.filter"],["provide","dojo.data.util.sorter"],["provide","dojo.data.util.simpleFetch"],["provide","dojo.data.ItemFileReadStore"],["provide","dojo.data.ItemFileWriteStore"],["provide","dijit.form.TextBox"],["provide","dijit.Tooltip"],["provide","dijit.form.ValidationTextBox"],["provide","dijit.form.ComboBox"],["provide","tableau.base.widget.SmallSearchWidget"],["provide","tableau.base.widget.CategoricalFilter"],["provide","tableau.base.widget.QuantitativeFilter"],["provide","dojo.cookie"],["provide","dijit.Tree"],["provide","tableau.base.TreeSupport"],["provide","tableau.base.widget.HierarchicalFilter"],["provide","dijit.form.CheckBox"],["provide","tableau.base.widget.RelativeDateFilter"],["provide","tableau.base.widget.RelativeDatePickFilter"],["provide","tableau.base.widget.FilterPanel"],["provide","dijit.layout.SplitContainer"],["provide","dojox.form._FormSelectWidget"],["provide","dojox.form._HasDropDown"],["provide","dojox.form.DropDownSelect"],["provide","tableau.base.widget.ui.iDropDownSelect"],["provide","tableau.base.widget.CurrentPagePanel"],["provide","tableau.web.WebClient"],["i18n._preloadLocalizations","tableau.nls.clientweb",["he","nl","tr","no","ko","el","en","en-gb","ROOT","zh-cn","hu","es","fi-fi","pt-br","ca","fi","he-il","xx","ru","it","fr","cs","de-de","fr-fr","it-it","es-es","ja","sk","da","sl","pl","de","sv","pt","pt-pt","nl-nl","zh-tw","ko-kr","ar","en-us","zh","th","ja-jp"]]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dojo.back"]){_4._hasResource["dojo.back"]=true;_4.provide("dojo.back");(function(){var _7=_4.back;function getHash(){var h=window.location.hash;if(h.charAt(0)=="#"){h=h.substring(1);}return _4.isMozilla?h:decodeURIComponent(h);};function setHash(h){if(!h){h="";}window.location.hash=encodeURIComponent(h);_a=history.length;};if(_4.exists("tests.back-hash")){_7.getHash=getHash;_7.setHash=setHash;}var _b=(typeof (window)!=="undefined")?window.location.href:"";var _c=(typeof (window)!=="undefined")?getHash():"";var _d=null;var _e=null;var _f=null;var _10=null;var _11=[];var _12=[];var _13=false;var _14=false;var _a;function handleBackButton(){var _15=_12.pop();if(!_15){return;}var _16=_12[_12.length-1];if(!_16&&_12.length==0){_16=_d;}if(_16){if(_16.kwArgs["back"]){_16.kwArgs["back"]();}else{if(_16.kwArgs["backButton"]){_16.kwArgs["backButton"]();}else{if(_16.kwArgs["handle"]){_16.kwArgs.handle("back");}}}}_11.push(_15);};_7.goBack=handleBackButton;function handleForwardButton(){var _17=_11.pop();if(!_17){return;}if(_17.kwArgs["forward"]){_17.kwArgs.forward();}else{if(_17.kwArgs["forwardButton"]){_17.kwArgs.forwardButton();}else{if(_17.kwArgs["handle"]){_17.kwArgs.handle("forward");}}}_12.push(_17);};_7.goForward=handleForwardButton;function createState(url,_19,_1a){return {"url":url,"kwArgs":_19,"urlHash":_1a};};function getUrlQuery(url){var _1c=url.split("?");if(_1c.length<2){return null;}else{return _1c[1];}};function loadIframeHistory(){var url=(_4.config["dojoIframeHistoryUrl"]||_4.moduleUrl("dojo","resources/iframe_history.html"))+"?"+(new Date()).getTime();_13=true;if(_10){_4.isSafari?_10.location=url:window.frames[_10.name].location=url;}else{}return url;};function checkLocation(){if(!_14){var hsl=_12.length;var _1f=getHash();if((_1f===_c||window.location.href==_b)&&(hsl==1)){handleBackButton();return;}if(_11.length>0){if(_11[_11.length-1].urlHash===_1f){handleForwardButton();return;}}if((hsl>=2)&&(_12[hsl-2])){if(_12[hsl-2].urlHash===_1f){handleBackButton();return;}}if(_4.isSafari&&_4.isSafari<3){var _20=history.length;if(_20>_a){handleForwardButton();}else{if(_20<_a){handleBackButton();}}_a=_20;}}};_7.init=function(){if(_4.byId("dj_history")){return;}var src=_4.config["dojoIframeHistoryUrl"]||_4.moduleUrl("dojo","resources/iframe_history.html");document.write("<iframe style=\"border:0;width:1px;height:1px;position:absolute;visibility:hidden;bottom:0;right:0;\" name=\"dj_history\" id=\"dj_history\" src=\""+src+"\"></iframe>");};_7.setInitialState=function(_22){_d=createState(_b,_22,_c);};_7.addToHistory=function(_23){_11=[];var _24=null;var url=null;if(!_10){if(_4.config["useXDomain"]&&!_4.config["dojoIframeHistoryUrl"]){console.warn("dojo.back: When using cross-domain Dojo builds,"+" please save iframe_history.html to your domain and set djConfig.dojoIframeHistoryUrl"+" to the path on your domain to iframe_history.html");}_10=window.frames["dj_history"];}if(!_f){_f=document.createElement("a");_4.body().appendChild(_f);_f.style.display="none";}if(_23["changeUrl"]){_24=""+((_23["changeUrl"]!==true)?_23["changeUrl"]:(new Date()).getTime());if(_12.length==0&&_d.urlHash==_24){_d=createState(url,_23,_24);return;}else{if(_12.length>0&&_12[_12.length-1].urlHash==_24){_12[_12.length-1]=createState(url,_23,_24);return;}}_14=true;setTimeout(function(){setHash(_24);_14=false;},1);_f.href=_24;if(_4.isIE){url=loadIframeHistory();var _26=_23["back"]||_23["backButton"]||_23["handle"];var tcb=function(_28){if(getHash()!=""){setTimeout(function(){setHash(_24);},1);}_26.apply(this,[_28]);};if(_23["back"]){_23.back=tcb;}else{if(_23["backButton"]){_23.backButton=tcb;}else{if(_23["handle"]){_23.handle=tcb;}}}var _29=_23["forward"]||_23["forwardButton"]||_23["handle"];var tfw=function(_2b){if(getHash()!=""){setHash(_24);}if(_29){_29.apply(this,[_2b]);}};if(_23["forward"]){_23.forward=tfw;}else{if(_23["forwardButton"]){_23.forwardButton=tfw;}else{if(_23["handle"]){_23.handle=tfw;}}}}else{if(!_4.isIE){if(!_e){_e=setInterval(checkLocation,200);}}}}else{url=loadIframeHistory();}_12.push(createState(url,_23,_24));};_7._iframeLoaded=function(evt,_2d){var _2e=getUrlQuery(_2d.href);if(_2e==null){if(_12.length==1){handleBackButton();}return;}if(_13){_13=false;return;}if(_12.length>=2&&_2e==getUrlQuery(_12[_12.length-2].url)){handleBackButton();}else{if(_11.length>0&&_2e==getUrlQuery(_11[_11.length-1].url)){handleForwardButton();}}};})();}if(!_4._hasResource["dojo.fx.easing"]){_4._hasResource["dojo.fx.easing"]=true;_4.provide("dojo.fx.easing");_4.fx.easing={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-_4.fx.easing.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return _4.fx.easing.bounceIn(n*2)/2;}return (_4.fx.easing.bounceOut(n*2-1)/2)+0.5;}};}if(!_4._hasResource["dojox.data.dom"]){_4._hasResource["dojox.data.dom"]=true;_4.provide("dojox.data.dom");_4.experimental("dojox.data.dom");_6.data.dom.createDocument=function(str,_5b){var _5c=_4.doc;if(!_5b){_5b="text/xml";}if(str&&_4.trim(str)!==""&&(typeof _4.global["DOMParser"])!=="undefined"){var _5d=new DOMParser();return _5d.parseFromString(str,_5b);}else{if((typeof _4.global["ActiveXObject"])!=="undefined"){var _5e=["MSXML2","Microsoft","MSXML","MSXML3"];for(var i=0;i<_5e.length;i++){try{var doc=new ActiveXObject(_5e[i]+".XMLDOM");if(str){if(doc){doc.async=false;doc.loadXML(str);return doc;}else{console.log("loadXML didn't work?");}}else{if(doc){return doc;}}}catch(e){}}}else{if((_5c.implementation)&&(_5c.implementation.createDocument)){if(str&&_4.trim(str)!==""){if(_5c.createElement){var tmp=_5c.createElement("xml");tmp.innerHTML=str;var _62=_5c.implementation.createDocument("foo","",null);for(var i=0;i<tmp.childNodes.length;i++){_62.importNode(tmp.childNodes.item(i),true);}return _62;}}else{return _5c.implementation.createDocument("","",null);}}}}return null;};_6.data.dom.textContent=function(_63,_64){if(arguments.length>1){var _65=_63.ownerDocument||_4.doc;_6.data.dom.replaceChildren(_63,_65.createTextNode(_64));return _64;}else{if(_63.textContent!==undefined){return _63.textContent;}var _66="";if(_63==null){return _66;}for(var i=0;i<_63.childNodes.length;i++){switch(_63.childNodes[i].nodeType){case 1:case 5:_66+=_6.data.dom.textContent(_63.childNodes[i]);break;case 3:case 2:case 4:_66+=_63.childNodes[i].nodeValue;break;default:break;}}return _66;}};_6.data.dom.replaceChildren=function(_68,_69){var _6a=[];if(_4.isIE){for(var i=0;i<_68.childNodes.length;i++){_6a.push(_68.childNodes[i]);}}_6.data.dom.removeChildren(_68);for(var i=0;i<_6a.length;i++){_4._destroyElement(_6a[i]);}if(!_4.isArray(_69)){_68.appendChild(_69);}else{for(var i=0;i<_69.length;i++){_68.appendChild(_69[i]);}}};_6.data.dom.removeChildren=function(_6c){var _6d=_6c.childNodes.length;while(_6c.hasChildNodes()){_6c.removeChild(_6c.firstChild);}return _6d;};_6.data.dom.innerXML=function(_6e){if(_6e.innerXML){return _6e.innerXML;}else{if(_6e.xml){return _6e.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(_6e);}}}};}if(!_4._hasResource["dijit._base.focus"]){_4._hasResource["dijit._base.focus"]=true;_4.provide("dijit._base.focus");_4.mixin(_5,{_curFocus:null,_prevFocus:null,isCollapsed:function(){var _6f=_4.doc;if(_6f.selection){try{var s=_6f.selection;if(s.type=="Text"){return !s.createRange().htmlText.length;}else{return !s.createRange().length;}}catch(e){return null;}}else{var _71=_4.global;var _72=_71.getSelection();if(_4.isString(_72)){return !_72;}else{return _72.isCollapsed||!_72.toString();}}},getBookmark:function(){var _73,_74=_4.doc.selection;if(_74){try{var _75=_74.createRange();if(_74.type.toUpperCase()=="CONTROL"){if(_75.length){_73=[];var i=0,len=_75.length;while(i<len){_73.push(_75.item(i++));}}else{_73=null;}}else{_73=_75.getBookmark();}}catch(e){_73=null;}}else{if(window.getSelection){_74=_4.global.getSelection();if(_74){_75=_74.getRangeAt(0);_73=_75.cloneRange();}}else{console.warn("No idea how to store the current selection for this browser!");}}return _73;},moveToBookmark:function(_78){var _79=_4.doc;if(_79.selection){try{var _7a;if(_4.isArray(_78)){_7a=_79.body.createControlRange();_4.forEach(_78,function(n){_7a.addElement(n);});}else{_7a=_79.selection.createRange();_7a.moveToBookmark(_78);}_7a.select();}catch(e){}}else{var _7c=_4.global.getSelection&&_4.global.getSelection();if(_7c&&_7c.removeAllRanges){_7c.removeAllRanges();_7c.addRange(_78);}else{console.warn("No idea how to restore selection for this browser!");}}},getFocus:function(_7d,_7e){return {node:_7d&&_4.isDescendant(_5._curFocus,_7d.domNode)?_5._prevFocus:_5._curFocus,bookmark:!_4.withGlobal(_7e||_4.global,_5.isCollapsed)?_4.withGlobal(_7e||_4.global,_5.getBookmark):null,openedForWindow:_7e};},focus:function(_7f){if(!_7f){return;}var _80="node" in _7f?_7f.node:_7f,_81=_7f.bookmark,_82=_7f.openedForWindow;if(_80){var _83=(_80.tagName.toLowerCase()=="iframe")?_80.contentWindow:_80;if(_83&&_83.focus){try{_83.focus();}catch(e){}}_5._onFocusNode(_80);}if(_81&&_4.withGlobal(_82||_4.global,_5.isCollapsed)){if(_82){_82.focus();}try{_4.withGlobal(_82||_4.global,_5.moveToBookmark,null,[_81]);}catch(e){}}},_activeStack:[],registerWin:function(_84){if(!_84){_84=window;}_4.connect(_84.document,"onmousedown",function(evt){_5._justMouseDowned=true;setTimeout(function(){_5._justMouseDowned=false;},0);_5._onTouchNode(evt.target||evt.srcElement);});var doc=_84.document;if(doc){if(_4.isIE){doc.attachEvent("onactivate",function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"){_5._onFocusNode(evt.srcElement);}});doc.attachEvent("ondeactivate",function(evt){_5._onBlurNode(evt.srcElement);});}else{doc.addEventListener("focus",function(evt){_5._onFocusNode(evt.target);},true);doc.addEventListener("blur",function(evt){_5._onBlurNode(evt.target);},true);}}doc=null;},_onBlurNode:function(_8b){_5._prevFocus=_5._curFocus;_5._curFocus=null;if(_5._justMouseDowned){return;}if(_5._clearActiveWidgetsTimer){clearTimeout(_5._clearActiveWidgetsTimer);}_5._clearActiveWidgetsTimer=setTimeout(function(){delete _5._clearActiveWidgetsTimer;_5._setStack([]);_5._prevFocus=null;},100);},_onTouchNode:function(_8c){if(_5._clearActiveWidgetsTimer){clearTimeout(_5._clearActiveWidgetsTimer);delete _5._clearActiveWidgetsTimer;}var _8d=[];try{while(_8c){if(_8c.dijitPopupParent){_8c=_5.byId(_8c.dijitPopupParent).domNode;}else{if(_8c.tagName&&_8c.tagName.toLowerCase()=="body"){if(_8c===_4.body()){break;}_8c=_5.getDocumentWindow(_8c.ownerDocument).frameElement;}else{var id=_8c.getAttribute&&_8c.getAttribute("widgetId");if(id){_8d.unshift(id);}_8c=_8c.parentNode;}}}}catch(e){}_5._setStack(_8d);},_onFocusNode:function(_8f){if(!_8f){return;}if(_8f.nodeType==9){return;}if(_8f.nodeType==9){var _90=_5.getDocumentWindow(_8f).frameElement;if(!_90){return;}_8f=_90;}_5._onTouchNode(_8f);if(_8f==_5._curFocus){return;}if(_5._curFocus){_5._prevFocus=_5._curFocus;}_5._curFocus=_8f;_4.publish("focusNode",[_8f]);},_setStack:function(_91){var _92=_5._activeStack;_5._activeStack=_91;for(var _93=0;_93<Math.min(_92.length,_91.length);_93++){if(_92[_93]!=_91[_93]){break;}}for(var i=_92.length-1;i>=_93;i--){var _95=_5.byId(_92[i]);if(_95){_95._focused=false;_95._hasBeenBlurred=true;if(_95._onBlur){_95._onBlur();}if(_95._setStateClass){_95._setStateClass();}_4.publish("widgetBlur",[_95]);}}for(i=_93;i<_91.length;i++){_95=_5.byId(_91[i]);if(_95){_95._focused=true;if(_95._onFocus){_95._onFocus();}if(_95._setStateClass){_95._setStateClass();}_4.publish("widgetFocus",[_95]);}}}});_4.addOnLoad(_5.registerWin);}if(!_4._hasResource["dijit._base.manager"]){_4._hasResource["dijit._base.manager"]=true;_4.provide("dijit._base.manager");_4.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};},add:function(_96){if(this._hash[_96.id]){throw new Error("Tried to register widget with id=="+_96.id+" but that id is already registered");}this._hash[_96.id]=_96;},remove:function(id){delete this._hash[id];},forEach:function(_98){for(var id in this._hash){_98(this._hash[id]);}},filter:function(_9a){var res=new _5.WidgetSet();this.forEach(function(_9c){if(_9a(_9c)){res.add(_9c);}});return res;},byId:function(id){return this._hash[id];},byClass:function(cls){return this.filter(function(_9f){return _9f.declaredClass==cls;});}});_5.registry=new _5.WidgetSet();_5._widgetTypeCtr={};_5.getUniqueId=function(_a0){var id;do{id=_a0+"_"+(_a0 in _5._widgetTypeCtr?++_5._widgetTypeCtr[_a0]:_5._widgetTypeCtr[_a0]=0);}while(_5.byId(id));return id;};if(_4.isIE){_4.addOnWindowUnload(function(){_5.registry.forEach(function(_a2){_a2.destroy();});});}_5.byId=function(id){return (_4.isString(id))?_5.registry.byId(id):id;};_5.byNode=function(_a4){return _5.registry.byId(_a4.getAttribute("widgetId"));};_5.getEnclosingWidget=function(_a5){while(_a5){if(_a5.getAttribute&&_a5.getAttribute("widgetId")){return _5.registry.byId(_a5.getAttribute("widgetId"));}_a5=_a5.parentNode;}return null;};_5._tabElements={area:true,button:true,input:true,object:true,select:true,textarea:true};_5._isElementShown=function(_a6){var _a7=_4.style(_a6);return (_a7.visibility!="hidden")&&(_a7.visibility!="collapsed")&&(_a7.display!="none")&&(_4.attr(_a6,"type")!="hidden");};_5.isTabNavigable=function(_a8){if(_4.hasAttr(_a8,"disabled")){return false;}var _a9=_4.hasAttr(_a8,"tabindex");var _aa=_4.attr(_a8,"tabindex");if(_a9&&_aa>=0){return true;}var _ab=_a8.nodeName.toLowerCase();if(((_ab=="a"&&_4.hasAttr(_a8,"href"))||_5._tabElements[_ab])&&(!_a9||_aa>=0)){return true;}return false;};_5._getTabNavigable=function(_ac){var _ad,_ae,_af,_b0,_b1,_b2;var _b3=function(_b4){_4.query("> *",_b4).forEach(function(_b5){var _b6=_5._isElementShown(_b5);if(_b6&&_5.isTabNavigable(_b5)){var _b7=_4.attr(_b5,"tabindex");if(!_4.hasAttr(_b5,"tabindex")||_b7==0){if(!_ad){_ad=_b5;}_ae=_b5;}else{if(_b7>0){if(!_af||_b7<_b0){_b0=_b7;_af=_b5;}if(!_b1||_b7>=_b2){_b2=_b7;_b1=_b5;}}}}if(_b6&&_b5.nodeName.toUpperCase()!="SELECT"){_b3(_b5);}});};if(_5._isElementShown(_ac)){_b3(_ac);}return {first:_ad,last:_ae,lowest:_af,highest:_b1};};_5.getFirstInTabbingOrder=function(_b8){var _b9=_5._getTabNavigable(_4.byId(_b8));return _b9.lowest?_b9.lowest:_b9.first;};_5.getLastInTabbingOrder=function(_ba){var _bb=_5._getTabNavigable(_4.byId(_ba));return _bb.last?_bb.last:_bb.highest;};_5.defaultDuration=_4.config["defaultDuration"]||200;}if(!_4._hasResource["dojo.AdapterRegistry"]){_4._hasResource["dojo.AdapterRegistry"]=true;_4.provide("dojo.AdapterRegistry");_4.AdapterRegistry=function(_bc){this.pairs=[];this.returnWrappers=_bc||false;};_4.extend(_4.AdapterRegistry,{register:function(_bd,_be,_bf,_c0,_c1){this.pairs[((_c1)?"unshift":"push")]([_bd,_be,_bf,_c0]);},match:function(){for(var i=0;i<this.pairs.length;i++){var _c3=this.pairs[i];if(_c3[1].apply(this,arguments)){if((_c3[3])||(this.returnWrappers)){return _c3[2];}else{return _c3[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(_c4){for(var i=0;i<this.pairs.length;i++){var _c6=this.pairs[i];if(_c6[0]==_c4){this.pairs.splice(i,1);return true;}}return false;}});}if(!_4._hasResource["dijit._base.place"]){_4._hasResource["dijit._base.place"]=true;_4.provide("dijit._base.place");_5.getViewport=function(){var _c7=_4.global;var _c8=_4.doc;var w=0,h=0;var de=_c8.documentElement;var dew=de.clientWidth,deh=de.clientHeight;if(_4.isMozilla){var _ce,_cf,_d0,_d1;var dbw=_c8.body.clientWidth;if(dbw>dew){_ce=dew;_d0=dbw;}else{_d0=dew;_ce=dbw;}var dbh=_c8.body.clientHeight;if(dbh>deh){_cf=deh;_d1=dbh;}else{_d1=deh;_cf=dbh;}w=(_d0>_c7.innerWidth)?_ce:_d0;h=(_d1>_c7.innerHeight)?_cf:_d1;}else{if(!_4.isOpera&&_c7.innerWidth){w=_c7.innerWidth;h=_c7.innerHeight;}else{if(_4.isIE&&de&&deh){w=dew;h=deh;}else{if(_4.body().clientWidth){w=_4.body().clientWidth;h=_4.body().clientHeight;}}}}var _d4=_4._docScroll();return {w:w,h:h,l:_d4.x,t:_d4.y};};_5.placeOnScreen=function(_d5,pos,_d7,_d8){var _d9=_4.map(_d7,function(_da){return {corner:_da,pos:pos};});return _5._place(_d5,_d9);};_5._place=function(_db,_dc,_dd){var _de=_5.getViewport();if(_4.isMozilla){_de.t+=1;_de.l+=1;_de.h-=2;_de.w-=2;}if(!_db.parentNode||String(_db.parentNode.tagName).toLowerCase()!="body"){_4.body().appendChild(_db);}var _df=null;_4.some(_dc,function(_e0){var _e1=_e0.corner;var pos=_e0.pos;if(_dd){_dd(_db,_e0.aroundCorner,_e1);}var _e3=_db.style;var _e4=_e3.display;var _e5=_e3.visibility;_e3.visibility="hidden";_e3.display="";var mb=_4.marginBox(_db);_e3.display=_e4;_e3.visibility=_e5;var _e7=(_e1.charAt(1)=="L"?pos.x:Math.max(_de.l,pos.x-mb.w)),_e8=(_e1.charAt(0)=="T"?pos.y:Math.max(_de.t,pos.y-mb.h)),_e9=(_e1.charAt(1)=="L"?Math.min(_de.l+_de.w,_e7+mb.w):pos.x),_ea=(_e1.charAt(0)=="T"?Math.min(_de.t+_de.h,_e8+mb.h):pos.y),_eb=_e9-_e7,_ec=_ea-_e8;var _ed=(mb.w-_eb),_ee=(mb.h-_ec),_ef=_de.t+_de.h,_f0=17;var _f1=0;if(_ed>0){var _f2=(_e1.charAt(0)=="T"?(_ef-_ea):(_e8-_de.t));var _f3=false;if(!_4.isIE){if(_f2>_f0){_f1=_f0;_ec+=_f1;if(_e1.charAt(0)=="B"){_e8-=_f0;}}else{_f3=true;}}if((_ee>0)||_f3){_eb-=_f0;}}var _f4=(mb.w-_eb)+(mb.h-_ec);if(_df==null||_f4<_df.overflow){_df={corner:_e1,aroundCorner:_e0.aroundCorner,x:_e7,y:_e8,w:_eb,h:_ec,overflow:_f4,scrollbar_height_added:_f1,horizontal_overflow:mb.w-_eb,vertical_overflow:mb.h-_ec};}return !_f4;});if(_db.id.indexOf("Tooltip")==-1){_db.style.left=_df.x+"px";_db.style.top=_df.y+"px";if(_df.overflow&&_dd){_dd(_db,_df.aroundCorner,_df.corner,_df.overflow);}return _df;}var _f5=6;var _f6=_dc[0].pos.x;var _f7=_dc[0].pos.y;var _f8=0;var _f9=0;var _fa=0;var _fb=8;if(_df.horizontal_overflow>0){mb=_4.marginBox(_db);if(mb.w>_f6){_f8=_f5;}else{_f8=Math.max(_f6-mb.w,_f5);}if(mb.w+_f5>_de.w){_4.style(_db,"width","96%");_4.style(_db,"marginLeft","2%");_4.style(_db,"marginRight","2%");var _fc=_db.clientWidth/50;_f8=Math.max(0,_f5-_fc);_fa=_fc;_4.style(_db,"left",_f8);wrapped_mb=_4.marginBox(_db);_f9=mb.h-wrapped_mb.h;}}else{_f8=Math.max(_df.x,_f5);}_4.style(_db,"left",_f8+"px");_db.tab_pos_x=Math.max(0,Math.min(_df.w,_f6-_f8-_fb-_fa))+"px";if((_df.horizontal_overflow>0)&&(_df.y<_f7)){_4.style(_db,"top",(_df.y+_df.scrollbar_height_added+_f9)+"px");}else{_4.style(_db,"top",(_df.y)+"px");}if(_df.overflow&&_dd){_dd(_db,_df.aroundCorner,_df.corner,_df.horizontal_overflow);}else{_4.forEach(_db.childNodes,function(_fd,i){if(_fd.className&&_fd.className.indexOf("dijitTooltipConnector")>-1){_fd.style.left="auto";}});}return _df;};_5.placeOnScreenAroundNode=function(_ff,_100,_101,_102){_100=_4.byId(_100);var _103=_100.style.display;_100.style.display="";var _104=_100.offsetWidth;var _105=_100.offsetHeight;var _106=_4.coords(_100,true);_100.style.display=_103;return _5._placeOnScreenAroundRect(_ff,_106.x,_106.y,_104,_105,_101,_102);};_5.placeOnScreenAroundRectangle=function(node,_108,_109,_10a){return _5._placeOnScreenAroundRect(node,_108.x,_108.y,_108.width,_108.height,_109,_10a);};_5._placeOnScreenAroundRect=function(node,x,y,_10e,_10f,_110,_111){var _112=[];for(var _113 in _110){_112.push({aroundCorner:_113,corner:_110[_113],pos:{x:x+(_113.charAt(1)=="L"?0:_10e),y:y+(_113.charAt(0)=="T"?0:_10f)}});}return _5._place(node,_112,_111);};_5.placementRegistry=new _4.AdapterRegistry();_5.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},_5.placeOnScreenAroundNode);_5.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},_5.placeOnScreenAroundRectangle);_5.placeOnScreenAroundElement=function(node,_119,_11a,_11b){return _5.placementRegistry.match.apply(_5.placementRegistry,arguments);};}if(!_4._hasResource["dijit._base.window"]){_4._hasResource["dijit._base.window"]=true;_4.provide("dijit._base.window");_5.getDocumentWindow=function(doc){if(_4.isIE&&window!==document.parentWindow&&!doc._parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc._parentWindow||doc.parentWindow||doc.defaultView;};}if(!_4._hasResource["dijit._base.popup"]){_4._hasResource["dijit._base.popup"]=true;_4.provide("dijit._base.popup");_5.popup=new function(){var _11e=[],_11f=1000,_120=1;this.prepare=function(node){_4.body().appendChild(node);var s=node.style;if(s.display=="none"){s.display="";}s.visibility="hidden";s.position="absolute";s.top="-9999px";};this.open=function(args){var _124=args.popup,_125=args.orient||{"BL":"TL","TL":"BL"},_126=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+_120++);var _128=_4.doc.createElement("div");_5.setWaiRole(_128,"presentation");_128.id=id;var _129=["dijitPopup"];if(typeof args.extraClass==="string"){_129.push(args.extraClass);}else{if((typeof args.extraClass==="object")&&args.extraClass.length){_129=_129.concat(args.extraClass);}}_128.className=_129.join(" ");_128.style.zIndex=_11f+_11e.length;_128.style.left=_128.style.top="0px";_128.style.visibility="hidden";if(args.parent){_128.dijitPopupParent=args.parent.id;}_4.body().appendChild(_128);var s=_124.domNode.style;s.display="";s.visibility="";s.position="";_128.appendChild(_124.domNode);var _12b=new _5.BackgroundIframe(_128);var best=_126?_5.placeOnScreenAroundElement(_128,_126,_125,_124.orient?_4.hitch(_124,"orient"):null):_5.placeOnScreen(_128,args,_125=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"]);_128.style.visibility="visible";var _12d=[];var _12e=function(){for(var pi=_11e.length-1;pi>0&&_11e[pi].parent===_11e[pi-1].widget;pi--){}return _11e[pi];};_12d.push(_4.connect(_128,"onkeypress",this,function(evt){if(evt.charOrCode==_4.keys.ESCAPE&&args.onCancel){_4.stopEvent(evt);args.onCancel();}else{if(evt.charOrCode===_4.keys.TAB){_4.stopEvent(evt);var _131=_12e();if(_131&&_131.onCancel){_131.onCancel();}}}}));if(_124.onCancel){_12d.push(_4.connect(_124,"onCancel",null,args.onCancel));}_12d.push(_4.connect(_124,_124.onExecute?"onExecute":"onChange",null,function(){var _132=_12e();if(_132&&_132.onExecute){_132.onExecute();}}));_11e.push({wrapper:_128,iframe:_12b,widget:_124,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_12d});if(_124.onOpen){_124.onOpen(best);}return best;};this.close=function(_133){while(_4.some(_11e,function(elem){return elem.widget==_133;})){var top=_11e.pop(),_136=top.wrapper,_137=top.iframe,_138=top.widget,_139=top.onClose;if(_138.onClose){_138.onClose();}_4.forEach(top.handlers,_4.disconnect);if(!_138||!_138.domNode){return;}this.prepare(_138.domNode);_137.destroy();_4._destroyElement(_136);if(_139){_139();}}};}();_5._frames=new function(){var _13a=[];this.pop=function(){var _13b;if(_13a.length){_13b=_13a.pop();_13b.style.display="";}else{if(_4.isIE){var burl=_4.config["dojoBlankHtmlUrl"]||(_4.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_13b=_4.doc.createElement(html);}else{_13b=_4.doc.createElement("iframe");_13b.src="javascript:\"\"";_13b.className="dijitBackgroundIframe";}_13b.tabIndex=-1;_4.body().appendChild(_13b);}return _13b;};this.push=function(_13e){_13e.style.display="";if(_4.isIE){_13e.style.removeExpression("width");_13e.style.removeExpression("height");}_13a.push(_13e);};}();if(_4.isIE<7){_4.addOnLoad(function(){var f=_5._frames;_4.forEach([f.pop()],f.push);});}_5.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if((_4.isIE&&_4.isIE<7)||(_4.isFF&&_4.isFF<3&&_4.hasClass(_4.body(),"dijit_a11y"))){var _141=_5._frames.pop();node.appendChild(_141);if(_4.isIE){_141.style.setExpression("width",_4._scopeName+".doc.getElementById('"+node.id+"').offsetWidth");_141.style.setExpression("height",_4._scopeName+".doc.getElementById('"+node.id+"').offsetHeight");}this.iframe=_141;}};_4.extend(_5.BackgroundIframe,{destroy:function(){if(this.iframe){_5._frames.push(this.iframe);delete this.iframe;}}});}if(!_4._hasResource["dijit._base.scroll"]){_4._hasResource["dijit._base.scroll"]=true;_4.provide("dijit._base.scroll");_5.scrollIntoView=function(node){node=_4.byId(node);var body=node.ownerDocument.body;var html=body.parentNode;if(_4.isFF==2||node==body||node==html){node.scrollIntoView(false);return;}var rtl=!_4._isBodyLtr();var _146=_4.doc.compatMode!="BackCompat";var _147=(_146&&!_4.isSafari)?html:body;function addPseudoAttrs(_148){var _149=_148.parentNode;var _14a=_148.offsetParent;if(_14a==null){_148=_147;_14a=html;_149=null;}_148._offsetParent=(_14a==body)?_147:_14a;_148._parent=(_149==body)?_147:_149;_148._start={H:_148.offsetLeft,V:_148.offsetTop};_148._scroll={H:_148.scrollLeft,V:_148.scrollTop};_148._renderedSize={H:_148.offsetWidth,V:_148.offsetHeight};var bp=_4._getBorderExtents(_148);_148._borderStart={H:bp.l,V:bp.t};_148._borderSize={H:bp.w,V:bp.h};_148._clientSize=(_148._offsetParent==html&&_4.isSafari&&_146)?{H:html.clientWidth,V:html.clientHeight}:{H:_148.clientWidth,V:_148.clientHeight};_148._scrollBarSize={V:null,H:null};for(var dir in _148._scrollBarSize){var _14d=_148._renderedSize[dir]-_148._clientSize[dir]-_148._borderSize[dir];_148._scrollBarSize[dir]=(_148._clientSize[dir]>0&&_14d>=15&&_14d<=17)?_14d:0;}_148._isScrollable={V:null,H:null};for(dir in _148._isScrollable){var _14e=dir=="H"?"V":"H";_148._isScrollable[dir]=_148==_147||_148._scroll[dir]||_148._scrollBarSize[_14e];}};var _14f=node;while(_14f!=null){addPseudoAttrs(_14f);var next=_14f._parent;if(next){next._child=_14f;}_14f=next;}for(var dir in _147._renderedSize){_147._renderedSize[dir]=Math.min(_147._clientSize[dir],_147._renderedSize[dir]);}var _152=node;while(_152!=_147){_14f=_152._parent;if(_14f.tagName=="TD"){var _153=_14f._parent._parent._parent;if(_153._offsetParent==_152._offsetParent&&_14f._offsetParent!=_152._offsetParent){_14f=_153;}}var _154=_152==_147||(_14f._offsetParent!=_152._offsetParent);for(dir in _152._start){var _155=dir=="H"?"V":"H";if(rtl&&dir=="H"&&(_4.isSafari||_4.isIE)&&_14f._clientSize.H>0){var _156=_14f.scrollWidth-_14f._clientSize.H;if(_156>0){_14f._scroll.H-=_156;}}if(_4.isIE&&_14f._offsetParent.tagName=="TABLE"){_14f._start[dir]-=_14f._offsetParent._borderStart[dir];_14f._borderStart[dir]=_14f._borderSize[dir]=0;}if(_14f._clientSize[dir]==0){_14f._renderedSize[dir]=_14f._clientSize[dir]=_14f._child._clientSize[dir];if(rtl&&dir=="H"){_14f._start[dir]-=_14f._renderedSize[dir];}}else{_14f._renderedSize[dir]-=_14f._borderSize[dir]+_14f._scrollBarSize[dir];}_14f._start[dir]+=_14f._borderStart[dir];var _157=_152._start[dir]-(_154?0:_14f._start[dir])-_14f._scroll[dir];var _158=_157+_152._renderedSize[dir]-_14f._renderedSize[dir];var _159,_15a=(dir=="H")?"scrollLeft":"scrollTop";var _15b=(dir=="H"&&rtl);var _15c=_15b?-_158:_157;var _15d=_15b?-_157:_158;if(_15c<=0){_159=_15c;}else{if(_15d<=0){_159=0;}else{if(_15c<_15d){_159=_15c;}else{_159=_15d;}}}var _15e=0;if(_159!=0){var _15f=_14f[_15a];_14f[_15a]+=_15b?-_159:_159;_15e=_14f[_15a]-_15f;_157-=_15e;_15d-=_15b?-_15e:_15e;}_14f._renderedSize[dir]=_152._renderedSize[dir]+_14f._scrollBarSize[dir]-((_14f._isScrollable[dir]&&_15d>0)?_15d:0);_14f._start[dir]+=(_157>=0||!_14f._isScrollable[dir])?_157:0;}_152=_14f;}};}if(!_4._hasResource["dijit._base.sniff"]){_4._hasResource["dijit._base.sniff"]=true;_4.provide("dijit._base.sniff");(function(){var d=_4;var ie=d.isIE;var _162=d.isOpera;var maj=Math.floor;var ff=d.isFF;var _165=d.boxModel.replace(/-/,"");var _166=_4.doc.documentMode;var _167={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie_docmode_lt8:ie&&(_166==undefined||_166<8),dj_ie8_docmode_ge8:ie&&(maj(ie)==8)&&_166&&(_166>=8),dj_trident4:ie&&(/Trident\/4.0/.test(navigator.appVersion)),dj_iequirks:ie&&d.isQuirks,dj_opera:_162,dj_opera8:maj(_162)==8,dj_opera9:maj(_162)==9,dj_khtml:d.isKhtml,dj_safari:d.isSafari,dj_gecko:d.isMozilla,dj_ff2:maj(ff)==2,dj_ff3:maj(ff)==3};_167["dj_"+_165]=true;var html=_4.doc.documentElement;for(var p in _167){if(_167[p]){if(html.className){html.className+=" "+p;}else{html.className=p;}}}_4._loaders.unshift(function(){if(!_4._isBodyLtr()){html.className+=" dijitRtl";for(var p in _167){if(_167[p]){html.className+=" "+p+"-rtl";}}}});})();}if(!_4._hasResource["dijit._base.typematic"]){_4._hasResource["dijit._base.typematic"]=true;_4.provide("dijit._base.typematic");_5.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=(this._currentTimeout<0)?this._initialDelay:((this._subsequentDelay>1)?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay));this._timer=setTimeout(_4.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_16c,node,_16e,obj,_170,_171){if(obj!=this._obj){this.stop();this._initialDelay=_171||500;this._subsequentDelay=_170||0.9;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=_4.hitch(_16c,_16e);this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_173,_174,_175,_176,_177){if(_173.keyCode){_173.charOrCode=_173.keyCode;_4.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_173.charCode){_173.charOrCode=String.fromCharCode(_173.charCode);_4.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [_4.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_173.charOrCode&&(_173.ctrlKey===undefined||_173.ctrlKey==evt.ctrlKey)&&(_173.altKey===undefined||_173.altKey==evt.ctrlKey)&&(_173.shiftKey===undefined||_173.shiftKey==evt.ctrlKey)){_4.stopEvent(evt);_5.typematic.trigger(_173,_174,node,_175,_173,_176,_177);}else{if(_5.typematic._obj==_173){_5.typematic.stop();}}}),_4.connect(node,"onkeyup",this,function(evt){if(_5.typematic._obj==_173){_5.typematic.stop();}})];},addMouseListener:function(node,_17b,_17c,_17d,_17e){var dc=_4.connect;return [dc(node,"mousedown",this,function(evt){_4.stopEvent(evt);_5.typematic.trigger(evt,_17b,node,_17c,node,_17d,_17e);}),dc(node,"mouseup",this,function(evt){_4.stopEvent(evt);_5.typematic.stop();}),dc(node,"mouseout",this,function(evt){_4.stopEvent(evt);_5.typematic.stop();}),dc(node,"mousemove",this,function(evt){_4.stopEvent(evt);}),dc(node,"dblclick",this,function(evt){_4.stopEvent(evt);if(_4.isIE){_5.typematic.trigger(evt,_17b,node,_17c,node,_17d,_17e);setTimeout(_4.hitch(this,_5.typematic.stop),50);}})];},addListener:function(_185,_186,_187,_188,_189,_18a,_18b){return this.addKeyListener(_186,_187,_188,_189,_18a,_18b).concat(this.addMouseListener(_185,_188,_189,_18a,_18b));}};}if(!_4._hasResource["dijit._base.wai"]){_4._hasResource["dijit._base.wai"]=true;_4.provide("dijit._base.wai");_5.wai={onload:function(){var div=_4.doc.createElement("div");div.id="a11yTestNode";div.style.cssText="border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(_4.config.blankGif||_4.moduleUrl("dojo","resources/blank.gif"))+"\");";_4.body().appendChild(div);var cs=_4.getComputedStyle(div);if(cs){var _18e=cs.backgroundImage;var _18f=(cs.borderTopColor==cs.borderRightColor)||(_18e!=null&&(_18e=="none"||_18e=="url(invalid-url:)"));_4[_18f?"addClass":"removeClass"](_4.body(),"dijit_a11y");if(_4.isIE){div.outerHTML="";}else{_4.body().removeChild(div);}}}};if(_4.isIE||_4.isMoz){_4._loaders.unshift(_5.wai.onload);}_4.mixin(_5,{_XhtmlRoles:/banner|contentinfo|definition|main|navigation|search|note|secondary|seealso/,hasWaiRole:function(elem,role){var _192=this.getWaiRole(elem);if(role){return (_192.indexOf(role)>-1);}else{return (_192.length>0);}},getWaiRole:function(elem){return _4.trim((_4.attr(elem,"role")||"").replace(this._XhtmlRoles,"").replace("wairole:",""));},setWaiRole:function(elem,role){var _196=_4.attr(elem,"role")||"";if(_4.isFF<3||!this._XhtmlRoles.test(_196)){_4.attr(elem,"role",_4.isFF<3?"wairole:"+role:role);}else{if((" "+_196+" ").indexOf(" "+role+" ")<0){var _197=_4.trim(_196.replace(this._XhtmlRoles,""));var _198=_4.trim(_196.replace(_197,""));_4.attr(elem,"role",_198+(_198?" ":"")+role);}}},removeWaiRole:function(elem,role){var _19b=_4.attr(elem,"role");if(!_19b){return;}if(role){var _19c=_4.isFF<3?"wairole:"+role:role;var t=_4.trim((" "+_19b+" ").replace(" "+_19c+" "," "));_4.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_19f){if(_4.isFF<3){return elem.hasAttributeNS("http://www.w3.org/2005/07/aaa",_19f);}else{return elem.hasAttribute?elem.hasAttribute("aria-"+_19f):!!elem.getAttribute("aria-"+_19f);}},getWaiState:function(elem,_1a1){if(_4.isFF<3){return elem.getAttributeNS("http://www.w3.org/2005/07/aaa",_1a1);}else{var _1a2=elem.getAttribute("aria-"+_1a1);return _1a2?_1a2:"";}},setWaiState:function(elem,_1a4,_1a5){if(_4.isFF<3){elem.setAttributeNS("http://www.w3.org/2005/07/aaa","aaa:"+_1a4,_1a5);}else{elem.setAttribute("aria-"+_1a4,_1a5);}},removeWaiState:function(elem,_1a7){if(_4.isFF<3){elem.removeAttributeNS("http://www.w3.org/2005/07/aaa",_1a7);}else{elem.removeAttribute("aria-"+_1a7);}}});}if(!_4._hasResource["dijit._base"]){_4._hasResource["dijit._base"]=true;_4.provide("dijit._base");}if(!_4._hasResource["dojo.date.stamp"]){_4._hasResource["dojo.date.stamp"]=true;_4.provide("dojo.date.stamp");_4.date.stamp.fromISOString=function(_1a8,_1a9){if(!_4.date.stamp._isoRegExp){_4.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _1aa=_4.date.stamp._isoRegExp.exec(_1a8);var _1ab=null;if(_1aa){_1aa.shift();if(_1aa[1]){_1aa[1]--;}if(_1aa[6]){_1aa[6]*=1000;}if(_1a9){_1a9=new Date(_1a9);_4.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _1a9["get"+prop]();}).forEach(function(_1ad,_1ae){if(_1aa[_1ae]===undefined){_1aa[_1ae]=_1ad;}});}_1ab=new Date(_1aa[0]||1970,_1aa[1]||0,_1aa[2]||1,_1aa[3]||0,_1aa[4]||0,_1aa[5]||0,_1aa[6]||0);var _1af=0;var _1b0=_1aa[7]&&_1aa[7].charAt(0);if(_1b0!="Z"){_1af=((_1aa[8]||0)*60)+(Number(_1aa[9])||0);if(_1b0!="-"){_1af*=-1;}}if(_1b0){_1af-=_1ab.getTimezoneOffset();}if(_1af){_1ab.setTime(_1ab.getTime()+_1af*60000);}}return _1ab;};_4.date.stamp.toISOString=function(_1b1,_1b2){var _=function(n){return (n<10)?"0"+n:n;};_1b2=_1b2||{};var _1b5=[];var _1b6=_1b2.zulu?"getUTC":"get";var date="";if(_1b2.selector!="time"){var year=_1b1[_1b6+"FullYear"]();date=["0000".substr((year+"").length)+year,_(_1b1[_1b6+"Month"]()+1),_(_1b1[_1b6+"Date"]())].join("-");}_1b5.push(date);if(_1b2.selector!="date"){var time=[_(_1b1[_1b6+"Hours"]()),_(_1b1[_1b6+"Minutes"]()),_(_1b1[_1b6+"Seconds"]())].join(":");var _1ba=_1b1[_1b6+"Milliseconds"]();if(_1b2.milliseconds){time+="."+(_1ba<100?"0":"")+_(_1ba);}if(_1b2.zulu){time+="Z";}else{if(_1b2.selector!="time"){var _1bb=_1b1.getTimezoneOffset();var _1bc=Math.abs(_1bb);time+=(_1bb>0?"-":"+")+_(Math.floor(_1bc/60))+":"+_(_1bc%60);}}_1b5.push(time);}return _1b5.join("T");};}if(!_4._hasResource["dojo.parser"]){_4._hasResource["dojo.parser"]=true;_4.provide("dojo.parser");_4.parser=new function(){var d=_4;var _1be=d._scopeName+"Type";var qry="["+_1be+"]";function val2type(_1c0){if(d.isString(_1c0)){return "string";}if(typeof _1c0=="number"){return "number";}if(typeof _1c0=="boolean"){return "boolean";}if(d.isFunction(_1c0)){return "function";}if(d.isArray(_1c0)){return "array";}if(_1c0 instanceof Date){return "date";}if(_1c0 instanceof d._Url){return "url";}return "object";};function str2obj(_1c1,type){switch(type){case "string":return _1c1;case "number":return _1c1.length?Number(_1c1):NaN;case "boolean":return typeof _1c1=="boolean"?_1c1:!(_1c1.toLowerCase()=="false");case "function":if(d.isFunction(_1c1)){_1c1=_1c1.toString();_1c1=d.trim(_1c1.substring(_1c1.indexOf("{")+1,_1c1.length-1));}try{if(_1c1.search(/[^\w\.]+/i)!=-1){_1c1=d.parser._nameAnonFunc(new Function(_1c1),this);}return d.getObject(_1c1,false);}catch(e){return new Function();}case "array":return _1c1?_1c1.split(/\s*,\s*/):[];case "date":switch(_1c1){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_1c1);}case "url":return d.baseUrl+_1c1;default:return d.fromJson(_1c1);}};var _1c3={};function getClassInfo(_1c4){if(!_1c3[_1c4]){var cls=d.getObject(_1c4);if(!d.isFunction(cls)){throw new Error("Could not load class '"+_1c4+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?");}var _1c6=cls.prototype;var _1c7={};for(var name in _1c6){if(name.charAt(0)=="_"){continue;}var _1c9=_1c6[name];_1c7[name]=val2type(_1c9);}_1c3[_1c4]={cls:cls,params:_1c7};}return _1c3[_1c4];};this._functionFromScript=function(_1ca){var _1cb="";var _1cc="";var _1cd=_1ca.getAttribute("args");if(_1cd){d.forEach(_1cd.split(/\s*,\s*/),function(part,idx){_1cb+="var "+part+" = arguments["+idx+"]; ";});}var _1d0=_1ca.getAttribute("with");if(_1d0&&_1d0.length){d.forEach(_1d0.split(/\s*,\s*/),function(part){_1cb+="with("+part+"){";_1cc+="}";});}return new Function(_1cb+_1ca.innerHTML+_1cc);};this.instantiate=function(_1d2){var _1d3=[];d.forEach(_1d2,function(node){if(!node){return;}var type=node.getAttribute(_1be);if((!type)||(!type.length)){return;}var _1d6=getClassInfo(type);var _1d7=_1d6.cls;var ps=_1d7._noScript||_1d7.prototype._noScript;var _1d9={};var _1da=node.attributes;for(var name in _1d6.params){var item=_1da.getNamedItem(name);if(!item||(!item.specified&&(!_4.isIE||name.toLowerCase()!="value"))){continue;}var _1dd=item.value;switch(name){case "class":_1dd=node.className;break;case "style":_1dd=node.style&&node.style.cssText;}var _1de=_1d6.params[name];_1d9[name]=str2obj(_1dd,_1de);}if(!ps){var _1df=[],_1e0=[];d.query("> script[type^='dojo/']",node).orphan().forEach(function(_1e1){var _1e2=_1e1.getAttribute("event"),type=_1e1.getAttribute("type"),nf=d.parser._functionFromScript(_1e1);if(_1e2){if(type=="dojo/connect"){_1df.push({event:_1e2,func:nf});}else{_1d9[_1e2]=nf;}}else{_1e0.push(nf);}});}var _1e4=_1d7["markupFactory"];if(!_1e4&&_1d7["prototype"]){_1e4=_1d7.prototype["markupFactory"];}var _1e5=_1e4?_1e4(_1d9,node,_1d7):new _1d7(_1d9,node);_1d3.push(_1e5);var _1e6=node.getAttribute("jsId");if(_1e6){d.setObject(_1e6,_1e5);}if(!ps){d.forEach(_1df,function(_1e7){d.connect(_1e5,_1e7.event,null,_1e7.func);});d.forEach(_1e0,function(func){func.call(_1e5);});}});d.forEach(_1d3,function(_1e9){if(_1e9&&_1e9.startup&&!_1e9._started&&(!_1e9.getParent||!_1e9.getParent())){_1e9.startup();}});return _1d3;};this.parse=function(_1ea){var list=d.query(qry,_1ea);var _1ec=this.instantiate(list);return _1ec;};}();(function(){var _1ed=function(){if(_4.config["parseOnLoad"]==true){_4.parser.parse();}};if(_4.exists("dijit.wai.onload")&&(_5.wai.onload===_4._loaders[0])){_4._loaders.splice(1,0,_1ed);}else{_4._loaders.unshift(_1ed);}})();_4.parser._anonCtr=0;_4.parser._anon={};_4.parser._nameAnonFunc=function(_1ee,_1ef){var jpn="$joinpoint";var nso=(_1ef||_4.parser._anon);if(_4.isIE){var cn=_1ee["__dojoNameCache"];if(cn&&nso[cn]===_1ee){return _1ee["__dojoNameCache"];}}var ret="__"+_4.parser._anonCtr++;while(typeof nso[ret]!="undefined"){ret="__"+_4.parser._anonCtr++;}nso[ret]=_1ee;return ret;};}if(!_4._hasResource["dijit._Widget"]){_4._hasResource["dijit._Widget"]=true;_4.provide("dijit._Widget");_4.require("dijit._base");_4.connect(_4,"connect",function(_1f4,_1f5){if(_1f4&&_4.isFunction(_1f4._onConnect)){_1f4._onConnect(_1f5);}});_5._connectOnUseEventHandler=function(_1f6){};(function(){var _1f7={};var _1f8=function(dc){if(!_1f7[dc]){var r=[];var _1fb;var _1fc=_4.getObject(dc).prototype;for(var _1fd in _1fc){if(_4.isFunction(_1fc[_1fd])&&(_1fb=_1fd.match(/^_set([a-zA-Z]*)Attr$/))&&_1fb[1]){r.push(_1fb[1].charAt(0).toLowerCase()+_1fb[1].substr(1));}}_1f7[dc]=r;}return _1f7[dc]||[];};_4.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:_5._connectOnUseEventHandler,onDblClick:_5._connectOnUseEventHandler,onKeyDown:_5._connectOnUseEventHandler,onKeyPress:_5._connectOnUseEventHandler,onKeyUp:_5._connectOnUseEventHandler,onMouseDown:_5._connectOnUseEventHandler,onMouseMove:_5._connectOnUseEventHandler,onMouseOut:_5._connectOnUseEventHandler,onMouseOver:_5._connectOnUseEventHandler,onMouseLeave:_5._connectOnUseEventHandler,onMouseEnter:_5._connectOnUseEventHandler,onMouseUp:_5._connectOnUseEventHandler,_blankGif:(_4.config.blankGif||_4.moduleUrl("dojo","resources/blank.gif")),postscript:function(_1fe,_1ff){this.create(_1fe,_1ff);},create:function(_200,_201){this.srcNodeRef=_4.byId(_201);this._connects=[];this._deferredConnects=_4.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==_5._connectOnUseEventHandler){delete this._deferredConnects[attr];}}if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_200){this.params=_200;_4.mixin(this,_200);}this.postMixInProperties();if(!this.id){this.id=_5.getUniqueId(this.declaredClass.replace(/\./g,"_"));}_5.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();for(attr in this.params){this._onConnect(attr);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _203=function(attr,_205){if((_205.params&&attr in _205.params)||_205[attr]){_205.attr(attr,_205[attr]);}};for(var attr in this.attributeMap){_203(attr,this);}_4.forEach(_1f8(this.declaredClass),function(a){if(!(a in this.attributeMap)){_203(a,this);}},this);},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||_4.doc.createElement("div");},postCreate:function(){},startup:function(){this._started=true;},destroyRecursive:function(_208){this.destroyDescendants(_208);this.destroy(_208);},destroy:function(_209){this.uninitialize();_4.forEach(this._connects,function(_20a){_4.forEach(_20a,_4.disconnect);});_4.forEach(this._supportingWidgets||[],function(w){if(w.destroy){w.destroy();}});this.destroyRendering(_209);_5.registry.remove(this.id);},destroyRendering:function(_20c){if(this.bgIframe){this.bgIframe.destroy(_20c);delete this.bgIframe;}if(this.domNode){if(!_20c){_4._destroyElement(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_20c){_4._destroyElement(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_20d){_4.forEach(this.getDescendants(),function(_20e){if(_20e.destroy){_20e.destroy(_20d);}});},uninitialize:function(){return false;},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},_onConnect:function(_210){if(_210 in this._deferredConnects){var _211=this[this._deferredConnects[_210]||"domNode"];this.connect(_211,_210.toLowerCase(),this[_210]);delete this._deferredConnects[_210];}},_setClassAttr:function(_212){var _213=this[this.attributeMap["class"]||"domNode"];_4.removeClass(_213,this["class"]);this["class"]=_212;_4.addClass(_213,_212);},_setStyleAttr:function(_214){var _215=this[this.attributeMap["style"]||"domNode"];if(_215.style.cssText){_215.style.cssText+="; "+_214;}else{_215.style.cssText=_214;}this["style"]=_214;},setAttribute:function(attr,_217){_4.deprecated(this.declaredClass+"::setAttribute() is deprecated. Use attr() instead.","","2.0");this.attr(attr,_217);},_attrToDom:function(attr,_219){var _21a=this.attributeMap[attr];_4.forEach(_4.isArray(_21a)?_21a:[_21a],function(_21b){var _21c=this[_21b.node||_21b||"domNode"];var type=_21b.type||"attribute";switch(type){case "attribute":if(_4.isFunction(_219)){_219=_4.hitch(this,_219);}if(/^on[A-Z][a-zA-Z]*$/.test(attr)){attr=attr.toLowerCase();}_4.attr(_21c,attr,_219);break;case "innerHTML":_21c.innerHTML=_219;break;case "class":_4.removeClass(_21c,this[attr]);_4.addClass(_21c,_219);break;}},this);this[attr]=_219;},attr:function(name,_21f){var args=arguments.length;if(args==1&&!_4.isString(name)){for(var x in name){this.attr(x,name[x]);}return this;}var _222=this._getAttrNames(name);if(args==2){if(this[_222.s]){return this[_222.s](_21f)||this;}else{if(name in this.attributeMap){this._attrToDom(name,_21f);}this[name]=_21f;}return this;}else{if(this[_222.g]){return this[_222.g]();}else{return this[name];}}},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"};},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){if(this.containerNode){var list=_4.query("[widgetId]",this.containerNode);return list.map(_5.byNode);}else{return [];}},nodesWithKeyClick:["input","button"],connect:function(obj,_228,_229){var d=_4;var dco=d.hitch(d,"connect",obj);var _22c=[];if(_228=="ondijitclick"){if(!this.nodesWithKeyClick[obj.nodeName]){var m=d.hitch(this,_229);_22c.push(dco("onkeydown",this,function(e){if(!d.isFF&&e.keyCode==d.keys.ENTER){return m(e);}else{if(e.keyCode==d.keys.SPACE){d.stopEvent(e);}}}),dco("onkeyup",this,function(e){if(e.keyCode==d.keys.SPACE){return m(e);}}));if(d.isFF){_22c.push(dco("onkeypress",this,function(e){if(e.keyCode==d.keys.ENTER){return m(e);}}));}}_228="onclick";}_22c.push(dco(_228,this,_229));this._connects.push(_22c);return _22c;},disconnect:function(_231){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_231){_4.forEach(_231,_4.disconnect);this._connects.splice(i,1);return;}}},isLeftToRight:function(){return _4._isBodyLtr();},isFocusable:function(){return this.focus&&(_4.style(this.domNode,"display")!="none");},placeAt:function(_233,_234){if(_233["declaredClass"]&&_233["addChild"]){_233.addChild(this,_234);}else{_4.place(this.domNode,_233,_234);}return this;}});})();}if(!_4._hasResource["dojo.string"]){_4._hasResource["dojo.string"]=true;_4.provide("dojo.string");_4.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};_4.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=_4.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};_4.string.substitute=function(_23e,map,_240,_241){_241=_241||_4.global;_240=(!_240)?function(v){return v;}:_4.hitch(_241,_240);return _23e.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_243,key,_245){var _246=_4.getObject(key,false,map);if(_245){_246=_4.getObject(_245,false,_241).call(_241,_246,key);}return _240(_246,key).toString();});};_4.string.trim=function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!_4._hasResource["dijit._Templated"]){_4._hasResource["dijit._Templated"]=true;_4.provide("dijit._Templated");_4.declare("dijit._Templated",null,{templateNode:null,templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_stringRepl:function(tmpl){var _24a=this.declaredClass,_24b=this;return _4.string.substitute(tmpl,this,function(_24c,key){if(key.charAt(0)=="!"){_24c=_24b[key.substr(1)];}if(typeof _24c=="undefined"){throw new Error(_24a+" template:"+key);}if(_24c==null){return "";}return key.charAt(0)=="!"?_24c:_24c.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _24e=_5._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(_4.isString(_24e)){node=_5._Templated._createNodesFromText(this._stringRepl(_24e))[0];}else{node=_24e.cloneNode(true);}this.domNode=node;this._attachTemplateNodes(node);var _250=this.srcNodeRef;if(_250&&_250.parentNode){_250.parentNode.replaceChild(node,_250);}if(this.widgetsInTemplate){var cw=(this._supportingWidgets=_4.parser.parse(node));this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(_250);},_fillContent:function(_254){var dest=this.containerNode;if(_254&&dest){while(_254.hasChildNodes()){dest.appendChild(_254.firstChild);}}},_attachTemplateNodes:function(_256,_257){_257=_257||function(n,p){return n.getAttribute(p);};var _25a=_4.isArray(_256)?_256:(_256.all||_256.getElementsByTagName("*"));var x=_4.isArray(_256)?0:-1;var _25c={};for(;x<_25a.length;x++){var _25d=(x==-1)?_256:_25a[x];if(this.widgetsInTemplate&&_257(_25d,"dojoType")){continue;}var _25e=_257(_25d,"dojoAttachPoint");if(_25e){var _25f,_260=_25e.split(/\s*,\s*/);while((_25f=_260.shift())){if(_4.isArray(this[_25f])){this[_25f].push(_25d);}else{this[_25f]=_25d;}}}var _261=_257(_25d,"dojoAttachEvent");if(_261){var _262,_263=_261.split(/\s*,\s*/);var trim=_4.trim;while((_262=_263.shift())){if(_262){var _265=null;if(_262.indexOf(":")!=-1){var _266=_262.split(":");_262=trim(_266[0]);_265=trim(_266[1]);}else{_262=trim(_262);}if(!_265){_265=_262;}this.connect(_25d,_262,_265);}}}var role=_257(_25d,"waiRole");if(role){_5.setWaiRole(_25d,role);}var _268=_257(_25d,"waiState");if(_268){_4.forEach(_268.split(/\s*,\s*/),function(_269){if(_269.indexOf("-")!=-1){var pair=_269.split("-");_5.setWaiState(_25d,pair[0],pair[1]);}});}}}});_5._Templated._templateCache={};_5._Templated.getCachedTemplate=function(_26b,_26c,_26d){var _26e=_5._Templated._templateCache;var key=_26c||_26b;var _270=_26e[key];if(_270){if(!_270.ownerDocument||_270.ownerDocument==_4.doc){return _270;}_4._destroyElement(_270);}if(!_26c){_26c=_5._Templated._sanitizeTemplateString(_4._getText(_26b));}_26c=_4.string.trim(_26c);if(_26d||_26c.match(/\$\{([^\}]+)\}/g)){return (_26e[key]=_26c);}else{return (_26e[key]=_5._Templated._createNodesFromText(_26c)[0]);}};_5._Templated._sanitizeTemplateString=function(_271){if(_271){_271=_271.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _272=_271.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_272){_271=_272[1];}}else{_271="";}return _271;};if(_4.isIE){_4.addOnWindowUnload(function(){var _273=_5._Templated._templateCache;for(var key in _273){var _275=_273[key];if(!isNaN(_275.nodeType)){_4._destroyElement(_275);}delete _273[key];}});}(function(){var _276={cell:{re:/^<t[dh][\s\r\n>]/i,pre:"<table><tbody><tr>",post:"</tr></tbody></table>"},row:{re:/^<tr[\s\r\n>]/i,pre:"<table><tbody>",post:"</tbody></table>"},section:{re:/^<(thead|tbody|tfoot)[\s\r\n>]/i,pre:"<table>",post:"</table>"}};var tn;_5._Templated._createNodesFromText=function(text){if(tn&&tn.ownerDocument!=_4.doc){_4._destroyElement(tn);tn=undefined;}if(!tn){tn=_4.doc.createElement("div");tn.style.display="none";_4.body().appendChild(tn);}var _279="none";var _27a=text.replace(/^\s+/,"");for(var type in _276){var map=_276[type];if(map.re.test(_27a)){_279=type;text=map.pre+text+map.post;break;}}tn.innerHTML=text;if(tn.normalize){tn.normalize();}var tag={cell:"tr",row:"tbody",section:"table"}[_279];var _27e=(typeof tag!="undefined")?tn.getElementsByTagName(tag)[0]:tn;var _27f=[];while(_27e.firstChild){_27f.push(_27e.removeChild(_27e.firstChild));}tn.innerHTML="";return _27f;};})();_4.extend(_5._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!_4._hasResource["dijit._Container"]){_4._hasResource["dijit._Container"]=true;_4.provide("dijit._Container");_4.declare("dijit._Contained",null,{getParent:function(){for(var p=this.domNode.parentNode;p;p=p.parentNode){var id=p.getAttribute&&p.getAttribute("widgetId");if(id){var _282=_5.byId(id);return _282.isContainer?_282:null;}}return null;},_getSibling:function(_283){var node=this.domNode;do{node=node[_283+"Sibling"];}while(node&&node.nodeType!=1);if(!node){return null;}var id=node.getAttribute("widgetId");return _5.byId(id);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});_4.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_287,_288){var _289=this.containerNode;if(_288&&typeof _288=="number"){var _28a=_4.query("> [widgetId]",_289);if(_28a&&_28a.length>=_288){_289=_28a[_288-1];_288="after";}}_4.place(_287.domNode,_289,_288);if(this._started&&!_287._started){_287.startup();}},removeChild:function(_28b){if(typeof _28b=="number"&&_28b>0){_28b=this.getChildren()[_28b];}if(!_28b||!_28b.domNode){return;}var node=_28b.domNode;node.parentNode.removeChild(node);},_nextElement:function(node){do{node=node.nextSibling;}while(node&&node.nodeType!=1);return node;},_firstElement:function(node){node=node.firstChild;if(node&&node.nodeType!=1){node=this._nextElement(node);}return node;},getChildren:function(){return _4.query("> [widgetId]",this.containerNode).map(_5.byNode);},hasChildren:function(){return !!this._firstElement(this.containerNode);},destroyDescendants:function(_28f){_4.forEach(this.getChildren(),function(_290){_290.destroyRecursive(_28f);});},_getSiblingOfChild:function(_291,dir){var node=_291.domNode;var _294=(dir>0?"nextSibling":"previousSibling");do{node=node[_294];}while(node&&(node.nodeType!=1||!_5.byNode(node)));return node?_5.byNode(node):null;},getIndexOfChild:function(_295){var _296=this.getChildren();for(var i=0,c;c=_296[i];i++){if(c==_295){return i;}}return -1;}});_4.declare("dijit._KeyNavContainer",[_5._Container],{_keyNavCodes:{},connectKeyNavHandlers:function(_299,_29a){var _29b=this._keyNavCodes={};var prev=_4.hitch(this,this.focusPrev);var next=_4.hitch(this,this.focusNext);_4.forEach(_299,function(code){_29b[code]=prev;});_4.forEach(_29a,function(code){_29b[code]=next;});this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_4.forEach(this.getChildren(),_4.hitch(this,"_startupChild"));},addChild:function(_2a0,_2a1){_5._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(_2a0);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusNext:function(){if(this.focusedChild&&this.focusedChild.hasNextFocalNode&&this.focusedChild.hasNextFocalNode()){this.focusedChild.focusNext();return;}var _2a2=this._getNextFocusableChild(this.focusedChild,1);if(_2a2.getFocalNodes){this.focusChild(_2a2,_2a2.getFocalNodes()[0]);}else{this.focusChild(_2a2);}},focusPrev:function(){if(this.focusedChild&&this.focusedChild.hasPrevFocalNode&&this.focusedChild.hasPrevFocalNode()){this.focusedChild.focusPrev();return;}var _2a3=this._getNextFocusableChild(this.focusedChild,-1);if(_2a3.getFocalNodes){var _2a4=_2a3.getFocalNodes();this.focusChild(_2a3,_2a4[_2a4.length-1]);}else{this.focusChild(_2a3);}},focusChild:function(_2a5,node){if(_2a5){if(this.focusedChild&&_2a5!==this.focusedChild){this._onChildBlur(this.focusedChild);}this.focusedChild=_2a5;if(node&&_2a5.focusFocalNode){_2a5.focusFocalNode(node);}else{_2a5.focus();}}},_startupChild:function(_2a7){if(_2a7.getFocalNodes){_4.forEach(_2a7.getFocalNodes(),function(node){_4.attr(node,"tabindex",-1);this._connectNode(node);},this);}else{var node=_2a7.focusNode||_2a7.domNode;if(_2a7.isFocusable()){_4.attr(node,"tabindex",-1);}this._connectNode(node);}},_connectNode:function(node){this.connect(node,"onfocus","_onNodeFocus");this.connect(node,"onblur","_onNodeBlur");},_onContainerFocus:function(evt){if(evt.target===this.domNode){this.focusFirstChild();}},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();_4.stopEvent(evt);}},_onNodeFocus:function(evt){_4.attr(this.domNode,"tabindex",-1);var _2af=_5.getEnclosingWidget(evt.target);if(_2af&&_2af.isFocusable()){this.focusedChild=_2af;}_4.stopEvent(evt);},_onNodeBlur:function(evt){if(this.tabIndex){_4.attr(this.domNode,"tabindex",this.tabIndex);}_4.stopEvent(evt);},_onChildBlur:function(_2b1){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getNextFocusableChild:function(_2b2,dir){if(_2b2){_2b2=this._getSiblingOfChild(_2b2,dir);}var _2b4=this.getChildren();for(var i=0;i<_2b4.length;i++){if(!_2b2){_2b2=_2b4[(dir>0)?0:(_2b4.length-1)];}if(_2b2.isFocusable()){return _2b2;}_2b2=this._getSiblingOfChild(_2b2,dir);}return null;}});}if(!_4._hasResource["dijit.layout._LayoutWidget"]){_4._hasResource["dijit.layout._LayoutWidget"]=true;_4.provide("dijit.layout._LayoutWidget");_4.declare("dijit.layout._LayoutWidget",[_5._Widget,_5._Container,_5._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,postCreate:function(){_4.addClass(this.domNode,"dijitContainer");_4.addClass(this.domNode,this.baseClass);},startup:function(){if(this._started){return;}_4.forEach(this.getChildren(),function(_2b6){_2b6.startup();});if(!this.getParent||!this.getParent()){this.resize();if(tsConfig&&!tsConfig.is_mobile){this.connect(_4.global,"onresize","resize");}}this.inherited(arguments);},resize:function(_2b7,_2b8){var node=this.domNode;if(_2b7){_4.marginBox(node,_2b7);if(_2b7.t){node.style.top=_2b7.t+"px";}if(_2b7.l){node.style.left=_2b7.l+"px";}}var mb=_2b8||{};_4.mixin(mb,_2b7||{});if(!("h" in mb)||!("w" in mb)){mb=_4.mixin(_4.marginBox(node),mb);}var cs=_4.getComputedStyle(node);var me=_4._getMarginExtents(node,cs);var be=_4._getBorderExtents(node,cs);var bb=this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)};var pe=_4._getPadExtents(node,cs);this._contentBox={l:_4._toPixelValue(node,cs.paddingLeft),t:_4._toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_2c0){if(_2c0.baseClass){_4.addClass(_2c0.domNode,this.baseClass+"-"+_2c0.baseClass);}},addChild:function(_2c1,_2c2){this.inherited(arguments);if(this._started){this._setupChild(_2c1);}},removeChild:function(_2c3){if(_2c3.baseClass){_4.removeClass(_2c3.domNode,this.baseClass+"-"+_2c3.baseClass);}this.inherited(arguments);}});_5.layout.marginBox2contentBox=function(node,mb){var cs=_4.getComputedStyle(node);var me=_4._getMarginExtents(node,cs);var pb=_4._getPadBorderExtents(node,cs);return {l:_4._toPixelValue(node,cs.paddingLeft),t:_4._toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};(function(){var _2c9=function(word){return word.substring(0,1).toUpperCase()+word.substring(1);};var size=function(_2cc,dim){_2cc.resize?_2cc.resize(dim):_4.marginBox(_2cc.domNode,dim);_4.mixin(_2cc,_4.marginBox(_2cc.domNode));_4.mixin(_2cc,dim);};_5.layout.layoutChildren=function(_2ce,dim,_2d0){dim=_4.mixin({},dim);_4.addClass(_2ce,"dijitLayoutContainer");_2d0=_4.filter(_2d0,function(item){return item.layoutAlign!="client";}).concat(_4.filter(_2d0,function(item){return item.layoutAlign=="client";}));_4.forEach(_2d0,function(_2d3){var elm=_2d3.domNode,pos=_2d3.layoutAlign;var _2d6=elm.style;_2d6.left=dim.l+"px";_2d6.top=dim.t+"px";_2d6.bottom=_2d6.right="auto";_4.addClass(elm,"dijitAlign"+_2c9(pos));if(pos=="top"||pos=="bottom"){size(_2d3,{w:dim.w});dim.h-=_2d3.h;if(pos=="top"){dim.t+=_2d3.h;}else{_2d6.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){size(_2d3,{h:dim.h});dim.w-=_2d3.w;if(pos=="left"){dim.l+=_2d3.w;}else{_2d6.left=dim.l+dim.w+"px";}}else{if(pos=="client"){size(_2d3,dim);}}}});};})();}if(!_4._hasResource["dijit.form._FormWidget"]){_4._hasResource["dijit.form._FormWidget"]=true;_4.provide("dijit.form._FormWidget");_4.declare("dijit.form._FormWidget",[_5._Widget,_5._Templated],{baseClass:"",name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,readOnly:false,intermediateChanges:false,attributeMap:_4.mixin(_4.clone(_5._Widget.prototype.attributeMap),{value:"focusNode",disabled:"focusNode",readOnly:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode"}),_setDisabledAttr:function(_2d7){this.disabled=_2d7;_4.attr(this.focusNode,"disabled",_2d7);_5.setWaiState(this.focusNode,"disabled",_2d7);if(_2d7){this._hovering=false;this._active=false;this.focusNode.removeAttribute("tabIndex");}else{this.focusNode.setAttribute("tabIndex",this.tabIndex);}this._setStateClass();},setDisabled:function(_2d8){_4.deprecated("setDisabled("+_2d8+") is deprecated. Use attr('disabled',"+_2d8+") instead.","","2.0");this.attr("disabled",_2d8);},_scroll:true,_onFocus:function(e){if(this._scroll){_5.scrollIntoView(this.domNode);}this.inherited(arguments);},_onMouse:function(_2da){var _2db=_2da.currentTarget;if(_2db&&_2db.getAttribute){this.stateModifier=_2db.getAttribute("stateModifier")||"";}if(!this.disabled){switch(_2da.type){case "mouseenter":case "mouseover":this._hovering=true;this._active=this._mouseDown;break;case "mouseout":case "mouseleave":this._hovering=false;this._active=false;break;case "mousedown":this._active=true;this._mouseDown=true;var _2dc=this.connect(_4.body(),"onmouseup",function(){if(this._mouseDown&&this.isFocusable()){this.focus();}this._active=false;this._mouseDown=false;this._setStateClass();this.disconnect(_2dc);});break;}this._setStateClass();}},isFocusable:function(){return !this.disabled&&!this.readOnly&&this.focusNode&&(_4.style(this.domNode,"display")!="none");},focus:function(){_5.focus(this.focusNode);},_setStateClass:function(){var _2dd=this.baseClass.split(" ");function multiply(_2de){_2dd=_2dd.concat(_4.map(_2dd,function(c){return c+_2de;}),"dijit"+_2de);};if(this.checked){multiply("Checked");}if(this.state){multiply(this.state);}if(this.selected){multiply("Selected");}if(this.disabled){multiply("Disabled");}else{if(this.readOnly){multiply("ReadOnly");}else{if(this._active){multiply(this.stateModifier+"Active");}else{if(this._focused){multiply("Focused");}if(this._hovering){multiply(this.stateModifier+"Hover");}}}}var tn=this.stateNode||this.domNode,_2e1={};_4.forEach(tn.className.split(" "),function(c){_2e1[c]=true;});if("_stateClasses" in this){_4.forEach(this._stateClasses,function(c){delete _2e1[c];});}_4.forEach(_2dd,function(c){_2e1[c]=true;});var _2e5=[];for(var c in _2e1){_2e5.push(c);}tn.className=_2e5.join(" ");this._stateClasses=_2dd;},compare:function(val1,val2){if((typeof val1=="number")&&(typeof val2=="number")){return (isNaN(val1)&&isNaN(val2))?0:(val1-val2);}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(_2e9){},_onChangeActive:false,_handleOnChange:function(_2ea,_2eb){this._lastValue=_2ea;if(this._lastValueReported==undefined&&(_2eb===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_2ea;}if((this.intermediateChanges||_2eb||_2eb===undefined)&&((typeof _2ea!=typeof this._lastValueReported)||this.compare(_2ea,this._lastValueReported)!=0)){this._lastValueReported=_2ea;if(this._onChangeActive){this.onChange(_2ea);}}},create:function(){this.inherited(arguments);this._onChangeActive=true;this._setStateClass();},destroy:function(){if(this._layoutHackHandle){clearTimeout(this._layoutHackHandle);}this.inherited(arguments);},setValue:function(_2ec){_4.deprecated("dijit.form._FormWidget:setValue("+_2ec+") is deprecated.  Use attr('value',"+_2ec+") instead.","","2.0");this.attr("value",_2ec);},getValue:function(){_4.deprecated(this.declaredClass+"::getValue() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value");},_layoutHack:function(){if(_4.isFF==2&&!this._layoutHackHandle){var node=this.domNode;var old=node.style.opacity;node.style.opacity="0.999";this._layoutHackHandle=setTimeout(_4.hitch(this,function(){this._layoutHackHandle=null;node.style.opacity=old;}),0);}}});_4.declare("dijit.form._FormValueWidget",_5.form._FormWidget,{attributeMap:_4.mixin(_4.clone(_5.form._FormWidget.prototype.attributeMap),{value:""}),postCreate:function(){if(_4.isIE||_4.isSafari){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._resetValue=this.value;}},_setValueAttr:function(_2ef,_2f0){this.value=_2ef;this._handleOnChange(_2ef,_2f0);},_getValueAttr:function(_2f1){return this._lastValue;},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_valueChanged:function(){var v=this.attr("value");var lv=this._lastValueReported;return ((v!==null&&(v!==undefined)&&v.toString)?v.toString():"")!==((lv!==null&&(lv!==undefined)&&lv.toString)?lv.toString():"");},_onKeyDown:function(e){if(e.keyCode==_4.keys.ESCAPE&&!e.ctrlKey&&!e.altKey){var te;if(_4.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=_4.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}else{if(_4.isSafari){te=document.createEvent("Events");te.initEvent("keypress",true,true);te.keyCode=_4.keys.ESCAPE;te.shiftKey=e.shiftKey;e.target.dispatchEvent(te);}}}},_onKeyPress:function(e){if(e.charOrCode==_4.keys.ESCAPE&&!e.ctrlKey&&!e.altKey&&this._valueChanged()){this.undo();_4.stopEvent(e);return false;}else{if(this.intermediateChanges){var _2f7=this;setTimeout(function(){_2f7._handleOnChange(_2f7.attr("value"),false);},0);}}return true;}});}if(!_4._hasResource["dijit.dijit"]){_4._hasResource["dijit.dijit"]=true;_4.provide("dijit.dijit");}if(!_4._hasResource["dijit.form.Button"]){_4._hasResource["dijit.form.Button"]=true;_4.provide("dijit.form.Button");_4.declare("dijit.form.Button",_5.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:"<span class=\"dijit dijitReset dijitLeft dijitInline\"\r\n\tdojoAttachEvent=\"ondijitclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"\r\n\t><span class=\"dijitReset dijitRight dijitInline\"\r\n\t\t><span class=\"dijitReset dijitInline dijitButtonNode\"\r\n\t\t\t><button class=\"dijitReset dijitStretch dijitButtonContents\"\r\n\t\t\t\tdojoAttachPoint=\"titleNode,focusNode\" \r\n\t\t\t\tname=\"${name}\" type=\"${type}\" waiRole=\"button\" waiState=\"labelledby-${id}_label\"\r\n\t\t\t\t><span class=\"dijitReset dijitInline\" dojoAttachPoint=\"iconNode\" \r\n\t\t\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#10003;</span \r\n\t\t\t\t></span \r\n\t\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\" \r\n\t\t\t\t\tid=\"${id}_label\"  \r\n\t\t\t\t\tdojoAttachPoint=\"containerNode\"\r\n\t\t\t\t></span\r\n\t\t\t></button\r\n\t\t></span\r\n\t></span\r\n></span>\r\n",attributeMap:_4.mixin(_4.clone(_5.form._FormWidget.prototype.attributeMap),{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),_onClick:function(e){if(this.disabled||this.readOnly){return false;}this._clicked();return this.onClick(e);},_onButtonClick:function(e){if(e.type!="click"){_4.stopEvent(e);}if(this._onClick(e)===false){e.preventDefault();}else{if(this.type=="submit"&&!this.focusNode.form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _2fb=_5.byNode(node);if(_2fb&&typeof _2fb._onSubmit=="function"){_2fb._onSubmit(e);break;}}}}},_fillContent:function(_2fc){if(_2fc&&!("label" in this.params)){this.attr("label",_2fc.innerHTML);}},postCreate:function(){if(this.showLabel==false){_4.addClass(this.containerNode,"dijitDisplayNone");}_4.setSelectable(this.focusNode,false);this.inherited(arguments);},onClick:function(e){return true;},_clicked:function(e){},setLabel:function(_2ff){_4.deprecated("dijit.form.Button.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",_2ff);},_setLabelAttr:function(_300){this.containerNode.innerHTML=this.label=_300;this._layoutHack();if(this.showLabel==false&&!this.params.title){this.titleNode.title=_4.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});_4.declare("dijit.form.DropDownButton",[_5.form.Button,_5._Container],{baseClass:"dijitDropDownButton",templateString:"<span class=\"dijit dijitReset dijitLeft dijitInline\"\r\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey\"\r\n\t><span class='dijitReset dijitRight dijitInline'\r\n\t\t><span class='dijitReset dijitInline dijitButtonNode'\r\n\t\t\t><button class=\"dijitReset dijitStretch dijitButtonContents\" \r\n\t\t\t\ttype=\"${type}\" name=\"${name}\"\r\n\t\t\t\tdojoAttachPoint=\"focusNode,titleNode\" \r\n\t\t\t\twaiRole=\"button\" waiState=\"haspopup-true,labelledby-${id}_label\"\r\n\t\t\t\t><span class=\"dijitReset dijitInline\" \r\n\t\t\t\t\tdojoAttachPoint=\"iconNode\"\r\n\t\t\t\t></span\r\n\t\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"  \r\n\t\t\t\t\tdojoAttachPoint=\"containerNode,popupStateNode\" \r\n\t\t\t\t\tid=\"${id}_label\"\r\n\t\t\t\t></span\r\n\t\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\">&thinsp;</span\r\n\t\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\r\n\t\t\t></button\r\n\t\t></span\r\n\t></span\r\n></span>\r\n",_fillContent:function(){if(this.srcNodeRef){var _301=_4.query("*",this.srcNodeRef);_5.form.DropDownButton.superclass._fillContent.call(this,_301[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown){var _302=_4.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=_5.byNode(_302);delete this.dropDownContainer;}_5.popup.prepare(this.dropDown.domNode);this.inherited(arguments);},destroyDescendants:function(){if(this.dropDown){this.dropDown.destroyRecursive();delete this.dropDown;}this.inherited(arguments);},_onArrowClick:function(e){if(this.disabled||this.readOnly){return;}this._toggleDropDown();},_onDropDownClick:function(e){var _305=_4.isFF&&_4.isFF<3&&navigator.appVersion.indexOf("Macintosh")!=-1;if(!_305||e.detail!=0||this._seenKeydown){this._onArrowClick(e);}this._seenKeydown=false;},_onDropDownKeydown:function(e){this._seenKeydown=true;},_onDropDownBlur:function(e){this._seenKeydown=false;},_onKey:function(e){if(this.disabled||this.readOnly){return;}if(e.charOrCode==_4.keys.DOWN_ARROW){if(!this.dropDown||this.dropDown.domNode.style.visibility=="hidden"){_4.stopEvent(e);this._toggleDropDown();}}},_onBlur:function(){this._closeDropDown();this.inherited(arguments);},_toggleDropDown:function(){if(this.disabled||this.readOnly){return;}_5.focus(this.popupStateNode);var _309=this.dropDown;if(!_309){return;}if(!this._opened){if(_309.href&&!_309.isLoaded){var self=this;var _30b=_4.connect(_309,"onLoad",function(){_4.disconnect(_30b);self._openDropDown();});_309._loadCheck(true);return;}else{this._openDropDown();}}else{this._closeDropDown();}},_openDropDown:function(args){var _30d=this.dropDown;var _30e=_30d.domNode.style.width;var self=this;_5.popup.open({parent:this,popup:_30d,around:this.domNode,orient:(args&&args.orient)?args.orient:this.isLeftToRight()?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"},onExecute:function(){self._closeDropDown(true);},onCancel:function(){self._closeDropDown(true);},onClose:function(){_30d.domNode.style.width=_30e;self.popupStateNode.removeAttribute("popupActive");self._opened=false;}});if(this.domNode.offsetWidth>_30d.domNode.offsetWidth){var _310=null;if(!this.isLeftToRight()){_310=_30d.domNode.parentNode;var _311=_310.offsetLeft+_310.offsetWidth;}_4.marginBox(_30d.domNode,{w:this.domNode.offsetWidth});if(_310){_310.style.left=_311-this.domNode.offsetWidth+"px";}}this.popupStateNode.setAttribute("popupActive","true");this._opened=true;if(_30d.focus){_30d.focus();}},_closeDropDown:function(_312){if(this._opened){_5.popup.close(this.dropDown);if(_312){this.focus();}this._opened=false;}}});_4.declare("dijit.form.ComboButton",_5.form.DropDownButton,{templateString:"<table class='dijit dijitReset dijitInline dijitLeft'\r\n\tcellspacing='0' cellpadding='0' waiRole=\"presentation\"\r\n\t><tbody waiRole=\"presentation\"><tr waiRole=\"presentation\"\r\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents dijitButtonNode\"\r\n\t\t\tdojoAttachEvent=\"ondijitclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"  dojoAttachPoint=\"titleNode\"\r\n\t\t\twaiRole=\"button\" waiState=\"labelledby-${id}_label\"\r\n\t\t\t><div class=\"dijitReset dijitInline\" dojoAttachPoint=\"iconNode\" waiRole=\"presentation\"></div\r\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" dojoAttachPoint=\"containerNode\" waiRole=\"presentation\"></div\r\n\t\t></td\r\n\t\t><td class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton'\r\n\t\t\tdojoAttachPoint=\"popupStateNode,focusNode\"\r\n\t\t\tdojoAttachEvent=\"ondijitclick:_onArrowClick, onkeypress:_onKey,onmouseenter:_onMouse,onmouseleave:_onMouse\"\r\n\t\t\tstateModifier=\"DownArrow\"\r\n\t\t\ttitle=\"${optionsTitle}\" name=\"${name}\"\r\n\t\t\twaiRole=\"button\" waiState=\"haspopup-true\"\r\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" waiRole=\"presentation\">&thinsp;</div\r\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" waiRole=\"presentation\">&#9660;</div\r\n\t\t></td\r\n\t></tr></tbody\r\n></table>\r\n",attributeMap:_4.mixin(_4.clone(_5.form.Button.prototype.attributeMap),{id:"",name:"",tabIndex:["focusNode","titleNode"]}),optionsTitle:"",baseClass:"dijitComboButton",_focusedNode:null,postCreate:function(){this.inherited(arguments);this._focalNodes=[this.titleNode,this.popupStateNode];_4.forEach(this._focalNodes,_4.hitch(this,function(node){if(_4.isIE){this.connect(node,"onactivate",this._onNodeFocus);this.connect(node,"ondeactivate",this._onNodeBlur);}else{this.connect(node,"onfocus",this._onNodeFocus);this.connect(node,"onblur",this._onNodeBlur);}}));},focusFocalNode:function(node){this._focusedNode=node;_5.focus(node);},hasNextFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[1];},focusNext:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?1:0];_5.focus(this._focusedNode);},hasPrevFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[0];},focusPrev:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?0:1];_5.focus(this._focusedNode);},getFocalNodes:function(){return this._focalNodes;},_onNodeFocus:function(evt){this._focusedNode=evt.currentTarget;var fnc=this._focusedNode==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";_4.addClass(this._focusedNode,fnc);},_onNodeBlur:function(evt){var fnc=evt.currentTarget==this.focusNode?"dijitDownArrowButtonFocused":"dijitButtonContentsFocused";_4.removeClass(evt.currentTarget,fnc);},_onBlur:function(){this.inherited(arguments);this._focusedNode=null;}});_4.declare("dijit.form.ToggleButton",_5.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:_4.mixin(_4.clone(_5.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(evt){this.attr("checked",!this.checked);},_setCheckedAttr:function(_31a){this.checked=_31a;_4.attr(this.focusNode||this.domNode,"checked",_31a);_5.setWaiState(this.focusNode||this.domNode,"pressed",_31a);this._setStateClass();this._handleOnChange(_31a,true);},setChecked:function(_31b){_4.deprecated("setChecked("+_31b+") is deprecated. Use attr('checked',"+_31b+") instead.","","2.0");this.attr("checked",_31b);},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false);}});}if(!_4._hasResource["tableau.base.types"]){_4._hasResource["tableau.base.types"]=true;_4.provide("tableau.base.types");tableau.types=tableau.types||{};tableau.types.FieldType={FT_QUANTITATIVE:"Q",FT_ORDINAL:"O",FT_NOMINAL:"N",FT_UNKNOWN:null};tableau.types.QFDomain={QFD_ALL:"all",QFD_CONTEXT:"context",QFD_RELEVANT:"relevant"};tableau.types.CFStyle={CFS_ALL:"all",CFS_SINGLE:"single-select",CFS_MULTIPLE:"multi-select"};tableau.types.HFStyle={HFS_SINGLE:"single-select",HFS_MULTIPLE:"multi-select"};tableau.types.CFType={CFT_INCLUSIVE:"include",CFT_EXCLUSIVE:"exclude"};tableau.types.QFFixed={QFF_FIXED_START:"start",QFF_FIXED_END:"end"};tableau.types.QFInclude={QFI_ALL:"include-all",QFI_NON_NULL:"include-non-null",QFI_NULL_ONLY:"include-null",QFI_RANGE:"include-range",QFI_RANGE_OR_NULL:"include-range-or-null",isRange:function(v){switch(v){case this.QFI_ALL:case this.QFI_NULL_ONLY:case this.QFI_NON_NULL:return false;default:return true;}}};tableau.types.ColumnClass={CLASS_METADATA:0,CLASS_DATABASE:1,CLASS_NUMERICBIN:2,CLASS_CATEGORICALBIN:3,CLASS_INSTANCE:4,CLASS_MDXCALC:5,CLASS_USERCALC:6,CLASS_DANGLING:7,CLASS_LOCALDATA:8};tableau.types.SelectAction={Simple:"simple",Toggle:"toggle",Range:"range",Menu:"menu"};tableau.types.MouseMode={Silent:"silent",Select:"select",Zoom:"zoom",Pan:"pan"};tableau.types.FloatingToolbarVisibility={Auto:"auto",Show:"show",Hide:"hide"};tableau.types.DrillState={DRILLNONE:0,DRILLDOWN:1,DRILLUP:2,DRILLBOTH:3};tableau.types.ExportDialogType={"ExportImage":{title:tab.Strings.ExportImageDialogTitle,mimeType:"image/png",message:tab.Strings.ExportImageDialogMessage},"ExportData":{title:tab.Strings.ExportDataDialogTitle,mimeType:"text/csv",message:tab.Strings.ExportDataDialogMessage},"ExportCrosstab":{title:tab.Strings.ExportCrosstabDialogTitle,message:tab.Strings.ExportCrosstabDialogMessage},"PrintPDF":{title:tab.Strings.PrintPdfDialogTitle,mimeType:"application/pdf",message:tab.Strings.PrintPdfDialogMessage,noping:true}};(function(){var _31d=24*60*60*1000,_31e=Date.UTC(1899,11,30,0,0,0,0);tableau.types.JsDateFromOleDate=function(f){var days=(f<0)?Math.ceil(f):Math.floor(f),ms=Math.round(Math.abs(f-days)*_31d)+days*_31d;return ms+_31e;};tableau.types.OleDateFromJsDate=function(ms){var t=new Date(ms),d=Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),days=(d-_31e)/_31d,time=(ms-d)/_31d;return days+(((days<0)?-1:1)*time);};}());tableau.types.isO=function(_327){var ft=tableau.types.FieldType;return _327.fieldType===ft.FT_ORDINAL||_327.fieldType===ft.FT_NOMINAL;};tableau.types.isMetadata=function(_329){return _329.column_class===tableau.types.ColumnClass.CLASS_METADATA;};tableau.types.isOm=function(_32a){return tableau.types.isO(_32a)&&tableau.types.isMetadata(_32a);};tableau.types.getRegionType=function(_32b){switch(_32b){case "viz":case "bottomaxis":case "topaxis":case "leftaxis":case "rightaxis":case "xheader":case "yheader":return tableau.types.RegionType.table;case "color":case "shape":case "size":case "map":return tableau.types.RegionType.legend;case "filter":return tableau.types.RegionType.filter;case "current-page":return tableau.types.RegionType.currentPage;case "title":return tableau.types.RegionType.title;case "text":return tableau.types.RegionType.text;case "bitmap":return tableau.types.RegionType.bitmap;case "web":return tableau.types.RegionType.web;case "paramctrl":return tableau.types.RegionType.parameter;case "draw":return tableau.types.RegionType.draw;case "text-block":return tableau.types.RegionType.textBlock;case "layout-basic":case "layout-flow":return tableau.types.RegionType.layoutContainer;default:return null;}};}if(!_4._hasResource["dojo.dnd.common"]){_4._hasResource["dojo.dnd.common"]=true;_4.provide("dojo.dnd.common");_4.dnd._isMac=navigator.appVersion.indexOf("Macintosh")>=0;_4.dnd._copyKey=_4.dnd._isMac?"metaKey":"ctrlKey";_4.dnd.getCopyKeyState=function(e){return e[_4.dnd._copyKey];};_4.dnd._uniqueId=0;_4.dnd.getUniqueId=function(){var id;do{id=_4._scopeName+"Unique"+(++_4.dnd._uniqueId);}while(_4.byId(id));return id;};_4.dnd._empty={};_4.dnd.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};}if(!_4._hasResource["dojo.dnd.autoscroll"]){_4._hasResource["dojo.dnd.autoscroll"]=true;_4.provide("dojo.dnd.autoscroll");_4.dnd.getViewport=function(){var d=_4.doc,dd=d.documentElement,w=window,b=_4.body();if(_4.isMozilla){return {w:dd.clientWidth,h:w.innerHeight};}else{if(!_4.isOpera&&w.innerWidth){return {w:w.innerWidth,h:w.innerHeight};}else{if(!_4.isOpera&&dd&&dd.clientWidth){return {w:dd.clientWidth,h:dd.clientHeight};}else{if(b.clientWidth){return {w:b.clientWidth,h:b.clientHeight};}}}}return null;};_4.dnd.V_TRIGGER_AUTOSCROLL=32;_4.dnd.H_TRIGGER_AUTOSCROLL=32;_4.dnd.V_AUTOSCROLL_VALUE=16;_4.dnd.H_AUTOSCROLL_VALUE=16;_4.dnd.autoScroll=function(e){var v=_4.dnd.getViewport(),dx=0,dy=0;if(e.clientX<_4.dnd.H_TRIGGER_AUTOSCROLL){dx=-_4.dnd.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-_4.dnd.H_TRIGGER_AUTOSCROLL){dx=_4.dnd.H_AUTOSCROLL_VALUE;}}if(e.clientY<_4.dnd.V_TRIGGER_AUTOSCROLL){dy=-_4.dnd.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-_4.dnd.V_TRIGGER_AUTOSCROLL){dy=_4.dnd.V_AUTOSCROLL_VALUE;}}window.scrollBy(dx,dy);};_4.dnd._validNodes={"div":1,"p":1,"td":1};_4.dnd._validOverflow={"auto":1,"scroll":1};_4.dnd.autoScrollNodes=function(e){for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in _4.dnd._validNodes)){var s=_4.getComputedStyle(n);if(s.overflow.toLowerCase() in _4.dnd._validOverflow){var b=_4._getContentBox(n,s),t=_4._abs(n,true);var w=Math.min(_4.dnd.H_TRIGGER_AUTOSCROLL,b.w/2),h=Math.min(_4.dnd.V_TRIGGER_AUTOSCROLL,b.h/2),rx=e.pageX-t.x,ry=e.pageY-t.y,dx=0,dy=0;if(_4.isSafari||_4.isOpera){rx+=_4.body().scrollLeft,ry+=_4.body().scrollTop;}if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}}if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}}var _343=n.scrollLeft,_344=n.scrollTop;n.scrollLeft=n.scrollLeft+dx;n.scrollTop=n.scrollTop+dy;if(_343!=n.scrollLeft||_344!=n.scrollTop){return;}}}try{n=n.parentNode;}catch(x){n=null;}}_4.dnd.autoScroll(e);};}if(!_4._hasResource["dojo.dnd.Mover"]){_4._hasResource["dojo.dnd.Mover"]=true;_4.provide("dojo.dnd.Mover");_4.declare("dojo.dnd.Mover",null,{constructor:function(node,e,host){this.node=_4.byId(node);this.marginBox={l:e.pageX,t:e.pageY};this.mouseButton=e.button;var h=this.host=host,d=node.ownerDocument,_34a=_4.connect(d,"onmousemove",this,"onFirstMove");this.events=[_4.connect(d,"onmousemove",this,"onMouseMove"),_4.connect(d,"onmouseup",this,"onMouseUp"),_4.connect(d,"ondragstart",_4.stopEvent),_4.connect(d.body,"onselectstart",_4.stopEvent),_34a];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){_4.dnd.autoScroll(e);var m=this.marginBox;this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY});_4.stopEvent(e);},onMouseUp:function(e){if(_4.isSafari&&_4.dnd._isMac&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}_4.stopEvent(e);},onFirstMove:function(){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left));t=Math.round(parseFloat(s.top));break;default:s.position="absolute";var m=_4.marginBox(this.node);var b=_4.doc.body;var bs=_4.getComputedStyle(b);var bm=_4._getMarginBox(b,bs);var bc=_4._getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this);}_4.disconnect(this.events.pop());},destroy:function(){_4.forEach(this.events,_4.disconnect);var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});}if(!_4._hasResource["dojo.dnd.Moveable"]){_4._hasResource["dojo.dnd.Moveable"]=true;_4.provide("dojo.dnd.Moveable");_4.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(node,_359){this.node=_4.byId(node);if(!_359){_359={};}this.handle=_359.handle?_4.byId(_359.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_359.delay>0?_359.delay:0;this.skip=_359.skip;this.mover=_359.mover?_359.mover:_4.dnd.Mover;this.events=[_4.connect(this.handle,"onmousedown",this,"onMouseDown"),_4.connect(this.handle,"ondragstart",this,"onSelectStart"),_4.connect(this.handle,"onselectstart",this,"onSelectStart")];},markupFactory:function(_35a,node){return new _4.dnd.Moveable(node,_35a);},destroy:function(){_4.forEach(this.events,_4.disconnect);this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&_4.dnd.isFormElement(e)){return;}if(this.delay){this.events.push(_4.connect(this.handle,"onmousemove",this,"onMouseMove"),_4.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=e.pageX;this._lastY=e.pageY;}else{this.onDragDetected(e);}_4.stopEvent(e);},onMouseMove:function(e){if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}_4.stopEvent(e);},onMouseUp:function(e){for(var i=0;i<2;++i){_4.disconnect(this.events.pop());}_4.stopEvent(e);},onSelectStart:function(e){if(!this.skip||!_4.dnd.isFormElement(e)){_4.stopEvent(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_362){_4.publish("/dnd/move/start",[_362]);_4.addClass(_4.body(),"dojoMove");_4.addClass(this.node,"dojoMoveItem");},onMoveStop:function(_363){_4.publish("/dnd/move/stop",[_363]);_4.removeClass(_4.body(),"dojoMove");_4.removeClass(this.node,"dojoMoveItem");},onFirstMove:function(_364){},onMove:function(_365,_366){this.onMoving(_365,_366);var s=_365.node.style;s.left=_366.l+"px";s.top=_366.t+"px";this.onMoved(_365,_366);},onMoving:function(_368,_369){},onMoved:function(_36a,_36b){}});}if(!_4._hasResource["dojo.dnd.move"]){_4._hasResource["dojo.dnd.move"]=true;_4.provide("dojo.dnd.move");_4.declare("dojo.dnd.move.constrainedMoveable",_4.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(_36c,node){return new _4.dnd.move.constrainedMoveable(node,_36c);},constructor:function(node,_36f){if(!_36f){_36f={};}this.constraints=_36f.constraints;this.within=_36f.within;},onFirstMove:function(_370){var c=this.constraintBox=this.constraints.call(this,_370);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=_4.marginBox(_370.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_373,_374){var c=this.constraintBox,s=_373.node.style;s.left=(_374.l<c.l?c.l:c.r<_374.l?c.r:_374.l)+"px";s.top=(_374.t<c.t?c.t:c.b<_374.t?c.b:_374.t)+"px";}});_4.declare("dojo.dnd.move.boxConstrainedMoveable",_4.dnd.move.constrainedMoveable,{box:{},markupFactory:function(_377,node){return new _4.dnd.move.boxConstrainedMoveable(node,_377);},constructor:function(node,_37a){var box=_37a&&_37a.box;this.constraints=function(){return box;};}});_4.declare("dojo.dnd.move.parentConstrainedMoveable",_4.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(_37c,node){return new _4.dnd.move.parentConstrainedMoveable(node,_37c);},constructor:function(node,_37f){var area=_37f&&_37f.area;this.constraints=function(){var n=this.node.parentNode,s=_4.getComputedStyle(n),mb=_4._getMarginBox(n,s);if(area=="margin"){return mb;}var t=_4._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=_4._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=_4._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});_4.dnd.move.constrainedMover=function(fun,_386){_4.deprecated("dojo.dnd.move.constrainedMover, use dojo.dnd.move.constrainedMoveable instead");var _387=function(node,e,_38a){_4.dnd.Mover.call(this,node,e,_38a);};_4.extend(_387,_4.dnd.Mover.prototype);_4.extend(_387,{onMouseMove:function(e){_4.dnd.autoScroll(e);var m=this.marginBox,c=this.constraintBox,l=m.l+e.pageX,t=m.t+e.pageY;l=l<c.l?c.l:c.r<l?c.r:l;t=t<c.t?c.t:c.b<t?c.b:t;this.host.onMove(this,{l:l,t:t});},onFirstMove:function(){_4.dnd.Mover.prototype.onFirstMove.call(this);var c=this.constraintBox=fun.call(this);c.r=c.l+c.w;c.b=c.t+c.h;if(_386){var mb=_4.marginBox(this.node);c.r-=mb.w;c.b-=mb.h;}}});return _387;};_4.dnd.move.boxConstrainedMover=function(box,_393){_4.deprecated("dojo.dnd.move.boxConstrainedMover, use dojo.dnd.move.boxConstrainedMoveable instead");return _4.dnd.move.constrainedMover(function(){return box;},_393);};_4.dnd.move.parentConstrainedMover=function(area,_395){_4.deprecated("dojo.dnd.move.parentConstrainedMover, use dojo.dnd.move.parentConstrainedMoveable instead");var fun=function(){var n=this.node.parentNode,s=_4.getComputedStyle(n),mb=_4._getMarginBox(n,s);if(area=="margin"){return mb;}var t=_4._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=_4._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=_4._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};return _4.dnd.move.constrainedMover(fun,_395);};_4.dnd.constrainedMover=_4.dnd.move.constrainedMover;_4.dnd.boxConstrainedMover=_4.dnd.move.boxConstrainedMover;_4.dnd.parentConstrainedMover=_4.dnd.move.parentConstrainedMover;}if(!_4._hasResource["dojo.dnd.TimedMoveable"]){_4._hasResource["dojo.dnd.TimedMoveable"]=true;_4.provide("dojo.dnd.TimedMoveable");(function(){var _39b=_4.dnd.Moveable.prototype.onMove;_4.declare("dojo.dnd.TimedMoveable",_4.dnd.Moveable,{timeout:40,constructor:function(node,_39d){if(!_39d){_39d={};}if(_39d.timeout&&typeof _39d.timeout=="number"&&_39d.timeout>=0){this.timeout=_39d.timeout;}},markupFactory:function(_39e,node){return new _4.dnd.TimedMoveable(node,_39e);},onMoveStop:function(_3a0){if(_3a0._timer){clearTimeout(_3a0._timer);_39b.call(this,_3a0,_3a0._leftTop);}_4.dnd.Moveable.prototype.onMoveStop.apply(this,arguments);},onMove:function(_3a1,_3a2){_3a1._leftTop=_3a2;if(!_3a1._timer){var _t=this;_3a1._timer=setTimeout(function(){_3a1._timer=null;_39b.call(_t,_3a1,_3a1._leftTop);},this.timeout);}}});})();}if(!_4._hasResource["dojo.fx"]){_4._hasResource["dojo.fx"]=true;_4.provide("dojo.fx");_4.provide("dojo.fx.Toggler");(function(){var _3a4={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _3a7=function(_3a8){this._index=-1;this._animations=_3a8||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;_4.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};_4.extend(_3a7,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){_4.disconnect(this._onAnimateCtx);_4.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=_4.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=_4.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_3aa,_3ab){if(!this._current){this._current=this._animations[this._index=0];}if(!_3ab&&this._current.status()=="playing"){return this;}var _3ac=_4.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_3ad=_4.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_3af=_4.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);_4.disconnect(_3ac);_4.disconnect(_3ad);_4.disconnect(_3af);});if(this._onAnimateCtx){_4.disconnect(this._onAnimateCtx);}this._onAnimateCtx=_4.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){_4.disconnect(this._onEndCtx);}this._onEndCtx=_4.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=_4.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);_4.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_3b3,_3b4){this.pause();var _3b5=this.duration*_3b3;this._current=null;_4.some(this._animations,function(a){if(a.duration<=_3b5){this._current=a;return true;}_3b5-=a.duration;return false;});if(this._current){this._current.gotoPercent(_3b5/this._current.duration,_3b4);}return this;},stop:function(_3b7){if(this._current){if(_3b7){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=_4.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);_4.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){_4.disconnect(this._onAnimateCtx);}if(this._onEndCtx){_4.disconnect(this._onEndCtx);}}});_4.extend(_3a7,_3a4);_4.fx.chain=function(_3ba){return new _3a7(_3ba);};var _3bb=function(_3bc){this._animations=_3bc||[];this._connects=[];this._finished=0;this.duration=0;_4.forEach(_3bc,function(a){var _3be=a.duration;if(a.delay){_3be+=a.delay;}if(this.duration<_3be){this.duration=_3be;}this._connects.push(_4.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new _4._Animation({curve:[0,1],duration:this.duration});_4.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop"],function(evt){var self=this;this._connects.push(_4.connect(this._pseudoAnimation,evt,_4.hitch(this,function(){self._fire(evt,arguments);})));},this);};_4.extend(_3bb,{_doAction:function(_3c1,args){_4.forEach(this._animations,function(a){a[_3c1].apply(a,args);});return this;},_onEnd:function(){if(++this._finished==this._animations.length){this._fire("onEnd");}},_call:function(_3c4,args){var t=this._pseudoAnimation;t[_3c4].apply(t,args);},play:function(_3c7,_3c8){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_3c9,_3ca){var ms=this.duration*_3c9;_4.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_3ca);});this._call("gotoPercent",arguments);return this;},stop:function(_3cd){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){_4.forEach(this._connects,_4.disconnect);}});_4.extend(_3bb,_3a4);_4.fx.combine=function(_3ce){return new _3bb(_3ce);};})();_4.declare("dojo.fx.Toggler",null,{constructor:function(args){var _t=this;_4.mixin(_t,args);_t.node=args.node;_t._showArgs=_4.mixin({},args);_t._showArgs.node=_t.node;_t._showArgs.duration=_t.showDuration;_t.showAnim=_t.showFunc(_t._showArgs);_t._hideArgs=_4.mixin({},args);_t._hideArgs.node=_t.node;_t._hideArgs.duration=_t.hideDuration;_t.hideAnim=_t.hideFunc(_t._hideArgs);_4.connect(_t.showAnim,"beforeBegin",_4.hitch(_t.hideAnim,"stop",true));_4.connect(_t.hideAnim,"beforeBegin",_4.hitch(_t.showAnim,"stop",true));},node:null,showFunc:_4.fadeIn,hideFunc:_4.fadeOut,showDuration:200,hideDuration:200,show:function(_3d1){return this.showAnim.play(_3d1||0);},hide:function(_3d2){return this.hideAnim.play(_3d2||0);}});_4.fx.wipeIn=function(args){args.node=_4.byId(args.node);var node=args.node,s=node.style,o;var anim=_4.animateProperty(_4.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _3d8=_4.style(node,"height");return Math.max(_3d8,1);}},end:function(){return node.scrollHeight;}}}},args));_4.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};_4.fx.wipeOut=function(args){var node=args.node=_4.byId(args.node);var s=node.style;var o;var anim=_4.animateProperty(_4.mixin({properties:{height:{end:1}}},args));_4.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});_4.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};_4.fx.slideTo=function(args){var node=(args.node=_4.byId(args.node));var top=null;var left=null;var init=(function(n){return function(){var cs=_4.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=_4.coords(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=_4.animateProperty(_4.mixin({properties:{top:{end:args.top||0},left:{end:args.left||0}}},args));_4.connect(anim,"beforeBegin",anim,init);return anim;};}if(!_4._hasResource["dojo.html"]){_4._hasResource["dojo.html"]=true;_4.provide("dojo.html");(function(){var _3e8=0;_4.html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};_4.html._emptyNode=function(node){while(node.firstChild){_4._destroyElement(node.firstChild);}};_4.html._setNodeContent=function(node,cont,_3ed){if(_3ed){_4.html._emptyNode(node);}if(typeof cont=="string"){var pre="",post="",walk=0,name=node.nodeName.toLowerCase();switch(name){case "tr":pre="<tr>";post="</tr>";walk+=1;case "tbody":case "thead":pre="<tbody>"+pre;post+="</tbody>";walk+=1;case "table":pre="<table>"+pre;post+="</table>";walk+=1;break;}if(walk){var n=node.ownerDocument.createElement("div");n.innerHTML=pre+cont+post;do{n=n.firstChild;}while(--walk);_4.forEach(n.childNodes,function(n){node.appendChild(n.cloneNode(true));});}else{node.innerHTML=cont;}}else{if(cont.nodeType){node.appendChild(cont);}else{_4.forEach(cont,function(n){node.appendChild(n.cloneNode(true));});}}return node;};_4.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,constructor:function(_3f5,node){_4.mixin(this,_3f5||{});node=this.node=_4.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_3e8++].join("_");}if(!(this.node||node)){new Error(this.declaredClass+": no node provided to "+this.id);}},set:function(cont,_3f8){if(undefined!==cont){this.content=cont;}if(_3f8){this._mixin(_3f8);}this.onBegin();this.setContent();this.onEnd();return this.node;},setContent:function(){var node=this.node;if(!node){console.error("setContent given no node");}try{node=_4.html._setNodeContent(node,this.content);}catch(e){var _3fa=this.onContentError(e);try{node.innerHTML=_3fa;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=node;},empty:function(){if(this.parseResults&&this.parseResults.length){_4.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}_4.html._emptyNode(this.node);},onBegin:function(){var cont=this.content;if(_4.isString(cont)){if(this.cleanContent){cont=_4.html._secureForInnerHtml(cont);}if(this.extractContent){var _3fd=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_3fd){cont=_3fd[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.node;delete this.content;},onContentError:function(err){return "Error occured setting content: "+err;},_mixin:function(_3ff){var _400={},key;for(key in _3ff){if(key in _400){continue;}this[key]=_3ff[key];}},_parse:function(){var _402=this.node;try{this.parseResults=_4.parser.parse(_402,true);}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_405){var _406=this["on"+type+"Error"].call(this,err);if(_405){console.error(_405,err);}else{if(_406){_4.html._setNodeContent(this.node,_406,true);}}}});_4.html.set=function(node,cont,_409){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont="";}if(!_409){return _4.html._setNodeContent(node,cont,true);}else{var op=new _4.html._ContentSetter(_4.mixin(_409,{content:cont,node:node}));return op.set();}};})();}if(!_4._hasResource["dijit.layout.ContentPane"]){_4._hasResource["dijit.layout.ContentPane"]=true;_4.provide("dijit.layout.ContentPane");_4.declare("dijit.layout.ContentPane",_5._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",doLayout:true,_isRealContent:true,postMixInProperties:function(){this.inherited(arguments);var _40b=_4.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=_4.string.substitute(this.loadingMessage,_40b);this.errorMessage=_4.string.substitute(this.errorMessage,_40b);},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},postCreate:function(){this.domNode.title="";if(!_5.hasWaiRole(this.domNode)){_5.setWaiRole(this.domNode,"group");}_4.addClass(this.domNode,this.baseClass);},startup:function(){if(this._started){return;}if(this.doLayout!="false"&&this.doLayout!==false){this._checkIfSingleChild();if(this._singleChild){this._singleChild.startup();}}this._loadCheck();this.inherited(arguments);},_checkIfSingleChild:function(){var _40c=_4.query(">",this.containerNode),_40d=_40c.filter(function(node){return _4.hasAttr(node,"dojoType")||_4.hasAttr(node,"widgetId");}),_40f=_4.filter(_40d.map(_5.byNode),function(_410){return _410&&_410.domNode&&_410.resize;});if(_40c.length==_40d.length&&_40f.length==1){this.isContainer=true;this._singleChild=_40f[0];}else{delete this.isContainer;delete this._singleChild;}},refresh:function(){return this._prepareLoad(true);},setHref:function(href){_4.deprecated("dijit.layout.ContentPane.setHref() is deprecated.\tUse attr('href', ...) instead.","","2.0");return this.attr("href",href);},_setHrefAttr:function(href){this.href=href;if(this._created){return this._prepareLoad();}},setContent:function(data){_4.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use attr('content', ...) instead.","","2.0");this.attr("content",data);},_setContentAttr:function(data){this.href="";this.cancel();this._setContent(data||"");this._isDownloaded=false;if(this.doLayout!="false"&&this.doLayout!==false){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){this._singleChild.startup();var cb=this._contentBox||_4.contentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}}},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;},destroyRecursive:function(_416){if(this._beingDestroyed){return;}this._beingDestroyed=true;this.inherited(arguments);},resize:function(size){_4.marginBox(this.domNode,size);var node=this.containerNode,mb=_4.mixin(_4.marginBox(node),size||{});var cb=this._contentBox=_5.layout.marginBox2contentBox(node,mb);if(this._singleChild&&this._singleChild.resize){this._singleChild.resize({w:cb.w,h:cb.h});}},_prepareLoad:function(_41b){this.cancel();this.isLoaded=false;this._loadCheck(_41b);},_isShown:function(){if("open" in this){return this.open;}else{var node=this.domNode;return (node.style.display!="none")&&(node.style.visibility!="hidden");}},_loadCheck:function(_41d){var _41e=this._isShown();if(this.href&&(_41d||(this.preload&&!this.isLoaded&&!this._xhrDfd)||(this.refreshOnShow&&_41e&&!this._xhrDfd)||(!this.isLoaded&&_41e&&!this._xhrDfd))){this._downloadExternalContent();}},_downloadExternalContent:function(){this._setContent(this.onDownloadStart(),true);var self=this;var _420={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(_4.isObject(this.ioArgs)){_4.mixin(_420,this.ioArgs);}var hand=this._xhrDfd=(this.ioMethod||_4.xhrGet)(_420);hand.addCallback(function(html){try{self._isDownloaded=true;self._setContent(html,false);self.onDownloadEnd();}catch(err){self._onError("Content",err);}delete self._xhrDfd;return html;});hand.addErrback(function(err){if(!hand.cancelled){self._onError("Download",err);}delete self._xhrDfd;return err;});},_onLoadHandler:function(data){this.isLoaded=true;try{this.onLoad(data);}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code");}},_onUnloadHandler:function(){this.isLoaded=false;try{this.onUnload();}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code");}},destroyDescendants:function(){if(this._isRealContent){this._onUnloadHandler();}var _425=this._contentSetter;if(_425){_425.empty();}else{this.inherited(arguments);_4.html._emptyNode(this.containerNode);}},_setContent:function(cont,_427){this.destroyDescendants();this._isRealContent=!_427;var _428=this._contentSetter;if(!(_428&&_428 instanceof _4.html._ContentSetter)){_428=this._contentSetter=new _4.html._ContentSetter({node:this.containerNode,_onError:_4.hitch(this,this._onError),onContentError:_4.hitch(this,function(e){var _42a=this.onContentError(e);try{this.containerNode.innerHTML=_42a;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}var _42b=_4.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad},this._contentSetterParams||{});_4.mixin(_428,_42b);_428.set((_4.isObject(cont)&&cont.domNode)?cont.domNode:cont);delete this._contentSetterParams;if(!_427){this._onLoadHandler(cont);}},_onError:function(type,err,_42e){var _42f=this["on"+type+"Error"].call(this,err);if(_42e){console.error(_42e,err);}else{if(_42f){this._setContent(_42f,true);}}},_createSubWidgets:function(){try{_4.parser.parse(this.containerNode,true);}catch(e){this._onError("Content",e,"Couldn't create widgets in "+this.id+(this.href?" from "+this.href:""));}},onLoad:function(data){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(_431){},onDownloadError:function(_432){return this.errorMessage;},onDownloadEnd:function(){}});}if(!_4._hasResource["dijit.form.Form"]){_4._hasResource["dijit.form.Form"]=true;_4.provide("dijit.form.Form");_4.declare("dijit.form._FormMixin",null,{reset:function(){_4.forEach(this.getDescendants(),function(_433){if(_433.reset){_433.reset();}});},validate:function(){var _434=false;return _4.every(_4.map(this.getDescendants(),function(_435){_435._hasBeenBlurred=true;var _436=_435.disabled||!_435.validate||_435.validate();if(!_436&&!_434){_5.scrollIntoView(_435.containerNode||_435.domNode);_435.focus();_434=true;}return _436;}),function(item){return item;});},setValues:function(val){_4.deprecated(this.declaredClass+"::setValues() is deprecated. Use attr('value', val) instead.","","2.0");return this.attr("value",val);},_setValueAttr:function(obj){var map={};_4.forEach(this.getDescendants(),function(_43b){if(!_43b.name){return;}var _43c=map[_43b.name]||(map[_43b.name]=[]);_43c.push(_43b);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _43e=map[name],_43f=_4.getObject(name,false,obj);if(_43f===undefined){continue;}if(!_4.isArray(_43f)){_43f=[_43f];}if(typeof _43e[0].checked=="boolean"){_4.forEach(_43e,function(w,i){w.attr("value",_4.indexOf(_43f,w.value)!=-1);});}else{if(_43e[0]._multiValue){_43e[0].attr("value",_43f);}else{_4.forEach(_43e,function(w,i){w.attr("value",_43f[i]);});}}}},getValues:function(){_4.deprecated(this.declaredClass+"::getValues() is deprecated. Use attr('value') instead.","","2.0");return this.attr("value");},_getValueAttr:function(){var obj={};_4.forEach(this.getDescendants(),function(_445){var name=_445.name;if(!name||_445.disabled){return;}var _447=_445.attr("value");if(typeof _445.checked=="boolean"){if(/Radio/.test(_445.declaredClass)){if(_447!==false){_4.setObject(name,_447,obj);}}else{var ary=_4.getObject(name,false,obj);if(!ary){ary=[];_4.setObject(name,ary,obj);}if(_447!==false){ary.push(_447);}}}else{_4.setObject(name,_447,obj);}});return obj;},isValid:function(){this._invalidWidgets=[];return _4.every(this.getDescendants(),function(_449){var _44a=_449.disabled||!_449.isValid||_449.isValid();if(!_44a){this._invalidWidgets.push(_449);}return _44a;},this);},onValidStateChange:function(_44b){},_widgetChange:function(_44c){var _44d=this._lastValidState;if(!_44c||this._lastValidState===undefined){_44d=this.isValid();if(this._lastValidState===undefined){this._lastValidState=_44d;}}else{if(_44c.isValid){this._invalidWidgets=_4.filter(this._invalidWidgets||[],function(w){return (w!=_44c);},this);if(!_44c.isValid()&&!_44c.attr("disabled")){this._invalidWidgets.push(_44c);}_44d=(this._invalidWidgets.length===0);}}if(_44d!==this._lastValidState){this._lastValidState=_44d;this.onValidStateChange(_44d);}},connectChildren:function(){_4.forEach(this._changeConnections,_4.hitch(this,"disconnect"));var _44f=this;var _450=this._changeConnections=[];_4.forEach(_4.filter(this.getDescendants(),function(item){return item.validate;}),function(_452){_450.push(_44f.connect(_452,"validate",_4.hitch(_44f,"_widgetChange",_452)));_450.push(_44f.connect(_452,"_setDisabledAttr",_4.hitch(_44f,"_widgetChange",_452)));});this._widgetChange(null);},startup:function(){this.inherited(arguments);this._changeConnections=[];this.connectChildren();}});_4.declare("dijit.form.Form",[_5._Widget,_5._Templated,_5.form._FormMixin],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form dojoAttachPoint='containerNode' dojoAttachEvent='onreset:_onReset,onsubmit:_onSubmit' name='${name}'></form>",attributeMap:_4.mixin(_4.clone(_5._Widget.prototype.attributeMap),{action:"",method:"",encType:"","accept-charset":"",accept:"",target:""}),execute:function(_453){},onExecute:function(){},_setEncTypeAttr:function(_454){this.encType=_454;_4.attr(this.domNode,"encType",_454);if(_4.isIE){this.domNode.encoding=_454;}},postCreate:function(){if(_4.isIE&&this.srcNodeRef&&this.srcNodeRef.attributes){var item=this.srcNodeRef.attributes.getNamedItem("encType");if(item&&!item.specified&&(typeof item.value=="string")){this.attr("encType",item.value);}}this.inherited(arguments);},onReset:function(e){return true;},_onReset:function(e){var faux={returnValue:true,preventDefault:function(){this.returnValue=false;},stopPropagation:function(){},currentTarget:e.currentTarget,target:e.target};if(!(this.onReset(faux)===false)&&faux.returnValue){this.reset();}_4.stopEvent(e);return false;},_onSubmit:function(e){var fp=_5.form.Form.prototype;if(this.execute!=fp.execute||this.onExecute!=fp.onExecute){_4.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0");this.onExecute();this.execute(this.getValues());}if(this.onSubmit(e)===false){_4.stopEvent(e);}},onSubmit:function(e){return this.isValid();},submit:function(){if(!(this.onSubmit()===false)){this.containerNode.submit();}}});}if(!_4._hasResource["dijit.Dialog"]){_4._hasResource["dijit.Dialog"]=true;_4.provide("dijit.Dialog");_4.declare("dijit.DialogUnderlay",[_5._Widget,_5._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper' id='${id}_wrapper'><div class='dijitDialogUnderlay ${class}' id='${id}' dojoAttachPoint='node'></div></div>",attributeMap:{},postCreate:function(){_4.body().appendChild(this.domNode);this.bgIframe=new _5.BackgroundIframe(this.domNode);},layout:function(){var _45c=_5.getViewport();var is=this.node.style,os=this.domNode.style;os.top=_45c.t+"px";os.left=_45c.l+"px";is.width=_45c.w+"px";is.height=_45c.h+"px";var _45f=_5.getViewport();if(_45c.w!=_45f.w){is.width=_45f.w+"px";}if(_45c.h!=_45f.h){is.height=_45f.h+"px";}},show:function(){this.domNode.style.display="block";this.layout();if(this.bgIframe.iframe){this.bgIframe.iframe.style.display="block";}},hide:function(){this.domNode.style.display="none";if(this.bgIframe.iframe){this.bgIframe.iframe.style.display="none";}},uninitialize:function(){if(this.bgIframe){this.bgIframe.destroy();}}});_4.declare("dijit._DialogMixin",null,{attributeMap:_5._Widget.prototype.attributeMap,execute:function(_460){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.attr("value"));},_getFocusItems:function(_461){var _462=_5._getTabNavigable(_4.byId(_461));this._firstFocusItem=_462.lowest||_462.first||_461;this._lastFocusItem=_462.last||_462.highest||this._firstFocusItem;if(_4.isMoz&&this._firstFocusItem.tagName.toLowerCase()=="input"&&_4.attr(this._firstFocusItem,"type").toLowerCase()=="file"){_4.attr(_461,"tabindex","0");this._firstFocusItem=_461;}}});_4.declare("dijit.Dialog",[_5.layout.ContentPane,_5._Templated,_5.form._FormMixin,_5._DialogMixin],{templateString:null,templateString:"<div class=\"dijitDialog\" tabindex=\"-1\" waiRole=\"dialog\" waiState=\"labelledby-${id}_title\">\r\n\t<div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar\">\r\n\t<span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"></span>\r\n\t<span dojoAttachPoint=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" dojoAttachEvent=\"onclick: onCancel\" title=\"${buttonCancel}\">\r\n\t\t<span dojoAttachPoint=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\r\n\t</span>\r\n\t</div>\r\n\t\t<div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\r\n</div>\r\n",attributeMap:_4.mixin(_4.clone(_5._Widget.prototype.attributeMap),{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}]}),open:false,duration:_5.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,postMixInProperties:function(){var _463=_4.i18n.getLocalization("dijit","common");_4.mixin(this,_463);this.inherited(arguments);},postCreate:function(){var s=this.domNode.style;s.visibility="hidden";s.position="absolute";s.display="";s.top="-9999px";_4.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();this.inherited(arguments);},_endDrag:function(e){if(e&&e.node&&e.node===this.domNode){var vp=_5.getViewport();var p=e._leftTop||_4.coords(e.node,true);this._relativePosition={t:p.t-vp.t,l:p.l-vp.l};}},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(_4.isIE==6)?new _4.dnd.TimedMoveable(node,{handle:this.titleBar}):new _4.dnd.Moveable(node,{handle:this.titleBar,timeout:0});_4.subscribe("/dnd/move/stop",this,"_endDrag");}else{_4.addClass(node,"dijitDialogFixed");}this._underlay=new _5.DialogUnderlay({id:this.id+"_underlay","class":_4.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" ")});var _46a=this._underlay;this._fadeIn=_4.fadeIn({node:node,duration:this.duration,onBegin:_4.hitch(_46a,"show")});this._fadeOut=_4.fadeOut({node:node,duration:this.duration,onEnd:function(){node.style.visibility="hidden";node.style.top="-9999px";_46a.hide();}});},uninitialize:function(){if(this._fadeIn&&this._fadeIn.status()=="playing"){this._fadeIn.stop();}if(this._fadeOut&&this._fadeOut.status()=="playing"){this._fadeOut.stop();}if(this._underlay){this._underlay.destroy();}if(this._moveable){this._moveable.destroy();}},_size:function(){var mb=_4.marginBox(this.domNode);var _46c=_5.getViewport();if(mb.w>=_46c.w||mb.h>=_46c.h){_4.style(this.containerNode,{width:Math.min(mb.w,Math.floor(_46c.w*0.75))+"px",height:Math.min(mb.h,Math.floor(_46c.h*0.75))+"px",overflow:"auto",position:"relative"});}},_position:function(){if(!_4.hasClass(_4.body(),"dojoMove")){var node=this.domNode;var _46e=_5.getViewport();var p=this._relativePosition;var mb=p?null:_4.marginBox(node);_4.style(node,{left:Math.floor(_46e.l+(p?p.l:(_46e.w-mb.w)/2))+"px",top:Math.floor(_46e.t+(p?p.t:(_46e.h-mb.h)/2))+"px"});}},_onKey:function(evt){if(evt.charOrCode){var dk=_4.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _474=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_474){_5.focus(this._lastFocusItem);}_4.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_474){_5.focus(this._firstFocusItem);}_4.stopEvent(evt);}else{while(node){if(node==this.domNode){if(evt.charOrCode==dk.ESCAPE){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){_4.stopEvent(evt);}else{if(!_4.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOut.status()=="playing"){this._fadeOut.stop();}this._modalconnects.push(_4.connect(window,"onscroll",this,"layout"));this._modalconnects.push(_4.connect(window,"onresize",this,"layout"));this._modalconnects.push(_4.connect(_4.doc.documentElement,"onkeypress",this,"_onKey"));_4.style(this.domNode,{opacity:0,visibility:""});this.open=true;this._loadCheck();this._size();this._position();this._fadeIn.play();this._savedFocus=_5.getFocus(this);if(this.autofocus){this._getFocusItems(this.domNode);setTimeout(_4.hitch(_5,"focus",this._firstFocusItem),50);}},hide:function(){if(!this._alreadyInitialized){return;}if(this._fadeIn.status()=="playing"){this._fadeIn.stop();}this._fadeOut.play();if(this._scrollConnected){this._scrollConnected=false;}_4.forEach(this._modalconnects,_4.disconnect);this._modalconnects=[];if(this.refocus){this.connect(this._fadeOut,"onEnd",_4.hitch(_5,"focus",this._savedFocus));}if(this._relativePosition){delete this._relativePosition;}this.open=false;},layout:function(){if(this.domNode.style.visibility!="hidden"){this._underlay.layout();this._position();}},destroy:function(){_4.forEach(this._modalconnects,_4.disconnect);if(this.refocus&&this.open){setTimeout(_4.hitch(_5,"focus",this._savedFocus),25);}this.inherited(arguments);}});_4.declare("dijit.TooltipDialog",[_5.layout.ContentPane,_5._Templated,_5.form._FormMixin,_5._DialogMixin],{title:"",doLayout:false,autofocus:true,"class":"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:null,templateString:"<div waiRole=\"presentation\">\r\n\t<div class=\"dijitTooltipContainer\" waiRole=\"presentation\">\r\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" dojoAttachPoint=\"containerNode\" tabindex=\"-1\" waiRole=\"dialog\"></div>\r\n\t</div>\r\n\t<div class=\"dijitTooltipConnector\" waiRole=\"presentation\"></div>\r\n</div>\r\n",postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");this.containerNode.title=this.title;},orient:function(node,_476,_477){this.domNode.className=this["class"]+" dijitTooltipAB"+(_477.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(_477.charAt(0)=="T"?"Below":"Above");},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);this._loadCheck();if(this.autofocus){this._getFocusItems(this.containerNode);_5.focus(this._firstFocusItem);}},_onKey:function(evt){var node=evt.target;var dk=_4.keys;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.containerNode);}var _47c=(this._firstFocusItem==this._lastFocusItem);if(evt.charOrCode==dk.ESCAPE){this.onCancel();_4.stopEvent(evt);}else{if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_47c){_5.focus(this._lastFocusItem);}_4.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_47c){_5.focus(this._firstFocusItem);}_4.stopEvent(evt);}else{if(evt.charOrCode===dk.TAB){evt.stopPropagation();}}}}}});}if(!_4._hasResource["tableau.base.widget.Dialog"]){_4._hasResource["tableau.base.widget.Dialog"]=true;_4.provide("tableau.base.widget.Dialog");_4.declare("tableau.base.widget.DialogUnderlay",[_5.DialogUnderlay],{layout:function(){var _47d,is,os,_480;_47d=tabBootstrap.ViewerBootstrap.get_instance().getViewport();is=this.node.style;os=this.domNode.style;os.top=_47d.t+"px";os.left=_47d.l+"px";is.width=_47d.w+"px";is.height=_47d.h+"px";_480=tabBootstrap.ViewerBootstrap.get_instance().getViewport();if(_47d.w!==_480.w){is.width=_480.w+"px";}if(_47d.h!==_480.h){is.height=_480.h+"px";}}});_4.declare("tableau.base.widget.Dialog",[_5.Dialog],{buttons:"None",title:"",onYes:function(){},onNo:function(){},_yesButton:null,_noButton:null,postCreate:function(){var n,_482;this.inherited(arguments);_4.style(this.domNode,"display","none");if(this.buttons==="YesNo"){this._yesButton=new _5.form.Button({label:tab.Strings.DialogYesButtonText,onClick:_4.hitch(this,"_yesButtonClick")});this._noButton=new _5.form.Button({label:tab.Strings.DialogNoButtonText,onClick:_4.hitch(this,"_noButtonClick")});n=this.containerNode;n.appendChild(document.createElement("br"));n.appendChild(this._yesButton.domNode);n.appendChild(this._noButton.domNode);}_482=function(e){e.stopPropagation();};$(this.domNode).bind("touchstart",_482).bind("touchcancel",_482).bind("touchend",_482).bind("touchmove",_482).bind("click",_482).bind("mousedown",_482).bind("mousemove",_482).bind("mouseup",_482);},show:function(){this.inherited(arguments);_4.style(this.domNode,"display","");},hide:function(){this.inherited(arguments);_4.style(this.domNode,"display","none");},_setup:function(){var node,_485;node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(_4.isIE===6)?new _4.dnd.TimedMoveable(node,{handle:this.titleBar}):new _4.dnd.Moveable(node,{handle:this.titleBar,timeout:0});_4.subscribe("/dnd/move/stop",this,"_endDrag");}else{_4.addClass(node,"dijitDialogFixed");}this._underlay=new tableau.base.widget.DialogUnderlay({id:this.id+"_underlay","class":_4.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" ")});_485=this._underlay;this._fadeIn=_4.fadeIn({node:node,duration:this.duration,onBegin:_4.hitch(_485,"show")});this._fadeOut=_4.fadeOut({node:node,duration:this.duration,onEnd:function(){node.style.visibility="hidden";node.style.top="-9999px";_485.hide();}});},uninitialize:function(){if(this._yesButton){this._yesButton.destroyRecursive();}if(this._noButton){this._noButton.destroyRecursive();}this._yesButton=this._noButton=null;this.inherited(arguments);},_position:function(){var node,_488,p,mb,_48b,_48c;if(!_4.hasClass(_4.body(),"dojoMove")){node=this.domNode;_488=tabBootstrap.ViewerBootstrap.get_instance().getViewport();p=this._relativePosition;mb=p?null:_4.marginBox(node);_48b=_488.l?_488.l:0;_48c=_488.t?_488.t:0;_4.style(node,{left:Math.floor(_48b+(p?p.l:(_488.w-mb.w)/2))+"px",top:Math.floor(_48c+(p?p.t:(_488.h-mb.h)/2))+"px"});}},onHide:function(){this.inherited(arguments);setTimeout(function(){this.destroyRecursive();},500);},_yesButtonClick:function(evt){this._buttonClick(true,evt);},_noButtonClick:function(evt){this._buttonClick(false,evt);},_buttonClick:function(_48f,evt){_4.stopEvent(evt);this.hide();if(_48f){if(this.onYes){this.onYes();}}else{if(this.onNo){this.onNo();}}}});}if(!_4._hasResource["tableau.base.util.etc"]){_4._hasResource["tableau.base.util.etc"]=true;_4.provide("tableau.base.util.etc");(function(){var _491=[],_492=false;tableau.util=tableau.util||{};tableau.util.assetUrl=function(res,_494){var _495,_496=tab.Application.get_instance().get_viewerAttributes(),_497=_494?_496.local_static_asset_prefix:_496.external_static_asset_prefix;if(res.charAt(0)==="/"){_495=_497.length-1;if(_497.charAt(_495)==="/"){return _497.substring(0,_495-1)+res;}else{return _497+res;}}else{return _497+"/"+res;}};tableau.util.selectText=function(_498,_499,end){var _49b;if(tab.MiscUtil.isNullOrUndefined(_498)){return;}if(_498.createTextRange){_49b=_498.createTextRange();_49b.collapse(true);_49b.moveStart("character",_499);_49b.moveEnd("character",end-_499);_49b.select();}else{if(_498.setSelectionRange){_498.setSelectionRange(_499,end);}else{if(_498.selectionStart){_498.selectionStart=_499;_498.selectionEnd=end;}}}_498.focus();};tableau.util.isMac=(navigator.appVersion.indexOf("Macintosh")!==-1);if(tableau.util.isMac){_4.addClass(_4.doc.documentElement,"tb_mac");}tableau.util.isElementVisible=function(node){node=_4.byId(node);return _4.style(node,"display")!=="none";};tableau.util.overElement=function(node,e){var _49f,_4a0,top,_4a2,left,_4a4;node=_4.byId(node);_49f={x:e.pageX,y:e.pageY};_4a0=_4.coords(node,true);top=_4a0.y;_4a2=top+_4a0.h;left=_4a0.x;_4a4=left+_4a0.w;return (_49f.x>=left&&_49f.x<=_4a4&&_49f.y>=top&&_49f.y<=_4a2);};tableau.util.printf=function(){var num=arguments.length,oStr=arguments[0],re=new RegExp("%s"),i;for(i=1;i<num;i+=1){oStr=oStr.replace(re,arguments[i]);}console.log(oStr);};tableau.util.disableTextSelection=function(_4a9){if(_4a9.onselectstart!==undefined){_4a9.onselectstart=function(_4aa){_4.stopEvent(_4aa);};}else{if(_4a9.style.MozUserSelect!==undefined){_4a9.style.MozUserSelect="none";}}_4a9.style.cursor="default";};tableau.util.getSelectAction=function(e){var _4ac=tableau.types.SelectAction.Simple,_4ad=tableau.util.isCtrlKey(e);if(e.shiftKey){_4ac=tableau.types.SelectAction.Range;}if(_4ad){_4ac=tableau.types.SelectAction.Toggle;}return _4ac;};tableau.util.isCtrlKey=function(e){return (tableau.util.isMac)?e.metaKey:e.ctrlKey;};tableau.util.resize=function(node,bbox){if(node.resize){node.resize({w:bbox.w,h:bbox.h,t:bbox.y,l:bbox.x});}else{if(node.domNode){node=node.domNode;}_4.marginBox(node,{w:bbox.w,h:bbox.h,t:bbox.y,l:bbox.x});}};tableau.util.findElementByTagName=function(_4b1,_4b2,_4b3){var _4b4,i,_4b6;_4b1=_4b1||_4.body();if(tableau.util.isNodeMatch(_4b1,_4b2,_4b3)){return _4b1;}_4b4=_4b1.getElementsByTagName(_4b2);for(i=0,_4b6=_4b4.length;i<_4b6;i+=1){if(tableau.util.isNodeMatch(_4b4[i],_4b2,_4b3)){return _4b4[i];}}return null;};tableau.util.findDirectParentByClassName=function(_4b7,_4b8,_4b9){var _4ba;if(tab.MiscUtil.isNullOrUndefined(_4b7)||tab.MiscUtil.isNullOrEmpty(_4b8)){return;}_4b9=_4b9||_4.body();_4ba=_4b7.parentNode;while(!tab.MiscUtil.isNullOrUndefined(_4ba)&&_4ba!==_4b9){if(!tab.MiscUtil.isNullOrEmpty(_4ba.className)){if(_4ba.className.toLowerCase()===_4b8.toLowerCase()){return _4ba;}_4ba=_4ba.parentNode;}}return null;};tableau.util.isNodeMatch=function(node,_4bc,_4bd){var attr;if(tab.MiscUtil.isNullOrUndefined(node)||node.tagName.toLowerCase()!==_4bc.toLowerCase()){return false;}if(tab.MiscUtil.isNullOrUndefined(_4bd)){return true;}for(attr in _4bd){if(_4bd.hasOwnProperty(attr)&&node[attr]!==_4bd[attr]){return false;}}return true;};tableau.util.binarySearch=function(_4bf,_4c0,_4c1,_4c2,_4c3){var min,max,mid,_4c7;min=tab.MiscUtil.isValidIndex(_4c1,_4c0)?_4c1:0;max=tab.MiscUtil.isValidIndex(_4c2,_4c0)?_4c2:(_4c0.length-1);if(tab.MiscUtil.isNullOrUndefined(_4c3)){_4c3=tableau.util.defaultComparer;}while(min<=max){mid=Math.floor(min+((max-min)/2));_4c7=_4c3(_4c0[mid],_4bf);if(_4c7===0){return {found:true,index:mid};}else{if(_4c7<0){min=mid+1;}else{max=mid-1;}}}return {found:false,index:min};};tableau.util.defaultComparer=function(_4c8,_4c9){if(_4c8===_4c9){return 0;}else{if(_4c8<_4c9){return -1;}else{return 1;}}};tableau.util.showAlertDialog=function(_4ca,_4cb){var _4cc=new tableau.base.widget.Dialog({content:_4ca,title:_4cb,buttons:"None"});_4cc.show();_4cc.layout();};tableau.util.showConfirmationDialog=function(_4cd,_4ce,_4cf,onNo){var _4d1=new tableau.base.widget.Dialog({content:_4cd,title:_4ce,buttons:"YesNo",onYes:_4cf,onNo:onNo});_4d1.show();_4d1.layout();};tableau.util.NoClickDelay=function(el){this.element=el;if(window.Touch){this.element.addEventListener("touchstart",this,false);}};tableau.util.NoClickDelay.prototype={handleEvent:function(e){switch(e.type){case "touchstart":this.onTouchStart(e);break;case "touchmove":this.onTouchMove(e);break;case "touchend":this.onTouchEnd(e);break;}},onTouchStart:function(e){e.preventDefault();this.moved=false;this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false);},onTouchMove:function(e){this.moved=true;},onTouchEnd:function(e){this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false);if(!this.moved){var _4d7,_4d8;_4d7=document.elementFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY);if(_4d7.nodeType===3){_4d7=_4d7.parentNode;}_4d8=document.createEvent("MouseEvents");_4d8.initEvent("click",true,true);_4d7.dispatchEvent(_4d8);}}};tableau.util.has3d=(window.WebKitCSSMatrix!==undefined&&new window.WebKitCSSMatrix().m11!==undefined);tableau.util.transform=function(node,spec){var str="",_4dc;_4dc={scaleX:1,scaleY:1,translateX:0,translateY:0,time:0};spec=_4.mixin(_4dc,spec||{});if(spec.scale){spec.scaleX=spec.scaleY=spec.scale;}if(tableau.util.has3d){str=["translate3d(",spec.translateX,"px,",spec.translateY,"px, 0px)"].join("");}else{str=["translate(",spec.translateX,"px,",spec.translateY,"px)"].join("");}str+=[" scale(",spec.scaleX,", ",spec.scaleY,")"].join("");if(_4.isIE){if(_4.isIE>=9){node.style.msTransform=str;}else{if(spec.scaleX===1&&spec.scaleY===1){_4.marginBox(node,{t:spec.translateY,l:spec.translateX});}}return;}node.style.webkitTransitionProperty="-webkit-transform";node.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.25, 1)";node.style.webkitTransitionDuration=spec.time+"ms";node.style.webkitTransform=str;node.style.MozTransitionProperty="-moz-transform";node.style.MozTransitionTimingFunction="cubic-bezier(0, 0, 0.25, 1)";node.style.MozTransitionDuration=spec.time+"ms";node.style.MozTransform=str;};tableau.util.defer=function(_4dd){if(_492===false){_491.push(_4dd);}else{_4dd();}};tableau.util.performDeferredCalls=function(){var i,ln;ln=_491.length;for(i=0;i<ln;i++){window.setTimeout(_491[i],i);}_491=[];_492=true;};tableau.util.localizeDojoLabeledControls=function(_4e0){var i,len,_4e3,_4e4,_4e5=_4e0;for(i=0,len=_4e5.length;i<len;i++){_4e3=_4e5[i][0];_4e4=_4e5[i][1];if(_4e3){_4e3.attr("label",tab.Strings[_4e4]);}}};tableau.util.parseUri=function(uri){var a=document.createElement("a"),_4e8;if(!uri){return undefined;}a.href=uri;_4e8={href:uri,host:a.host,hostname:a.hostname,pathname:a.pathname,port:a.port,protocol:a.protocol,search:a.search};return _4e8;};}());}if(!_4._hasResource["tableau.base.util.all"]){_4._hasResource["tableau.base.util.all"]=true;_4.provide("tableau.base.util.all");}if(!_4._hasResource["tableau.base.widget.LegendPanel"]){_4._hasResource["tableau.base.widget.LegendPanel"]=true;_4.provide("tableau.base.widget.LegendPanel");_4.declare("tableau.base.widget.LegendPanel",[_5._Widget,_5._Contained,_5._Templated],{isContainer:true,widgetsInTemplate:true,session:null,imgSize:null,rid:0,timestamp:0,format:{},eventHandler:null,categorical:null,visually_cat:null,inline:null,vertical_layout:null,highlight_on:null,column_width:1,lTitle:"",scroll_cnt:0,bodyOffset:{x:0,y:0},field_name:"",field_name_id:"",manualYDisplayOffset:0,manualXDisplayOffset:0,_subscriptions:[],makeViewerInputHandler:null,makeTooltip:null,allowHover:function(){},disallowHover:function(){},constructor:function(){this._subscriptions=[];},postCreate:function(){var ev=tab.EventMap,_4ea;this.timestamp=new Date().getTime();_4.attr(this.domTitleBar,"title",this.lTitle);this._localize();_4ea={linkSession:this.layoutSession,region:this.region,field_name:this.field_name,defaultSelectCursor:false,domHighlighter:this.domHighlighter,allowRegionSelect:false};if(!tsConfig.allow_highlight){_4ea.mode=tableau.types.MouseMode.Silent;}this.eventHandler=this.makeViewerInputHandler(this.session,this.domContent,_4ea);this._subscriptions.push(this.session.registerEventListener(ev.refreshLegacyLegendImages,this,"refreshImages"));this._subscriptions.push(this.session.registerEventListener(ev.refreshVisualModel,this,"refreshImages"));this._subscriptions.push(this.session.registerEventListener(ev.selectionChanged,this,"onSelectionChanged"));this.updateHighlightStatus();this.hideControls();this.doConnections();this.tooltipRID=0;this._tooltip=this.makeTooltip(this.domNode,this.layoutSession);this._ubertip=new tab.Ubertip(this._tooltip);this._ubertip.add_commandExecuted(ss.Delegate.create(this,this.onCommandExecuted));},cancelHover:function(){},doConnections:function(){this.connect(this.domNode,"onmouseover","onMouseOver");this.connect(this.domNode,"onmouseout","onMouseOut");},destroy:function(_4eb){_4.forEach(this._subscriptions,_4.unsubscribe);if(this.eventHandler){this.eventHandler.destroy();delete this.eventHandler;}this._tooltip.dispose();this._ubertip.remove_commandExecuted(ss.Delegate.create(this,this.onCommandExecuted));this._ubertip.dispose();this.inherited(arguments);},resize:function(_4ec){_4.marginBox(this.domNode,_4ec);this.layout();},onMouseOver:function(){if(!tsConfig.allow_highlight){return;}if(this.categorical==="true"){if(this.highlight_enabled===true){_4.style(this.domHighlighter.domNode,"visibility","");}_4.addClass(this.domNode,"tvmodeSelect");}},onMouseOut:function(e){var c=_4.coords(this.domNode,true);if(c.x>e.pageX||(c.x+c.w)<=e.pageX||c.y>e.pageY||(c.y+c.h)<=e.pageY){this.hideControls();}},onCommandExecuted:function(_4ef,args){this._tooltip.close();tab.UberTipClientCommands.executeUbertipCommand(args.command);},hideControls:function(){var data={over:false,node:this.domNode};_4.style(this.domHighlighter.domNode,"visibility","hidden");_4.removeClass(this.domNode,"tvmodeSelect");this.session.fireEvent(tab.EventMap.hoverChanged,data);},updateHighlightStatus:function(){if(this.highlight_on){_4.addClass(this.domNode,"LegendHighlightOn");}else{_4.removeClass(this.domNode,"LegendHighlightOn");}},refreshImages:function(_4f2){var _4f3;this.rid+=1;this.bodySize=null;_4f3=this.rid+"Z"+this.timestamp;if(this.lTitle.length===0){_4.style(this.domTitleImage,"display","none");_4.marginBox(this.domTitleBar,{h:0});}else{if(this.domTitleImage.src===""){this.domTitleImage.src=this.session.formatLegendRegionTileURL(_4f2,this.region+"-title",this.field_name,this.field_name_id,_4f3);}}this.domImageBody.src=this.session.formatLegendRegionTileURL(_4f2,this.region+"-body",this.field_name,this.field_name_id,_4f3);this.disallowHover();_4.addClass(this.domBox,"LegendBusy");},onSelectionChanged:function(_4f4){if(!_4f4){return;}this.allowHover();},getDocumentPoint:function(_4f5){return {x:_4f5.pageX,y:_4f5.pageY};},documentPointToContentPoint:function(_4f6){var _4f7=_4.coords(this.domContent,true);return {x:_4f6.x-_4f7.x+this.domContent.scrollLeft+this.bodyOffset.x,y:_4f6.y-_4f7.y+this.domContent.scrollTop+this.bodyOffset.y};},onHover:function(_4f8){var _4f9,_4fa=this.getDocumentPoint(_4f8),_4fb=this.documentPointToContentPoint(_4fa),_4fc,_4fd={x:_4fb.x,y:_4fb.y,h:0,w:0};if(this.region!=="map"){_4f9=_4.hitch(this,_4.partial(this.showTooltip,_4fa));_4fc=new tab.LocalUbertipInfo(null,null,null,true);tab.UberTipClientCommands.getUberTip(this.region,this.sheetid,_4fd,_4fc,_4f9);}},setHighlight:function(e){this.highlight_on=e;this.updateHighlightStatus();},toggleHighlight:function(){this.highlight_on=!this.highlight_on;this.updateHighlightStatus();this.session.toggleHighlight(this.region,this.field_name);},doscrollHoriz:function(){this.domContent.scrollLeft=this.domHorizScroll.scrollLeft*this.scrollFactor;},setTitleSize:function(){var _4ff=_4.marginBox(this.domTitleImage);_4.marginBox(this.domTitleBar,{w:_4ff.w,h:_4ff.h});this.layout();},setBodySize:function(){this.allowHover();_4.removeClass(this.domBox,"LegendBusy");this.bodySize={w:this.domImageBody.offsetWidth,h:this.domImageBody.offsetHeight};this.layout();},layout:function(){var _500,_501,_502,_503,_504,_505,_506,_507;if(!this.bodySize){return;}_4.removeClass(this.domNode,"LegendHorizontal");_4.removeClass(this.domNode,"LegendInlineTitle");_4.style(this.domHighlighter.domNode,"right","");this.manualXDisplayOffset=0;this.manualYDisplayOffset=0;_505=_4.marginBox(this.domTitleImage);_506=_4.contentBox(this.domNode);_502={w:_506.w,h:_506.h};this.bodyOffset={x:0,y:0};if(this.lTitle.length!==0){if(this.inline){_502.w=_506.w-_505.w;_4.addClass(this.domNode,"LegendInlineTitle");this.manualXDisplayOffset=_505.w;this.bodyOffset.x=_505.w;}else{_502.h=_506.h-_505.h;_4.removeClass(this.domNode,"LegendInlineTitle");this.manualYDisplayOffset=_505.h;this.bodyOffset.y=_505.h;}}if(_4.isSafari||this.visually_cat!=="true"){_4.style(this.domContent,"overflow","hidden");}if(!this.vertical_layout&&_502.h<tableau.metrics.getMinScrollHeight()&&_502.h>1){_4.addClass(this.domNode,"LegendHorizontal");_500=this.bodySize.w;if(_500>_502.w){_504={w:tableau.metrics.getScrollW()*2,h:tableau.metrics.getScrollH()};_4.marginBox(this.domHorizScroll,_504);_502.w-=_504.w;if(this.visually_cat==="true"&&(this.inline||(this.lTitle.length===0&&_505.w===0&&_505.h===0))){_502.w-=18;_4.style(this.domHighlighter.domNode,"right",(_504.w+4)+"px");}_507=tableau.metrics.getScrollInterval();_501=_500;this.scrollFactor=1;if(_507!==1&&this.column_width){this.scrollFactor=this.column_width/_507;_503=Math.ceil((_500-this.domHorizScroll.offsetLeft)/this.column_width);_501=tableau.metrics.getMinScrollWidth()+_503*_507;}_4.style(this.domHorizScrollContent,"width",_501+"px");if(this.inline){_4.style(this.domHorizScroll,"top","0px");}else{_4.style(this.domHorizScroll,"top",_505.h+"px");}}else{_4.style(this.domHorizScrollContent,"width","0px");}}_4.marginBox(this.domContent,{w:_502.w,h:_502.h});if(_4.isSafari&&this.visually_cat==="true"){_4.style(this.domContent,"overflow","");}},hideTooltip:function(){if(this.tooltipIsOpen){this._tooltip.close();delete this.tooltipIsOpen;}},showTooltip:function(_508,_509){if(!_509){return;}if(this._tooltip.get_isShown()&&_509.tupleId&&this._tooltip._tupleId===_509.tupleId){return;}this.tooltipIsOpen=true;this._ubertip.set_model(_509);if(_509.tooltipOffset){if(_509.tooltipOffset.x){this._tooltip.set_horizontalOffset(_509.tooltipOffset.x);}if(_509.tooltipOffset.y){this._tooltip.set_verticalOffset(_509.tooltipOffset.y);}}else{this._tooltip.set_horizontalOffset(tab.Tooltip.defaultHorizonalOffset);this._tooltip.set_verticalOffset(tab.Tooltip.defaultVerticalOffset);}this._tooltip.show(this._ubertip.get_element(),_508);this._tooltip._tupleId=_509.tupleId;},_localize:function(){var s=tab.Strings;if(this.domHighlighter){this.domHighlighter.attr("title",s.LegendPanelHighlightSelectedItems);}}});}if(!_4._hasResource["tableau.web.widget.LegendPanelWeb"]){_4._hasResource["tableau.web.widget.LegendPanelWeb"]=true;_4.provide("tableau.web.widget.LegendPanelWeb");_4.declare("tableau.web.widget.LegendPanelWeb",[tableau.base.widget.LegendPanel],{templateString:"<div class=\"LegendPanel\"\r\n    ><div class=\"LegendBox\" dojoAttachPoint=\"domBox\"\r\n        ><div class=\"LegendTitle\" dojoAttachPoint=\"domTitleBar\"\r\n            ><img dojoAttachPoint=\"domTitleImage\" dojoAttachEvent=\"onload:setTitleSize\"/></div\r\n        ><div class=\"LegendContent\" dojoAttachPoint=\"domContent\"\r\n            ><img dojoAttachPoint=\"domImageBody\" dojoAttachEvent=\"onload:setBodySize\"/></div\r\n        ><div class=\"LegendHorizScroll\" dojoAttachPoint=\"domHorizScroll\" dojoAttachEvent=\"onscroll:doscrollHoriz\"\r\n            ><div dojoAttachPoint=\"domHorizScrollContent\"></div\r\n        ></div\r\n    ></div\r\n    ><div dojoType=\"dijit.form.Button\" class=\"LegendHighlighter\" showlabel=\"false\"\r\n         dojoAttachPoint=\"domHighlighter\" dojoAttachEvent=\"onClick:toggleHighlight\"\r\n         title=\"Highlight Selected Items\" iconClass=\"lpIconHighlighter\"></div\r\n></div>\r\n",makeViewerInputHandler:function(_50b,_50c,_50d){var spec={"tap":_4.hitch(this,this.onTap),"hover":_4.hitch(this,this.onHover)};return new tab.MouseHandler(_50c,spec);},makeTooltip:function(node,_510){return tab.TooltipBehavior.createTooltip();},onTap:function(_511){var _512,_513,_514,that=this,_516,_517,_518,rid;if(_511.button>1){return;}this.disallowHover();_512=this.getDocumentPoint(_511);_513=this.documentPointToContentPoint(_512);_514=tableau.util.getSelectAction(_511);if(this.region!=="map"){tab.SelectionClientCommands.selectRegion(this.region,_513,_514,null,this.sheetid);}this.tooltipRID+=1;rid=this.tooltipRID;setTimeout(function(){_517=_4.hitch(that,function(){if(that.tooltipRID===rid){var arr=[_512];this.showTooltip.apply(this,arr.concat(Array.prototype.slice.call(arguments,0)));}});_518={x:_513.x,y:_513.y,h:0,w:0};_516=new tab.LocalUbertipInfo(null,null,null,true);tab.UberTipClientCommands.getUberTip(that.region,that.sheetid,_518,_516,_517);},15);},allowHover:function(){this.eventHandler.unsuppressHover();},disallowHover:function(){this.eventHandler.suppressHover();}});}if(!_4._hasResource["tableau.base.FilterItem"]){_4._hasResource["tableau.base.FilterItem"]=true;_4.provide("tableau.base.FilterItem");tableau.FilterItem={ALL:tab.Strings.QuickFilterAll,checkboxArray:["<div class=\"","","\" id=\"","","\"><div class=\"facet\">","","</div><div class=\"facetOverflow\"><input type=\"checkbox\" class=\"FICheckRadio\" name=\"","","\" ","","><a title=\"","","\">","","</a></div></div>"],radioArray:["<div class=\"","","\" id=\"","","\"><div class=\"facet\">","","</div><div class=\"facetOverflow\"><input type=\"radio\" class=\"FICheckRadio\" name=\"","","\" ","","><a title=\"","","\">","","</a></div></div>"],selectArray:["<option value=\"","","\" ","",">","","</option>"],typeInListArray:["<div tabindex=\"0\" class=\"FIItem FITypeInItem FIChecked\" id=\"","","\" title=\"","","\">","","</div>"],getSearchResultHTML:function(mode,arr,id,name,_51f,_520,_521,_522,_523){switch(mode){case "checklist":case "checkdropdown":case "typeinlist":return this.getCheckboxHTML(arr,id,_51f,_520,_521,_522,_523);case "radiolist":return this.getRadioHTML(arr,id,name,_51f,_520,_521,_522,_523);case "dropdown":return this.getSelectHTML(arr,id,_51f,_520,_521);}return "";},getSelectHTML:function(arr,id,_526,_527,_528){arr[1]=tableau.format.escapeHTML(id);arr[3]=(_527&&!_528)?"SELECTED":"";arr[5]=tableau.format.escapeHTML(_526);return arr.join("");},getCheckboxHTML:function(arr,id,_52b,_52c,_52d,_52e,_52f){arr[1]="FIItem";arr[3]=arr[7]=tableau.format.escapeHTML(id);arr[9]="";arr[11]=arr[13]=tableau.format.escapeHTML(_52b);arr[5]=_52f?_52e:"";if(_52d||_52c){arr[1]+=" FIChecked";arr[9]+=" checked=\"checked\" ";}return arr.join("");},getRadioHTML:function(arr,id,name,_533,_534,_535,_536,_537){arr[1]="FIItem";arr[3]=tableau.format.escapeHTML(id);arr[7]=tableau.format.escapeHTML(name);arr[9]="";arr[11]=arr[13]=tableau.format.escapeHTML(_533);arr[5]=_537?_536:"";if(_535||_534){arr[1]+=" FIChecked";arr[9]+=" checked=\"checked\" ";}return arr.join("");},getTypeInListHTML:function(arr,id,_53a){arr[1]=tableau.format.escapeHTML(id);arr[3]=arr[5]=tableau.format.escapeHTML(_53a);return arr.join("");},getCssNode:function(node){if(tab.MiscUtil.isNullOrUndefined(node)){return null;}if(!_4.hasClass(node,"FIItem")){node=_4.query(".FIItem",node.parentNode);}return node;},setChecked:function(node,_53d,_53e){var _53f,_540=this.getCssNode(node);if(_540){if(_53d){_4.addClass(_540,"FIChecked");}else{_4.removeClass(_540,"FIChecked");}}_53f=this._getCheckboxOrRadio(node);if(_53f){_53f.checked=(_53d===true);}if(_53e){_53e.s=(_53d===true);}return _53e;},isChecked:function(node){var _542=this.getCssNode(node);return _4.hasClass(_542,"FIChecked");},syncCssToCheckState:function(node){var _544=this._getCheckboxOrRadio(node);if(_544){this.setChecked(node,_544.checked);}},setSelected:function(node,_546){var _547=this.getCssNode(node);if(_546){_4.addClass(_547,"FISelected");}else{_4.removeClass(_547,"FISelected");}},isSelected:function(node){var _549=this.getCssNode(node);return _4.hasClass(_549,"FISelected");},isTiled:function(node){var _54b=node.parentNode;if(_54b){return _4.hasClass(_54b,"tile");}return false;},getNodeFromEvent:function(evt){if(!evt||!evt.target){return null;}var node=evt.target;while(node&&node.tagName!=="OPTION"&&!_4.hasClass(node,"FIItem")){node=node.parentNode;}return node;},getIndex:function(node){var _54f=node.id.split("_"),_550=parseInt(_54f[_54f.length-1],10);if(isNaN(_550)){return -1;}return _550;},isTypeInListItem:function(node){var _552=this.getCssNode(node);return _4.hasClass(_552,"FITypeInItem");},isAllItem:function(node){if(tab.MiscUtil.isNullOrUndefined(node)||this.isTypeInListItem(node)){return false;}return this.hasAll(node.id);},hasAll:function(_554){var _555=_554.split("_"),val=_555[_555.length-1];return val===this.ALL;},_getCheckboxOrRadio:function(node){var _558=tableau.util.findElementByTagName(node,"input",{"type":"checkbox"});if(_558){return _558;}return tableau.util.findElementByTagName(node,"input",{"type":"radio"});}};}if(!_4._hasResource["tableau.base.widget.ParameterControl"]){_4._hasResource["tableau.base.widget.ParameterControl"]=true;_4.provide("tableau.base.widget.ParameterControl");_4.declare("tableau.base.widget.paramui.Base",[_5._Contained],{constructor:function(_559,div,_55b,_55c){this.connections=[];this.parent=_559;this.div=div;this.field=_55b;this.attributes=_55c;this.model=_55c.model;this._newValInFlight=null;},instantiate:function(){throw tab.Strings.noLoc("not implemented","this should never be shown to the user");},setNewState:function(){throw tab.Strings.noLoc("not implemented","this should never be shown to the user");},refreshState:function(_55d){this.attributes=_55d;this.model=_55d.model;this.setNewState();},destroy:function(){_4.forEach(this.connections,_4.disconnect);this.connections=[];this.div.innerHTML="";},layout:function(_55e){_4.marginBox(this.div,_55e);},formatTuple:function(_55f){return tableau.format.formatTupleDisplayName(_55f,true,null);}});_4.declare("tableau.base.widget.paramui.TypeIn",[tableau.base.widget.paramui.Base],{instantiate:function(){this.widget=new tableau.base.widget.ui.TypeIn(this.div,_4.hitch(this,this.doChange),"TypeIn");this.widget.instantiate(this.model.alias,this.field,this.model.value);if(this.model.is_list_domain){this.widget.initializeAutocomplete(this.model.domain,_4.hitch(this.parent.session,"getAutocompleteInfo"));}},setNewState:function(){this.widget.setNewState(this.model.alias,this.model.domain,this.model.value);},destroy:function(){if(this.widget&&this.widget.destroy){this.widget.destroy();}this.inherited(arguments);},layout:function(){this.inherited(arguments);this.widget.layout();},doChange:function(_560){if(this._newValInFlight===_560){return;}this._newValInFlight=_560;tab.ParameterServerCommands.setParameterValue(this.field,_560,ss.Delegate.create(this,this.successCallback),ss.Delegate.create(this,this.errorCallback));},errorCallback:function(){this.widget.queryBox.value=this.model.alias;this._newValInFlight=null;this.setNewState();},successCallback:function(){this._newValInFlight=null;_.defer(_.bind(function(){this.setNewState();},this));},updateCallback:function(data){if(data.success===true){if(data.newval){this.widget.queryBox.value=data.newval;this.model.alias=data.newval;this.widget.pattern=data.newval;if(data.newdatavalue){this.model.value=data.newdatavalue;this.widget.dataValue=data.newdatavalue;}}}else{this.widget.queryBox.value=this.model.alias;}}});_4.declare("tableau.base.widget.paramui.Compact",[tableau.base.widget.paramui.Base],{instantiate:function(){var _562,i,_564=[],len,_566,_567;_564.push("<select id=\"pc_c_"+this.field+"\" class=\"Dropdown\">");_562=this.model.domain;for(i=0,len=_562.length;i<len;i++){_566=(this.model.alias===_562[i])?"SELECTED ":"";_564.push("<option "+_566+"value=\""+i+"\">"+tableau.format.escapeHTML(_562[i])+"</option>");}_564.push("</select>");this.div.innerHTML=_564.join("");_567=this.div.firstChild;this.connections.push(_4.connect(_567,"onchange",this,"onSelection"));},setNewState:function(){this.instantiate();},onSelection:function(e){var _569,_56a=this.model.domain,_56b=parseInt(e.target.value,10);if(_56b>=_56a.length||_56b<0||!_56a||_56a.length<1){return;}_569=_56a[_56b];tab.ParameterServerCommands.setParameterValue(this.field,_569);},layout:function(){this.inherited(arguments);var divw=_4.marginBox(this.div).w;if(divw>4){_4.style(this.div.firstChild,"width",(divw-4)+"px");}}});_4.declare("tableau.base.widget.paramui.List",[tableau.base.widget.paramui.Base],{instantiate:function(_56d){var _56e=this.model.domain,_56f=tableau.FilterItem.radioArray,_570=this.model.alias,i,len,id,_574=[],_575=this.field,_576=tableau.FilterItem.getRadioHTML;for(i=0,len=_56e.length;i<len;i++){id=[_575,"_",i].join("");_574.push(_576(_56f,id,_575,_56e[i],_570===_56e[i],false));}this.div.innerHTML=_574.join("");if(_56d!==true){this.connections.push(_4.connect(this.div,"onclick",this,"onSelection"));}},setNewState:function(){this.instantiate(true);},onSelection:function(e){var _578,_579=e.target.tagName.toLowerCase(),_57a;if(_579!=="input"){return;}_57a=tableau.FilterItem.getIndex(e.target.parentNode.parentNode);_578=this.model.domain[_57a];tab.ParameterServerCommands.setParameterValue(this.field,_578);}});_4.declare("tableau.base.widget.paramui.Slider",[tableau.base.widget.paramui.Base],{instantiate:function(){var _57b=this.model,d=this.model.domain,_57d=this.model.alias,_57e,_57f,_580,_581,that=this,_583=1,_584=1;this.slider=new tableau.base.widget.ui.Slider(this.div,this.attributes,false,_4.hitch(this,this.doUpdateViz),_4.hitch(this.parent,this.parent.getTitleOffset),_4.hitch(this,this.getCurrentText),null);if(_57b.fake_continuous){this.attributes["show-step-btns"]="false";this.attributes["show-ticks"]="false";}_57e=function(){that.slider.instantiateFromDomain(d,_57d);};_57f=function(){_583=Infinity;_584=that.percentageOfRange(_57b.value.v)*100;that.attributes["show-step-btns"]="false";that.slider.instantiate(_583,_584,_57d);};_580=function(){_583=that.numPeriods();_584=that.indexInDateRange(_57b.value.v);_57d=that.formatValue(_57b.value.v);that.slider.instantiate(_583,_584,_57d);};_581=function(){_583=that.sizeOfDiscreteRange();_584=that.indexInRange(_57b.value.v);that.slider.instantiate(_583,_584,_57d);};this.behaviorPicker(_57e,_57f,_580,_581);},behaviorPicker:function(list,_586,_587,_588){if(this.domainIsList()){return list();}else{if(this.domainIsRange()){if(this.rangeIsContinuous()){return _586();}else{if(this.rangeHasDates()){return _587();}else{return _588();}}}}},setNewState:function(){var _589=this.model,d=this.model.domain,_58b=this.model.alias,_58c,_58d,_58e,_58f,that=this,_591;_58c=function(){var i,len;for(i=0,len=d.length;i<len;i++){if(d[i]===_58b){return [_58b,i];}}};_58d=function(){return [_58b,that.percentageOfRange(_589.value.v)*100];};_58e=function(){return [that.formatValue(_589.value.v),that.indexInDateRange(_589.value.v)];};_58f=function(){return [_58b,that.indexInRange(_589.value.v)];};_591=this.behaviorPicker(_58c,_58d,_58e,_58f);this.slider.setNewState(_591[1]);this.slider.updateReadout(_591[0]);},refreshSliderMarksForIE:function(){this.slider.refreshSliderMarksForIE();},doUpdateViz:function(_594){var _595,_596,_597,_598,that=this,_59a,_59b;_595=function(){return [that.model.domain[_594],null];};_596=function(){return [null,that.makeDataValue(that.valueFromPercent(_594))];};_597=function(){return [null,that.makeDataValue(that.valueFromDateIndex(_594))];};_598=function(){return [null,that.makeDataValue(that.valueFromIndex(_594))];};_59a=this.behaviorPicker(_595,_596,_597,_598);if(_59a[0]){_59b=_59a[0];}else{if(_59a[1]){_59b=tableau.format.formatDataValue(_59a[1]);}}tab.ParameterServerCommands.setParameterValue(this.field,_59b);},updateCallback:function(data){if(data.success===true){if(data.newval){this.slider.updateReadout(this.formatValue(data.newval));}}},destroy:function(){if(this.slider&&this.slider.destroy){this.slider.destroy();}this.inherited(arguments);},layout:function(){this.inherited(arguments);if(this.slider&&this.slider.layout){this.slider.layout();}},getCurrentText:function(_59d){var _59e,_59f,_5a0,_5a1,that=this;_59e=function(){return that.model.domain[_59d];};_59f=function(){return that.formatValue(that.valueFromPercent(_59d));};_5a0=function(){return that.formatValue(that.valueFromDateIndex(_59d));};_5a1=function(){return that.formatValue(that.valueFromIndex(_59d));};return this.behaviorPicker(_59e,_59f,_5a0,_5a1);},domainIsList:function(){return this.model.domain!==undefined;},domainIsRange:function(){var m=this.model;return (m.granularity&&m.min&&m.max);},rangeIsContinuous:function(){return this.model.granularity.s===tableau.types.DataSpecial.DS_NULL;},rangeHasDates:function(){return this.model.date_period_type!==undefined;},rangeMin:function(){return this.model.min.v;},rangeMax:function(){return this.model.max.v;},granularity:function(){return this.model.granularity.v;},periodType:function(){return this.model.date_period_type;},numPeriods:function(){var _5a4=this.model.num_periods/this.granularity();if(Math.ceil(_5a4)>Math.floor(_5a4)){_5a4=_5a4+1;}return Math.floor(_5a4)+1;},sizeOfRange:function(){return this.rangeMax()-this.rangeMin();},percentageOfRange:function(val){return (val-this.rangeMin())/this.sizeOfRange();},valueFromPercent:function(val){return (val/100*this.sizeOfRange())+this.rangeMin();},sizeOfDiscreteRange:function(){return Math.floor(this.sizeOfRange()/this.granularity())+1;},indexInRange:function(val){return Math.floor((val-this.rangeMin())/this.granularity());},valueFromIndex:function(val){return (val*this.granularity())+this.rangeMin();},indexInDateRange:function(val){return Math.floor(((val-this.rangeMin())/this.sizeOfPeriodInDays()/this.granularity())+0.01);},valueFromDateIndex:function(val){val=val*this.granularity();if(val>this.model.num_periods){val=this.model.num_periods;}var _5ab=tab.DateUtil.adjustDateByPeriodInUTC,d=_5ab(new Date(tableau.types.JsDateFromOleDate(this.rangeMin())),this.periodType(),val);return tableau.types.OleDateFromJsDate(d.getTime());},sizeOfPeriodInDays:function(val){switch(this.model.date_period_type){case "year":return 365;case "quarter":return 365/4;case "month":return 30;case "week":return 7;case "day":return 1;case "hour":return 1/24;case "minute":return 1/(24*60);case "second":return 1/(24*60*60);}},formatValue:function(val){var _5af=this.model.date_format||this.model.format;return tableau.format.formatDataValue(this.makeDataValue(val),null,_5af,null,true);},makeDataValue:function(val){var dv=_4.mixin({},this.model.min);dv.v=val;return dv;}});_4.declare("tableau.base.widget.ParameterControl",[_5._Widget,_5._Templated],{templateString:"<div class=\"ParameterControl\"\r\n    ><div class=\"ParameterControlBox\" dojoAttachPoint=\"domBox\"\r\n        ><div class=\"TitleAndControls\" dojoAttachPoint=\"domControls\"\r\n            ><div class=\"ParamTitle\" dojoAttachPoint=\"domTitleBar\"\r\n               ><img dojoAttachPoint=\"domTitleImage\"/></div\r\n        ></div\r\n        ><div class=\"PCContent\" dojoAttachPoint=\"domContent\"></div\r\n    ></div\r\n></div>\r\n",widgetsInTemplate:true,session:null,field:"",attributes:{},format:{},stateId:0,rid:0,ui:null,domBox:null,domControls:null,domTitleBar:null,domTitleImage:null,domContent:null,postCreate:function(){this.getSID=_4.hitch(this,function(){return this.stateId;});this.timestamp=new Date().getTime();this._connections=[];this._subscriptions=[];this._connections.push(_4.connect(this.domNode,"onmouseover",this,"onMouseOver"));this.initFromState(false);var zone=tab.ApplicationModel.get_instance().findZone(this.zid);_4.style(this.domNode,"backgroundColor",zone.get_dashboardModel().get_backgroundColor());},destroy:function(_5b3){_4.forEach(this._connections,_4.disconnect);_4.forEach(this._subscriptions,_4.unsubscribe);if(this.ui&&this.ui.destroy()){this.ui.destroy();}this.domContent.innerHTML="";this.inherited(arguments);},getTypeInParamClass:function(){return tableau.base.widget.paramui.TypeIn;},getCompactParamClass:function(){return tableau.base.widget.paramui.Compact;},getListParamClass:function(){return tableau.base.widget.paramui.List;},getSliderParamClass:function(){return tableau.base.widget.paramui.Slider;},initFromState:function(){var tF=tableau.format,_5b5=null;_4.attr(this.domTitleBar,"title",this.attributes.model.title);switch(this.mode()){case "type_in":_5b5=this.getTypeInParamClass();break;case "compact":_5b5=this.getCompactParamClass();break;case "list":_5b5=this.getListParamClass();break;case "slider":_5b5=this.getSliderParamClass();break;case "datetime":_5b5=this.getTypeInParamClass();break;}if(_5b5===null){return;}if(this.ui&&this.ui.destroy){this.ui.destroy();this.ui=null;}this.ui=new _5b5(this,this.domContent,this.field,this.attributes);this.ui.instantiate();this.fetchTitleImage();},fetchTitleImage:function(){++this.rid;this.domTitleImage.src=this.session.formatZoneURL("image/png",this.zid)+"&"+this.rid+"Z"+this.timestamp;},updateTitleSize:function(newH,newW){if((this.titleH&&this.titleH!==newH)||(this.titleW&&this.titleW!==newW)){this.fetchTitleImage();}},refreshState:function(_5b8){if(_.isEqual(_5b8,this.attributes)){return;}this.attributes=_5b8;this.ui.refreshState(this.attributes);},mode:function(){return this.attributes.mode;},hideEmptyTitlebar:function(){return false;},onMouseOver:function(){if(!tsConfig.allow_highlight){return;}var data={over:true,node:this.domNode};this.session.fireEvent(tab.EventMap.hoverChanged,data);},getTitleOffset:function(){return (_4.hasClass(this.domNode,"PCInlineTitle"))?0:this.domTitleBar.offsetHeight;},layout:function(){var _5ba,_5bb,_5bc;if(!this.domNode.parentNode){return;}_4.removeClass(this.domNode,"PCInlineTitle");_5bb=_4.marginBox(this.domTitleImage);if(this.titleH>0){_5bb.h=this.titleH;_4.marginBox(this.domTitleBar,{h:_5bb.h});}if(this.titleW>0){_5bb.w=this.titleW;_4.marginBox(this.domTitleBar,{w:_5bb.w});}_5bc=_4.contentBox(this.domNode);_5ba={w:_5bc.w,h:_5bc.h};if(!this.hideEmptyTitlebar()){if(this.titleW>0){_5ba.w=_5bc.w-_5bb.w;_4.style(this.domTitleBar,"float","left");_4.style(this.domContent,"float","left");_4.addClass(this.domNode,"PCInlineTitle");}else{_5ba.h=_5bc.h-_5bb.h;_4.style(this.domTitleBar,"float","none");_4.style(this.domContent,"float","none");}}this.ui.layout({w:_5ba.w,h:_5ba.h});}});}if(!_4._hasResource["dijit.layout.LayoutContainer"]){_4._hasResource["dijit.layout.LayoutContainer"]=true;_4.provide("dijit.layout.LayoutContainer");_4.declare("dijit.layout.LayoutContainer",_5.layout._LayoutWidget,{baseClass:"dijitLayoutContainer",constructor:function(){_4.deprecated("dijit.layout.LayoutContainer is deprecated","use BorderContainer instead",2);},layout:function(){_5.layout.layoutChildren(this.domNode,this._contentBox,this.getChildren());},addChild:function(_5bd,_5be){this.inherited(arguments);if(this._started){_5.layout.layoutChildren(this.domNode,this._contentBox,this.getChildren());}},removeChild:function(_5bf){this.inherited(arguments);if(this._started){_5.layout.layoutChildren(this.domNode,this._contentBox,this.getChildren());}}});_4.extend(_5._Widget,{layoutAlign:"none"});}if(!_4._hasResource["dijit.Menu"]){_4._hasResource["dijit.Menu"]=true;_4.provide("dijit.Menu");_4.declare("dijit.Menu",[_5._Widget,_5._Templated,_5._KeyNavContainer],{constructor:function(){this._bindings=[];},templateString:"<table class=\"dijit dijitMenu dijitReset dijitMenuTable\" waiRole=\"menu\" dojoAttachEvent=\"onkeypress:_onKeyPress\">"+"<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>"+"</table>",targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,parentMenu:null,popupDelay:500,_contextMenuWithMouse:false,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(_4.body());}else{_4.forEach(this.targetNodeIds,this.bindDomNode,this);}this.connectKeyNavHandlers([_4.keys.UP_ARROW],[_4.keys.DOWN_ARROW]);},startup:function(){if(this._started){return;}_4.forEach(this.getChildren(),function(_5c0){_5c0.startup();});this.startupKeyNavChildren();this.inherited(arguments);},onExecute:function(){},onCancel:function(_5c1){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(evt);}},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case _4.keys.RIGHT_ARROW:this._moveToPopup(evt);_4.stopEvent(evt);break;case _4.keys.LEFT_ARROW:if(this.parentMenu){this.onCancel(false);}else{_4.stopEvent(evt);}break;}},onItemHover:function(item){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(_4.hitch(this,"_openPopup"),this.popupDelay);}},_onChildBlur:function(item){_5.popup.close(item.popup);item._blur();this._stopPopupTimer();},onItemUnhover:function(item){},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null;}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(item.disabled){return false;}if(item.popup){if(!this.is_open){this._openPopup();}}else{this.onExecute();item.onClick(evt);}},_iframeContentWindow:function(_5ca){var win=_5.getDocumentWindow(_5.Menu._iframeContentDocument(_5ca))||_5.Menu._iframeContentDocument(_5ca)["__parent__"]||(_5ca.name&&_4.doc.frames[_5ca.name])||null;return win;},_iframeContentDocument:function(_5cc){var doc=_5cc.contentDocument||(_5cc.contentWindow&&_5cc.contentWindow.document)||(_5cc.name&&_4.doc.frames[_5cc.name]&&_4.doc.frames[_5cc.name].document)||null;return doc;},bindDomNode:function(node){node=_4.byId(node);var win=_5.getDocumentWindow(node.ownerDocument);if(node.tagName.toLowerCase()=="iframe"){win=this._iframeContentWindow(node);node=_4.withGlobal(win,_4.body);}var cn=(node==_4.body()?_4.doc:node);node[this.id]=this._bindings.push([_4.connect(cn,(this.leftClickToOpen)?"onclick":"oncontextmenu",this,"_openMyself"),_4.connect(cn,"onkeydown",this,"_contextKey"),_4.connect(cn,"onmousedown",this,"_contextMouse")]);},unBindDomNode:function(_5d1){var node=_4.byId(_5d1);if(node){var bid=node[this.id]-1,b=this._bindings[bid];_4.forEach(b,_4.disconnect);delete this._bindings[bid];}},_contextKey:function(e){this._contextMenuWithMouse=false;if(e.keyCode==_4.keys.F10){_4.stopEvent(e);if(e.shiftKey&&e.type=="keydown"){var _e={target:e.target,pageX:e.pageX,pageY:e.pageY};_e.preventDefault=_e.stopPropagation=function(){};window.setTimeout(_4.hitch(this,function(){this._openMyself(_e);}),1);}}},_contextMouse:function(e){this._contextMenuWithMouse=true;},_openMyself:function(e){if(this.leftClickToOpen&&e.button>0){return;}_4.stopEvent(e);var x,y;if(_4.isSafari||this._contextMenuWithMouse){x=e.pageX;y=e.pageY;}else{var _5db=_4.coords(e.target,true);x=_5db.x+10;y=_5db.y+10;}var self=this;var _5dd=_5.getFocus(this);function closeAndRestoreFocus(){_5.focus(_5dd);_5.popup.close(self);};_5.popup.open({popup:this,x:x,y:y,onExecute:closeAndRestoreFocus,onCancel:closeAndRestoreFocus,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);_5.popup.close(this);};},onOpen:function(e){this.isShowingNow=true;},onClose:function(){this._stopPopupTimer();this.parentMenu=null;this.isShowingNow=false;this.currentPopup=null;if(this.focusedChild){this._onChildBlur(this.focusedChild);this.focusedChild=null;}},_openPopup:function(){this._stopPopupTimer();var _5df=this.focusedChild;var _5e0=_5df.popup;if(_5e0.isShowingNow){return;}_5e0.parentMenu=this;var self=this;_5.popup.open({parent:this,popup:_5e0,around:_5df.domNode,orient:this.isLeftToRight()?{"TR":"TL","TL":"TR"}:{"TL":"TR","TR":"TL"},onCancel:function(){_5.popup.close(_5e0);_5df.focus();self.currentPopup=null;}});this.currentPopup=_5e0;if(_5e0.focus){_5e0.focus();}},uninitialize:function(){_4.forEach(this.targetNodeIds,this.unBindDomNode,this);this.inherited(arguments);}});_4.declare("dijit.MenuItem",[_5._Widget,_5._Templated,_5._Contained],{templateString:"<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitem\" tabIndex=\"-1\""+"dojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">"+"<td class=\"dijitReset\" waiRole=\"presentation\"><div class=\"dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\"></div></td>"+"<td class=\"dijitReset dijitMenuItemLabel\" dojoAttachPoint=\"containerNode\"></td>"+"<td class=\"dijitReset dijitMenuArrowCell\" waiRole=\"presentation\">"+"<div dojoAttachPoint=\"arrowWrapper\" style=\"display: none\">"+"<div class=\"dijitMenuExpand\"></div>"+"<span class=\"dijitMenuExpandA11y\">+</span>"+"</div>"+"</td>"+"</tr>",attributeMap:_4.mixin(_4.clone(_5._Widget.prototype.attributeMap),{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),label:"",iconClass:"",disabled:false,_fillContent:function(_5e2){if(_5e2&&!("label" in this.params)){this.attr("label",_5e2.innerHTML);}},postCreate:function(){_4.setSelectable(this.domNode,false);_4.attr(this.containerNode,"id",this.id+"_text");_5.setWaiState(this.domNode,"labelledby",this.id+"_text");},_isFullyVisibleInside:function(item,_5e4){if(item&&_5e4){var _5e5=item.offsetTop;var _5e6=item.offsetTop+item.clientHeight;var _5e7=_5e4.scrollTop;var _5e8=_5e4.scrollTop+_5e4.clientHeight;if((_5e5>=_5e7)&&(_5e5<_5e8)&&(_5e6>_5e7)&&(_5e6<=_5e8)){return true;}}return false;},_isReasonableEvent:function(e){if(_4.isSafari){var _5ea=this.domNode.offsetParent;while(_5ea&&!_4.hasClass(_5ea,"dijitPopup")&&(_5ea.scrollHeight===_5ea.offsetHeight)){_5ea=_5ea.offsetParent;}if(_5ea&&!this._isFullyVisibleInside(this.domNode,_5ea)){return false;}}return true;},_onHover:function(e){if(!this._isReasonableEvent(e)){return;}this.getParent().onItemHover(this);},_onUnhover:function(){this.getParent().onItemUnhover(this);},_onClick:function(evt){if(!this._isReasonableEvent(evt)){return;}this.getParent().onItemClick(this,evt);_4.stopEvent(evt);},onClick:function(evt){},focus:function(){_4.addClass(this.domNode,"dijitMenuItemHover");try{_5.focus(this.focusNode);}catch(e){}},_blur:function(){_4.removeClass(this.domNode,"dijitMenuItemHover");},setLabel:function(_5ee){_4.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use attr('label', ...) instead.","","2.0");this.attr("label",_5ee);},setDisabled:function(_5ef){_4.deprecated("dijit.Menu.setDisabled() is deprecated.  Use attr('disabled', bool) instead.","","2.0");this.attr("disabled",_5ef);},_setDisabledAttr:function(_5f0){this.disabled=_5f0;_4[_5f0?"addClass":"removeClass"](this.domNode,"dijitMenuItemDisabled");_5.setWaiState(this.focusNode,"disabled",_5f0?"true":"false");}});_4.declare("dijit.PopupMenuItem",_5.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var _5f1=_4.query("*",this.srcNodeRef);_5.PopupMenuItem.superclass._fillContent.call(this,_5f1[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=_4.query("[widgetId]",this.dropDownContainer)[0];this.popup=_5.byNode(node);}_4.body().appendChild(this.popup.domNode);this.popup.domNode.style.display="none";_4.style(this.arrowWrapper,"display","");_5.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){this.popup.destroyRecursive();delete this.popup;}this.inherited(arguments);}});_4.declare("dijit.MenuSeparator",[_5._Widget,_5._Templated,_5._Contained],{templateString:"<tr class=\"dijitMenuSeparator\"><td colspan=3>"+"<div class=\"dijitMenuSeparatorTop\"></div>"+"<div class=\"dijitMenuSeparatorBottom\"></div>"+"</td></tr>",postCreate:function(){_4.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});_4.declare("dijit.CheckedMenuItem",_5.MenuItem,{templateString:"<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitemcheckbox\" tabIndex=\"-1\""+"dojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">"+"<td class=\"dijitReset\" waiRole=\"presentation\"><div class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" dojoAttachPoint=\"iconNode\">"+"<div class=\"dijitCheckedMenuItemIconChar\">&#10003;</div>"+"</div></td>"+"<td class=\"dijitReset dijitMenuItemLabel\" dojoAttachPoint=\"containerNode,labelNode\"></td>"+"<td class=\"dijitReset dijitMenuArrowCell\" waiRole=\"presentation\">"+"<div dojoAttachPoint=\"arrowWrapper\" style=\"display: none\">"+"<div class=\"dijitMenuExpand\"></div>"+"<span class=\"dijitMenuExpandA11y\">+</span>"+"</div>"+"</td>"+"</tr>",checked:false,_setCheckedAttr:function(_5f3){_4.toggleClass(this.iconNode,"dijitCheckedMenuItemIconChecked",_5f3);_5.setWaiState(this.domNode,"checked",_5f3);this.checked=_5f3;},onChange:function(_5f4){},_onClick:function(e){if(!this.disabled){this.attr("checked",!this.checked);this.onChange(this.checked);}this.inherited(arguments);}});}if(!_4._hasResource["dijit.layout.StackContainer"]){_4._hasResource["dijit.layout.StackContainer"]=true;_4.provide("dijit.layout.StackContainer");_4.declare("dijit.layout.StackContainer",_5.layout._LayoutWidget,{doLayout:true,baseClass:"dijitStackContainer",_started:false,postCreate:function(){this.inherited(arguments);_5.setWaiRole(this.containerNode,"tabpanel");this.connect(this.domNode,"onkeypress",this._onKeyPress);},startup:function(){if(this._started){return;}var _5f6=this.getChildren();_4.forEach(_5f6,this._setupChild,this);_4.some(_5f6,function(_5f7){if(_5f7.selected){this.selectedChildWidget=_5f7;}return _5f7.selected;},this);var _5f8=this.selectedChildWidget;if(!_5f8&&_5f6[0]){_5f8=this.selectedChildWidget=_5f6[0];_5f8.selected=true;}if(_5f8){this._showChild(_5f8);}_4.publish(this.id+"-startup",[{children:_5f6,selected:_5f8}]);this.inherited(arguments);},_setupChild:function(_5f9){this.inherited(arguments);_5f9.domNode.style.display="none";_5f9.domNode.style.position="relative";_5f9.domNode.title="";return _5f9;},addChild:function(_5fa,_5fb){this.inherited(arguments);if(this._started){_4.publish(this.id+"-addChild",[_5fa,_5fb]);this.layout();if(!this.selectedChildWidget){this.selectChild(_5fa);}}},removeChild:function(page){this.inherited(arguments);if(this._beingDestroyed){return;}if(this._started){_4.publish(this.id+"-removeChild",[page]);this.layout();}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _5fd=this.getChildren();if(_5fd.length){this.selectChild(_5fd[0]);}}}},selectChild:function(page){page=_5.byId(page);if(this.selectedChildWidget!=page){this._transition(page,this.selectedChildWidget);this.selectedChildWidget=page;_4.publish(this.id+"-selectChild",[page]);}},_transition:function(_5ff,_600){if(_600){this._hideChild(_600);}this._showChild(_5ff);if(this.doLayout&&_5ff.resize){_5ff.resize(this._containerContentBox||this._contentBox);}},_adjacent:function(_601){var _602=this.getChildren();var _603=_4.indexOf(_602,this.selectedChildWidget);_603+=_601?1:_602.length-1;return _602[_603%_602.length];},forward:function(){this.selectChild(this._adjacent(true));},back:function(){this.selectChild(this._adjacent(false));},_onKeyPress:function(e){_4.publish(this.id+"-containerKeyPress",[{e:e,page:this}]);},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._contentBox);}},_showChild:function(page){var _606=this.getChildren();page.isFirstChild=(page==_606[0]);page.isLastChild=(page==_606[_606.length-1]);page.selected=true;page.domNode.style.display="";if(page._loadCheck){page._loadCheck();}if(page.onShow){page.onShow();}},_hideChild:function(page){page.selected=false;page.domNode.style.display="none";if(page.onHide){page.onHide();}},closeChild:function(page){var _609=page.onClose(this,page);if(_609){this.removeChild(page);page.destroyRecursive();}},destroy:function(){this._beingDestroyed=true;this.inherited(arguments);}});_4.declare("dijit.layout.StackController",[_5._Widget,_5._Templated,_5._Container],{templateString:"<span wairole='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",postCreate:function(){_5.setWaiRole(this.domNode,"tablist");this.pane2button={};this.pane2handles={};this.pane2menu={};this._subscriptions=[_4.subscribe(this.containerId+"-startup",this,"onStartup"),_4.subscribe(this.containerId+"-addChild",this,"onAddChild"),_4.subscribe(this.containerId+"-removeChild",this,"onRemoveChild"),_4.subscribe(this.containerId+"-selectChild",this,"onSelectChild"),_4.subscribe(this.containerId+"-containerKeyPress",this,"onContainerKeyPress")];},onStartup:function(info){_4.forEach(info.children,this.onAddChild,this);this.onSelectChild(info.selected);},destroy:function(){for(var pane in this.pane2button){this.onRemoveChild(pane);}_4.forEach(this._subscriptions,_4.unsubscribe);this.inherited(arguments);},onAddChild:function(page,_60d){var _60e=_4.doc.createElement("span");this.domNode.appendChild(_60e);var cls=_4.getObject(this.buttonWidget);var _610=new cls({label:page.title,closeButton:page.closable},_60e);this.addChild(_610,_60d);this.pane2button[page]=_610;page.controlButton=_610;var _611=[];_611.push(_4.connect(_610,"onClick",_4.hitch(this,"onButtonClick",page)));if(page.closable){_611.push(_4.connect(_610,"onClickCloseButton",_4.hitch(this,"onCloseButtonClick",page)));var _612=_4.i18n.getLocalization("dijit","common");var _613=new _5.Menu({targetNodeIds:[_610.id],id:_610.id+"_Menu"});var _614=new _5.MenuItem({label:_612.itemClose});_611.push(_4.connect(_614,"onClick",_4.hitch(this,"onCloseButtonClick",page)));_613.addChild(_614);this.pane2menu[page]=_613;}this.pane2handles[page]=_611;if(!this._currentChild){_610.focusNode.setAttribute("tabIndex","0");this._currentChild=page;}if(!this.isLeftToRight()&&_4.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList();}},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}_4.forEach(this.pane2handles[page],_4.disconnect);delete this.pane2handles[page];var menu=this.pane2menu[page];if(menu){menu.destroyRecursive();delete this.pane2menu[page];}var _617=this.pane2button[page];if(_617){_617.destroy();delete this.pane2button[page];}},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _619=this.pane2button[this._currentChild];_619.attr("checked",false);_619.focusNode.setAttribute("tabIndex","-1");}var _61a=this.pane2button[page];_61a.attr("checked",true);this._currentChild=page;_61a.focusNode.setAttribute("tabIndex","0");var _61b=_5.byId(this.containerId);_5.setWaiState(_61b.containerNode,"labelledby",_61a.id);},onButtonClick:function(page){var _61d=_5.byId(this.containerId);_61d.selectChild(page);},onCloseButtonClick:function(page){var _61f=_5.byId(this.containerId);_61f.closeChild(page);var b=this.pane2button[this._currentChild];if(b){_5.focus(b.focusNode||b.domNode);}},adjacent:function(_621){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_621=!_621;}var _622=this.getChildren();var _623=_4.indexOf(_622,this.pane2button[this._currentChild]);var _624=_621?1:_622.length-1;return _622[(_623+_624)%_622.length];},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _626=null;if(e.ctrlKey||!e._djpage){var k=_4.keys;switch(e.charOrCode){case k.LEFT_ARROW:case k.UP_ARROW:if(!e._djpage){_626=false;}break;case k.PAGE_UP:if(e.ctrlKey){_626=false;}break;case k.RIGHT_ARROW:case k.DOWN_ARROW:if(!e._djpage){_626=true;}break;case k.PAGE_DOWN:if(e.ctrlKey){_626=true;}break;case k.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}_4.stopEvent(e);break;default:if(e.ctrlKey){if(e.charOrCode===k.TAB){this.adjacent(!e.shiftKey).onClick();_4.stopEvent(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}_4.stopEvent(e);}}}}if(_626!==null){this.adjacent(_626).onClick();_4.stopEvent(e);}}},onContainerKeyPress:function(info){info.e._djpage=info.page;this.onkeypress(info.e);}});_4.declare("dijit.layout._StackButton",_5.form.ToggleButton,{tabIndex:"-1",postCreate:function(evt){_5.setWaiRole((this.focusNode||this.domNode),"tab");this.inherited(arguments);},onClick:function(evt){_5.focus(this.focusNode);},onClickCloseButton:function(evt){evt.stopPropagation();}});_4.extend(_5._Widget,{title:"",selected:false,closable:false,onClose:function(){return true;}});}if(!_4._hasResource["dijit.layout.TabContainer"]){_4._hasResource["dijit.layout.TabContainer"]=true;_4.provide("dijit.layout.TabContainer");_4.declare("dijit.layout.TabContainer",[_5.layout.StackContainer,_5._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,templateString:null,templateString:"<div class=\"dijitTabContainer\">\r\n\t<div dojoAttachPoint=\"tablistNode\"></div>\r\n\t<div dojoAttachPoint=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\r\n\t<div class=\"dijitTabPaneWrapper ${baseClass}-container\" dojoAttachPoint=\"containerNode\"></div>\r\n</div>\r\n",_controllerWidget:"dijit.layout.TabController",postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.inherited(arguments);},postCreate:function(){this.inherited(arguments);var _62c=_4.getObject(this._controllerWidget);this.tablist=new _62c({id:this.id+"_tablist",tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout")},this.tablistNode);if(this.tabStrip){_4.addClass(this.tablist.domNode,this.baseClass+"Strip");}},_setupChild:function(tab){_4.addClass(tab.domNode,"dijitTabPane");this.inherited(arguments);return tab;},startup:function(){if(this._started){return;}this.tablist.startup();this.inherited(arguments);},layout:function(){if(!this.doLayout){return;}var _62e=this.tabPosition.replace(/-h/,"");var _62f=[{domNode:this.tablist.domNode,layoutAlign:_62e},{domNode:this.tablistSpacer,layoutAlign:_62e},{domNode:this.containerNode,layoutAlign:"client"}];_5.layout.layoutChildren(this.domNode,this._contentBox,_62f);this._containerContentBox=_5.layout.marginBox2contentBox(this.containerNode,_62f[2]);if(this.selectedChildWidget){this._showChild(this.selectedChildWidget);if(this.doLayout&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._containerContentBox);}}},destroy:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);}});_4.declare("dijit.layout.TabController",_5.layout.StackController,{templateString:"<div wairole='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",doLayout:true,buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return;}if(!this.pane2button){return;}var _630=0;for(var pane in this.pane2button){var ow=this.pane2button[pane].innerDiv.scrollWidth;_630=Math.max(_630,ow);}for(pane in this.pane2button){this.pane2button[pane].innerDiv.style.width=_630+"px";}}});_4.declare("dijit.layout._TabButton",_5.layout._StackButton,{baseClass:"dijitTab",templateString:"<div waiRole=\"presentation\" dojoAttachEvent='onclick:onClick,onmouseenter:_onMouse,onmouseleave:_onMouse'>\r\n    <div waiRole=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\r\n        <div waiRole=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent'>\r\n\t        <span dojoAttachPoint='containerNode,focusNode' class='tabLabel'>${!label}</span><img class =\"dijitTabButtonSpacer\" src=\"${_blankGif}\" />\r\n\t        <div class=\"dijitInline closeNode\" dojoAttachPoint='closeNode' dojoAttachEvent='onclick:onClickCloseButton'>\r\n\t        \t<img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint='closeButtonNode' class='closeImage' dojoAttachEvent='onmouseenter:_onMouse, onmouseleave:_onMouse' stateModifier='CloseButton' waiRole=\"presentation\"/>\r\n\t            <span dojoAttachPoint='closeText' class='closeText'>x</span>\r\n\t        </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n",_scroll:false,postCreate:function(){if(this.closeButton){_4.addClass(this.innerDiv,"dijitClosable");var _633=_4.i18n.getLocalization("dijit","common");if(this.closeNode){_4.attr(this.closeNode,"title",_633.itemClose);_4.attr(this.closeButtonNode,"title",_633.itemClose);}}else{this.closeNode.style.display="none";}this.inherited(arguments);_4.setSelectable(this.containerNode,false);}});}if(!_4._hasResource["tableau.base.widget.ui.iMenuItem"]){_4._hasResource["tableau.base.widget.ui.iMenuItem"]=true;_4.provide("tableau.base.widget.ui.iMenuItem");_4.declare("tableau.base.widget.ui.onClickOverride",null,{DELAY:75,_applyTimer:null,_isMobile:tsConfig.is_mobile,postCreate:function(){this.inherited(arguments);if(this._isMobile){var temp=new tableau.util.NoClickDelay(this.domNode);}},_blurItem:function(){this.getParent().focusChild(this);},_setApplyTimer:function(func){if(this._applyTimer){clearTimeout(this._applyTimer);delete this._applyTimer;}this._applyTimer=setTimeout(func,this.DELAY);},_onClick:function(evt){if(this._isMobile){if(!this._isReasonableEvent(evt)){return;}var func=function(){this.getParent().onItemClick(this,evt);_4.stopEvent(evt);};this._blurItem();this._setApplyTimer(_4.hitch(this,func));}else{this.inherited(arguments);}},_onHover:function(evt){if(this._isMobile){this._onClick(evt);}else{this.inherited(arguments);}}});_4.declare("tableau.base.widget.ui.iMenuItem",[_5.MenuItem,tableau.base.widget.ui.onClickOverride],{});_4.declare("tableau.base.widget.ui.iCheckedMenuItem",[_5.CheckedMenuItem,tableau.base.widget.ui.onClickOverride],{});}if(!_4._hasResource["tableau.base.widget.TabbedNavigation"]){_4._hasResource["tableau.base.widget.TabbedNavigation"]=true;_4.provide("tableau.base.widget.TabbedNavigation");_4.declare("tableau.base.widget.TabbedNavigation",[_5.layout._LayoutWidget,_5._Templated],{baseClass:"tableauTabbedNavigation",templateString:"<div style=\"width:${innerWidth};\" class=\"tabbedNavigationOuterWrapper\">\r\n  <div id=\"container\" dojoType=\"dijit.layout.LayoutContainer\" style=\"width:100%; height:100%;\" dojoAttachPoint=\"_innerWrapper\">\r\n    <button dojoType=\"dijit.form.Button\" class=\"tabsMenuBtn\" layoutAlign=\"left\" id=\"menuBtn\" dojoAttachPoint=\"_menuBtn\" style=\"display:none;\"></button>\r\n    <button dojoType=\"dijit.form.Button\" class=\"tabsLeftBtn\" layoutAlign=\"left\" dojoAttachPoint=\"_leftBtn\" style=\"display:none;\"></button>\r\n    <button dojoType=\"dijit.form.Button\" class=\"tabsRightBtn\" layoutAlign=\"right\" dojoAttachPoint=\"_rightBtn\" style=\"display:none;\"></button>\r\n    <div dojoType=\"dijit.layout.LayoutContainer\" layoutAlign=\"client\" dojoAttachPoint=\"_containerNode\">\r\n      <div class=\"dijitTabContainerTop-tabs\" dojoAttachPoint=\"_scrollNode\"></div>\r\n    </div>\r\n  </div>\r\n  <div dojoType=\"tableau.base.MaxHeightMenu\" dojoAttachPoint=\"_tabsMenu\" style=\"display: none;\" class=\"tabbedNavigationMenu\" targetNodeIds=\"menuBtn\" leftClickToOpen=\"true\" refocus=\"false\"></div>\r\n</div>\r\n",widgetsInTemplate:true,innerWidth:"100%",currentTabIndex:0,constructor:function(_639,_63a){this.tabs=[];this._dijitTabs=[];this._subscriptions=[];this.tabs=tsConfig.visible_sheets||this.tabs;this.currentTabIndex=this._indexOf(this.tabs,tsConfig.current_sheet_name)||this.currentTabIndex;this.innerWidth=_639.innerWidth||this.innerWidth;},startup:function(){_4.query("button",this._leftBtn.domNode).addClass("tnLeftButton");_4.query("button",this._rightBtn.domNode).addClass("tnRightButton");_4.query("button",this._menuBtn.domNode).addClass("tnMenuButton");this.containerNode=this.domNode;this.inherited(arguments);},destroy:function(){_4.forEach(this._subscriptions,_4.unsubscribe);},layout:function(){if(this.tabs.length===0){return false;}var _63b=_4.contentBox(this._containerNode.domNode),_63c=this._shouldShowBtns(_63b.w);this._buttons.style("display",_63c?"":"none");this._innerWrapper.layout();_4.style(this._containerNode.domNode,"top","-1px");if(!_63c){this._containerNode.domNode.scrollLeft=0;}this._onMenuItemSelected(this._currentTab);this._setupScrollBtns();return true;},redimMenu:function(data){this._tabsMenu.domNode.style.maxHeight=Math.floor(data.h*0.7)+"px";},postCreate:function(){var i,aTab;this._subscriptions.push(_4.subscribe(tab.EventMap.refreshLayoutModel,this,"_onRefreshLayoutModel"));this._subscriptions.push(_4.subscribe(tab.EventMap.onBootstrapSuccess,this,"_onBootStrapSuccess"));this._subscriptions.push(_4.subscribe(tab.EventMap.onTabSelect,this,"_onSelectTab"));this._subscriptions.push(_4.subscribe(tab.EventMap.newLayoutId,this,"_onSelectTab"));this.inherited(arguments);this._attachHandlers();for(i=0;i<this.tabs.length;i++){aTab=this.tabs[i];this.addTab(aTab,i,tsConfig.repository_urls[i]);}this._buttons=_4.query(".dijitButton",this.domNode);this.layout();},chooseTabByName:function(str){if(!str){return;}var _641=this._findTabForName(str);if(_641){this.chooseTab(_641);}},chooseTab:function(_642){if(!_642){return;}this._changeTab(_642);},addTab:function(_643,_644,repo){var _646=_4.doc.createElement("span"),_647,_648,_649;this._scrollNode.appendChild(_646);_647=this.baseClass+"_tab_"+_644;_648=new _5.layout._TabButton({id:_647,label:tableau.format.escapeHTML(_643),value:_643,showLabel:true,repository_url:repo,onClick:_4.hitch(this,function(){var _64a=_5.byId(_647);this.chooseTab(_64a);})},_646);this._dijitTabs.push(_648);_649=new tableau.base.NoFocusMenuItem({label:_648.label,onClick:_4.hitch(this,function(){var _64b=_5.byId(_647);this.chooseTab(_64b);})});this._tabsMenu.addChild(_649);},_onSelectTab:function(data){var _64d=this._findTabForName(data.sheetName);this._onMenuItemSelected(_64d);},_findTabForName:function(str){var i;for(i=0;i<this._dijitTabs.length;i++){if(this._dijitTabs[i].value===str){return this._dijitTabs[i];}}return null;},_getTabsWidth:function(){var tabs=_4.query(".dijitTab",this._scrollNode),_651,_652;if(tabs.length){_651=tabs[0];_652=tabs[tabs.length-1];return _652.offsetLeft+_4.style(_652,"width")-_651.offsetLeft;}else{return 0;}},_shouldShowBtns:function(_653){var _654=this._getTabsWidth();return _654>0&&_653<_654;},_indexOf:function(arr,obj){var i;for(i=0;i<arr.length;i++){if(arr[i]===obj){return i;}}return -1;},_getScrollBounds:function(){var tabs=_4.query(".dijitTab",this._scrollNode),_659=Math.floor(this._containerNode.domNode.offsetWidth),_65a=this._getTabsWidth();if(tabs.length&&_65a>_659){return {min:0,max:(tabs[tabs.length-1].offsetLeft+_4.style(tabs[tabs.length-1],"width"))+2-_659};}else{return {min:0,max:0};}},getCurrentSheetInfo:function(){return {sheetName:this._currentTab.value,repositoryUrl:this._currentTab.repository_url};},_changeTab:function(aTab){if(this._currentTab.value!==aTab.value){_4.publish(tab.EventMap.onTabSelect,[{sheetName:aTab.value,repositoryUrl:aTab.repository_url,oldRepositoryUrl:this._currentTab.repository_url}]);}},_onRefreshLayoutModel:function(data){this.redimMenu(data);},_onBootStrapSuccess:function(data){this.currentTabIndex=this._indexOf(this.tabs,data);this._onMenuItemSelected(this._currentTab);},_onMenuItemSelected:function(_65e){if(this._currentTab){this._currentTab.attr("checked",false);}else{_65e=this._currentTab=this._dijitTabs[this.currentTabIndex];}if(_65e===undefined||_65e===null){return;}_65e.attr("checked",true);this._currentTab=_65e;this._scrollToTab(_65e);},_scrollToTab:function(tab){var node=tab.domNode,sl=this._getScroll();if(sl>node.offsetLeft||sl+_4.style(this._containerNode.domNode,"width")<node.offsetLeft+_4.style(node,"width")){this._createSmoothScroll(tab).play();}},_getScrollForSelectedTab:function(tab){var w=this._containerNode.domNode,n=tab.domNode,_665=_4.style(this._containerNode.domNode,"width"),_666=this._getScrollBounds(),pos;pos=(n.offsetLeft+_4.style(n,"width")/2)-_665/2;pos=Math.min(Math.max(pos,_666.min),_666.max);return pos;},_attachHandlers:function(){this.connect(this._rightBtn,"onClick",_4.hitch(this,"_onScroll",this._rightBtn));this.connect(this._leftBtn,"onClick",_4.hitch(this,"_onScroll",this._leftBtn));this.connect(this._tabsMenu,"onFocus",_4.hitch(this,"_repositionMenu"));this.connect(window,"onresize",_4.hitch(this,"_repositionMenu"));},_repositionMenu:function(){var _668,_669,_66a,_66b;_668=this._tabsMenu.domNode;if(_668.style.display!=="none"){_669=_668.parentNode;_66a=this._menuBtn.domNode;_66b=jQuery(_66a).offset();_669.style.top=(_66b.top+_66a.offsetHeight)+"px";_669.style.left=_66b.left+"px";}},_onScroll:function(_66c){if(_66c.dojoAttachPoint==="_leftBtn"){this._doSlide(-1);}else{this._doSlide(1);}},_doSlide:function(_66d){var _66e=_4.style(this._containerNode.domNode,"width"),d,to;d=(_66e*0.5)*_66d;to=this._getScroll()+d;this._createSmoothScroll(null,to).play();},_getScroll:function(){return this._containerNode.domNode.scrollLeft;},_createSmoothScroll:function(tab,x){var self=this,anim,_675;if(tab!==null){x=this._getScrollForSelectedTab(tab);}else{_675=this._getScrollBounds();x=Math.min(Math.max(x,_675.min),_675.max);}if(this._anim&&this._anim.status()==="playing"){this._anim.stop();}anim=new _4._Animation({duration:100,beforeBegin:function(){var oldS=self._containerNode.domNode.scrollLeft;anim.curve=new _4._Line(oldS,x);},onAnimate:function(val){self._containerNode.domNode.scrollLeft=val;},onEnd:function(){self._setupScrollBtns();}});this._anim=anim;return anim;},_setupScrollBtns:function(){var _678=this._getScroll(),_679=this._getScrollBounds(),_67a,_67b;if(_678>_679.max){this._containerNode.domNode.scrollLeft=_679.max;}_67b=_678>=_679.max;_67a=_678<=_679.min;this._rightBtn.setAttribute("disabled",_67b);this._leftBtn.setAttribute("disabled",_67a);_4.query("button",this._rightBtn.domNode).toggleClass("tnRightButtonDisabled",_67b);_4.query("button",this._leftBtn.domNode).toggleClass("tnLeftButtonDisabled",_67a);}});_4.declare("tableau.base.NoFocusMenuItem",[tableau.base.widget.ui.iMenuItem],{templateString:"<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" waiRole=\"menuitemcheckbox\" "+"tabIndex=\"-1\" dojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">"+"<td class=\"dijitReset dijitMenuItemLabel\" dojoAttachPoint=\"containerNode,labelNode\" "+"style=\"padding:2px 25px 2px 8px;\"></td></tr>",isFocusable:function(){return true;}});_4.declare("tableau.base.MaxHeightMenu",[_5.Menu],{maxHeight:"500px",templateString:"<div style=\"max-height:${maxHeight}; overflow-x: hidden; overflow-y: auto; "+"border: 1px solid #7EABCD; background-color:white;\">"+"<table class=\"dijit dijitMenu dijitReset dijitMenuTable\" waiRole=\"menu\" "+"dojoAttachEvent=\"onkeypress:_onKeyPress\" style=\"border:none;\">"+"<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>"+"</table></div>"});}if(!_4._hasResource["tableau.base.ShareDialog"]){_4._hasResource["tableau.base.ShareDialog"]=true;var _67c=tab.Strings.ShareDialogWaitingLinkMessage;var _67d=tab.Strings.ShareDialogWaitingEmbedMessage;_4.provide("tableau.base.ShareDialog");var _67e=window.tableau_shared={};(function(){var _67f={},_680=(tsConfig.single_frame===true)?window.location:parent.location;function rewrite_url(url){var ret=url,_683=new RegExp("((http://)|(https://))([^/]+)(.*)"),_684=url.match(_683);if(_684){ret=_680.protocol+"//"+_680.host+_684[5];}return ret;};function postMessageShareUrl(_685){var _686;if(window.parent&&window.parent.postMessage){_686={tableau:{shareUrl:_685}};window.parent.postMessage(_4.toJson(_686),"*");}};function fixURIParam(_687,_688,_689,_68a,_68b){var _68c,_68d,_68e;_68c=_687;_68d=(_688!==_689);_68e=new RegExp(_68a);if(_68c.match(_68e)){if(_68d){_68c=_68c.replace(_68e,_68b);}else{_68c=_68c.replace(_68e,"");_68c=_68c.replace(new RegExp("&&"),"&");_68c=_68c.replace(new RegExp("\\?&"),"?");_68c=_68c.replace(new RegExp("&$"),"");_68c=_68c.replace(new RegExp("\\?$"),"");}}else{if(_68d){if(_68c.match("[?]")){_68c=_68c+"&"+_68b;}else{_68c=_68c+"?"+_68b;}}}return _68c;};function getShareUrl(uri,_690){var p=_690,_692=":tabs="+(p.show_tabs?"yes":"no"),_693=new RegExp(":tabs=[^&]+"),_694=":display_count="+(p.show_view_count?"yes":"no"),_695=new RegExp(":display_count=[^&]+"),_696=":toolbar="+(p.toolbar?"yes":"no"),_697=new RegExp(":toolbar=[^&]+");uri=fixURIParam(uri,p.toolbar,p.toolbar_default,_697,_696);uri=fixURIParam(uri,p.show_tabs,p.show_tabs_default,_693,_692);uri=fixURIParam(uri,p.show_view_count,p.show_view_count_default,_695,_694);return rewrite_url(uri);};function doUpdateGeneratedInner(){var _698,_699,args,_69b,_69c,_69d=false,esc=tableau.format.escapeHTML,i,_6a0,_6a1,name,_6a3,_6a4,_6a5,_6a6,_6a7={},_6a8,_6a9,_6aa,s=_67f,_6ac,_6ad,_6ae=s.share_blog.value,_6af=s.requestURI,_6b0=s.share_width.value,_6b1=s.share_height.value,_6b2=s.title,_6b3=s.static_image,_6b4=s.beaker,_6b5=s.search,_6b6=s.controller_id,_6b7=s.watermark_link,_6b8=s.toolbar_bottom,_6b9=s.watermark_image,_6ba=s.is_stateful_url,_6bb=s.api_url,_6bc=s.site_root,_6bd=_6af,p=s.vizParameterInfo;p.toolbar=s.share_toolbar.checked;p.show_tabs=s.show_tabs.checked;_6a7.http_link=getShareUrl(_6bd,s.vizParameterInfo);_699=parseInt(_6b0,10);_698=parseInt(_6b1,10);_699+=4;_698+=4;if(p.toolbar||_6b4){_698+=32;}if(p.show_tabs){_698+=26;}if(_6b4){_698+=33;}if(_6bb.indexOf("http://")===-1&&_6bb.indexOf("https://")===-1){_6bb=_680.protocol+"//"+_680.host+_6bb;}_69c="width=\""+_699+"\" height=\""+_698+"\"";_6a8="<script type=\"text/javascript\" src=\""+_6bb+"\"></script>";_6a5="<object class=\"tableauViz\" "+_69c+" style=\"display:none;\">";_6ad={"embed":1,"toolbar":1,"preview":1,"show_tabs":1,"tabs":1,"host_url":1,"loadOrderID":1};_6a5+="<param name=\"host_url\" value=\""+esc(encodeURIComponent(_680.protocol+"//"+_680.host+"/"))+"\" />";if(!_6ba){_6a5+="<param name=\"site_root\" value=\""+esc(_6bc)+"\" />";_6ad.site_root=1;_6a5+="<param name=\"name\" value=\""+esc(_6b6)+"\" />";_6ad.name=1;}if(_6ba){_6a3=_6a7.http_link.split("?")[0];_6a5+="<param name=\"path\" value=\""+esc(_6a3.replace(_680.protocol+"//"+_680.host+"/",""))+"\" />";_6ad.path=1;}if(!_6ba){_6a5+="<param name=\"tabs\" value=\""+(p.show_tabs?"yes":"no")+"\" />";}_6a5+="<param name=\"toolbar\" value=\""+(p.toolbar?"yes":"no")+"\" />";if(_6b4){if(_6b3&&_6b3.length>0){_6a4=_6b3.replace("_rss.png",".png");_6a5+="<param name=\"static_image\" value=\""+esc(_6a4)+"\" />";}_6a5+="<param name=\"animate_transition\" value=\"yes\" />";_6a5+="<param name=\"display_static_image\" value=\"yes\" />";_6a5+="<param name=\"display_spinner\" value=\"yes\" />";_6a5+="<param name=\"display_overlay\" value=\"yes\" />";_6a5+="<param name=\"display_count\" value=\"yes\" />";_6ad.animate_transition=1;_6ad.display_static_image=1;_6ad.display_spinner=1;_6ad.display_overlay=1;_6ad.display_count=1;}if(_6b5.length>0){_6aa=_6b5.substring(1).split("&");for(i=0;i<_6aa.length;i++){args=_6aa[i].match(/^:([^=]+)=(.+)/);if(args&&args.length===3){name=args[1];_6a9=args[2];}else{name="filter";_6a9=_6aa[i];}if(!tab.MiscUtil.isNullOrEmpty(name)&&_6ad[name]!==1){_6a5+="<param name=\""+esc(name)+"\" value=\""+esc(_6a9)+"\" />";}}}_6a5+="</object>";_6a1=_6ae||"#";_6a0="";if(_6b3&&_6b3.length>0){_6a0="<noscript><a href=\""+esc(_6a1)+"\">"+"<img alt=\""+esc(_6b2)+" \" src=\""+esc(_6b3)+"\" style=\"border: none\" /></a></noscript>";}_69b=rewrite_url(_6af.split("?")[0]);_6a6="<div class=\"tableauPlaceholder\" style=\"width:"+_699+"px; height:"+_698+"px;\">"+_6a0+_6a5+"</div>";_6ac="<div style=\"width:"+_699+"px"+";height:22px;padding:0px 10px 0px 0px;"+"color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;\">"+"<div style=\"float:right; padding-right:8px;\">"+"<a href=\""+tsConfig.embedCodeTableauLink+"?ref="+_69b+"\" target=\"_blank\">"+esc(tab.Strings.ShareDialogEmbedCodeTableauText)+"</a></div></div>";_6a7.html_blurb=_6a8+_6a6;if(_6b4){_6a7.html_blurb+=_6ac;}if(_6ba&&(0===_6af.length)){_6a7.http_link=_67c;_6a7.html_blurb=_67d;}if(_6ba&&_6af.length>0&&_67f.lastShareUrl!==_6a7.http_link){_67f.lastShareUrl=_6a7.http_link;postMessageShareUrl(_6a7.http_link);}return _6a7;};function doUpdateGenerated(){var s=_67f,_6c0=doUpdateGeneratedInner();s.share_mailto_a.href="mailto:?body="+encodeURIComponent(_6c0.http_link);s.share_link_a.href=_6c0.http_link;s.share_link_textbox.value=_6c0.http_link;s.share_embed_textbox.value=_6c0.html_blurb;if(tsConfig.is_mobile){s.share_mobile_only.style("display","");s.share_web_only.style("display","none");s.share_embed_textbox.removeAttribute("readonly");}s.width=s.share_width.value;s.height=s.share_height.value;s.blog=s.share_blog.value;};function setupShareDialogCommon(opts){var s=_67f;s.share_width.value=opts.width;s.share_height.value=opts.height;s.requestURI=opts.request;s.share_blog.value=opts.blog!==undefined?opts.blog:"";s.title=opts.title;s.beaker=opts.beaker;s.search=opts.search;s.static_image=opts.static_image;s.controller_id=opts.controller_id;s.watermark_link=opts.watermark_link;s.toolbar_bottom=opts.toolbar_bottom;s.watermark_image=opts.watermark_image;s.share_header_link.title=opts.server_name;s.share_header_logo.src=opts.server_logo;s.is_stateful_url=opts.is_stateful_url;s.api_url=opts.api_url;s.site_root=opts.site_root;s.vizParameterInfo=opts.vizParameterInfo;s.share_toolbar.checked=s.vizParameterInfo.toolbar;s.show_tabs.checked=s.vizParameterInfo.show_tabs;if(!opts.tabs_allowed){s.show_tabs_label.style.visibility="hidden";s.show_tabs.style.visibility="hidden";}if(!opts.static_image||opts.static_image===""){s.share_rss_blog_row.style.display="none";}if(opts.is_stateful_url){s.show_tabs_label.style.display="none";s.show_tabs.style.display="none";}doUpdateGenerated();};function isInteger(s){var c,i;if(s.length===0){return false;}for(i=0;i<s.length;i++){c=s.charAt(i);if((c>"9")||(c<"0")){return false;}}return true;};function checkParent(t){while(t.parentNode){if(t===_67e._popup){return false;}t=t.parentNode;}return true;};function pushShareFieldsToParent(){try{if(parent&&parent.beaker&&parent.beaker.setupShareFields){parent.beaker.setupShareFields({embed:_67f.share_embed_textbox.value,link:_67f.share_link_textbox.value});}}catch(x){}};function setupShareDialog(_6c7){var d=_4,s=_67f,_6ca=d.byId("share_dialog");s.share_width=d.byId("share_width");s.share_height=d.byId("share_height");s.share_toolbar=d.byId("share_toolbar");s.share_mailto_a=d.byId("share_mailto_a");s.share_mobile_only=d.query(".share_mobile_only",_6ca);s.share_web_only=d.query(".share_web_only",_6ca);s.share_link_textbox=d.byId("share_link_textbox");s.share_link_a=d.byId("share_link_a");s.share_embed_textbox=d.byId("share_embed_textbox");s.share_blog=d.byId("share_blog");s.dimension_warning=d.byId("dimension_warning");s.share_header_link=d.byId("share_header_link");s.share_header_logo=d.byId("share_header_logo");s.share_rss_blog_row=d.byId("share_rss_blog_row");s.show_tabs=d.byId("show_tabs");s.show_tabs_label=d.byId("show_tabs_label");s.show_toolbar=d.byId("share_toolbar");s.show_toolbar_label=d.byId("share_toolbar_label");setupShareDialogCommon(_6c7);pushShareFieldsToParent();};function validateReasonableDimension(_6cb,_6cc){var i,_6ce=false,t=_67f[_6cb].value;if(isInteger(t)){i=parseInt(t,10);if(i<10000&&i>0){_67f[_6cb].style.color="black";_67f.dimension_warning.style.visibility="hidden";if(_6cc){doUpdateGenerated();}return;}else{_6ce=true;}}else{_6ce=true;}if(_6ce){_67f[_6cb].style.color="red";_67f.dimension_warning.style.visibility="";}};function toggleMobileClientVizDisplay(show){_4.query("[id^='tableau_mobile_MobileClient']",_4.doc).forEach(function(node,_6d2){var _6d3=_5.byNode(node);if(_6d3){_6d3[show?"enableBodyTouchHandler":"disableBodyTouchHandler"]();_4.style(_6d3.domScroll,"display",show?"":"none");}});};function hideShareDialog(){toggleMobileClientVizDisplay(true);_5.byId("share_dialog").hide();};function showPopup(){var _6d4;if(_67e._popup){_67e._popup.style.visibility="hidden";document.getElementById("displayOptionsHeader").className="closed";delete _67e._popup;return;}_6d4=document.getElementById("optionsPopup");_6d4.style.visibility="visible";document.getElementById("displayOptionsHeader").className="open";_67e._popup=_6d4;document.justSetPopup="true";};function hideActivePopup(e){var _6d6,_6d7=(e&&e.target)||(event&&event.srcElement);if(!_67e._popup){return;}if(document.justSetPopup==="true"){document.justSetPopup="false";return;}_6d6=checkParent(_6d7);if(_6d6){_67e._popup.style.visibility="hidden";document.getElementById("displayOptionsHeader").className="closed";delete _67e._popup;}};_67e.toggleMobileClientVizDisplay=toggleMobileClientVizDisplay;_67e.doUpdateGenerated=doUpdateGenerated;_67e.setupShareDialog=setupShareDialog;_67e.validateReasonableDimension=validateReasonableDimension;_67e.hideShareDialog=hideShareDialog;_67e.showPopup=showPopup;_67e.getShareUrl=getShareUrl;if(document.addEventListener){document.addEventListener("click",hideActivePopup,false);}else{if(document.attachEvent){document.attachEvent("onclick",hideActivePopup);}else{document.onclick=hideActivePopup;}}}());}if(!_4._hasResource["tableau.base.widget.ShareDialog"]){_4._hasResource["tableau.base.widget.ShareDialog"]=true;_4.provide("tableau.base.widget.ShareDialog");_4.declare("tableau.base.widget.ShareDialog",[tableau.base.widget.Dialog],{templateString:"<div class=\"dijitDialog dijitContentPane\">\r\n<div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar\">\r\n  <span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"></span>\r\n  <span dojoAttachPoint=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" dojoAttachEvent=\"onclick: onCancel\" title=\"${buttonCancel}\">\r\n    <span dojoAttachPoint=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\r\n  </span>\r\n</div>\r\n<div dojoattachpoint=\"containerNode\" class=\"dijitDialogPaneContent\">\r\n<div class=\"shareVizTable\">\r\n  <div class=\"shareVizHeader\">\r\n    <span class=\"shareVizTitle\">${_locDialogTitle}</span>\r\n    <a class=\"shareVizHeaderLink\" href='/' id=\"share_header_link\" tabindex=\"-1\"\r\n       target=\"_blank\"><img id=\"share_header_logo\"/> </a>\r\n  </div>\r\n  <table class=\"shareInnerTable\">\r\n    <tr>\r\n      <td align=\"right\">\r\n        <div class=\"displayOptions\">\r\n            <span id=\"displayOptionsHeader\" class=\"closed\" href=\"/\" onclick=\"tableau_shared.showPopup(); return false;\"  onfocus=\"blur();\" tabindex=\"-1\"></span>\r\n            <span id=\"superimposedText\" class=\"closed\" href=\"/\" onclick=\"tableau_shared.showPopup(); return false;\">${_locDisplayOptions}</span>\r\n            <div id=\"optionsPopup\">\r\n            <form action=\"\" id=\"optionsPopupForm\" class=\"selectShareVizOptions\"><fieldset style=\"border:none; margin:0; padding:5px;\"><table width=\"135\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\r\n                  <tr>\r\n                    <td><label for=\"share_width\">${_locWidth}</label></td>\r\n                    <td><input id=\"share_width\" size=\"5\"\r\n                               class=\"\" type=\"text\" name=\"share_width\" title=\"width\" value=\"425\" alt=\"width\"\r\n                               constraints=\"{min:1,max:9999,places:0,pattern:'###0.##'}\"\r\n                               promptMessage= \"${_locEnterValueBetween}\"\r\n                               required= \"true\"\r\n                               tooltipPosition = ['TL':'BL']\r\n                               invalidMessage= \"${_locInvalidWidth}\"\r\n                               onkeyup=\"tableau_shared.validateReasonableDimension('share_width', false);\"\r\n                               onblur=\"tableau_shared.validateReasonableDimension('share_width', true);\"\r\n                               />\r\n                    </td>\r\n                  </tr>\r\n                  <tr>\r\n                    <td><label for=\"share_height\">${_locHeight}</label></td>\r\n                    <td><input id=\"share_height\" size=\"5\"\r\n                               class=\"\" type=\"height\" name=\"share_height\" title=\"height\" value=\"350\" alt=\"height\"\r\n                               constraints=\"{min:1,max:9999,places:0,pattern:'###0.##'}\"\r\n                               promptMessage= \"${_locEnterValueBetween}\"\r\n                               required= \"true\"\r\n                               tooltipPosition = ['TL':'BL']\r\n                               invalidMessage= \"${_locInvalidHeight}\"\r\n                               onkeyup=\"tableau_shared.validateReasonableDimension('share_height',false);\"\r\n                               onblur=\"tableau_shared.validateReasonableDimension('share_height', true);\"\r\n                               /></td>\r\n                  </tr>\r\n                  <tr id=\"shareShowToolbar\">\r\n                    <td colspan=\"2\">\r\n                        <label for=\"share_toolbar\" id=\"share_toolbar_label\" class=\"\">${_locShowToolbar}</label\r\n                        ><input type=\"checkbox\" id=\"share_toolbar\"\r\n                               name=\"share_toolbar\" class=\"\" value=\"\" alt=\"${_locShowToolbar}\"\r\n                               onclick=\"tableau_shared.doUpdateGenerated();\"\r\n                       /></td>\r\n                  </tr>\r\n                  <tr id=\"shareShowTabs\">\r\n                    <td colspan=\"2\" style=\"padding-bottom:10px;\">\r\n                        <label id=\"show_tabs_label\" for=\"show_tabs\" class=\"\">${_locShowTabs}</label\r\n                        ><input type=\"checkbox\" id=\"show_tabs\"\r\n                                name=\"show_tabs\" class=\"\" value=\"\" alt=\"${_locShowTabs}\"\r\n                                onclick=\"tableau_shared.doUpdateGenerated();\"\r\n                        /></td>\r\n                  </tr>\r\n                  <tr id=\"share_rss_blog_row\">\r\n                    <td colspan=\"2\">\r\n                      <label style=\"font-family:Arial, Helvetica, sans-serif; font-weight:normal;\" for=\"share_blog\">${_locUrlForRssLinks}</label><br\r\n                      /><input style=\"outline:none; margin-bottom:0; width:119px;  font-weight:normal;\" id=\"share_blog\" class=\"\" type=\"text\" name=\"share_blog\" title=\"${_locUrlForRssLinks}\" value=\"\" alt=\"${_locUrlForRssLinks}\" promptMessage= \"${_locEnterUriForBlogEntry}\" required= \"optional\" maxLength=\"255\" maxlength=\"255\" onblur=\"tableau_shared.doUpdateGenerated();\"\r\n                    /></td>\r\n                  </tr>\r\n                </table\r\n              ></fieldset\r\n            ></form>\r\n          </div>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n    <tr class=\"share_mobile_only\" style=\"display:none\">\r\n      <td>\r\n        <div class=\"shareVizOption\">${_locLink}</div>\r\n        <table class=\"shareVizHelpText\">\r\n          <tr>\r\n            <td>\r\n              <a href=\"mailto:\" id=\"share_mailto_a\" class=\"tableau wcIconMail\"></a>\r\n            </td><td>\r\n              ${_locShareMobileEmailText}\r\n            </td>\r\n          </tr><tr>\r\n            <td>\r\n              <a target=\"_blank\" id=\"share_link_a\" class=\"tableau wcIconLink\"></a>\r\n            </td><td>\r\n              ${_locShareMobileLinkText}\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </td>\r\n    </tr>\r\n    <tr class=\"share_web_only\">\r\n      <td>\r\n        <span class=\"shareVizOption\">${_locEmail}</span>\r\n        <br /><span class=\"shareVizHelpText\">${_locEmailHelp}</span>\r\n        <br/><input id=\"share_link_textbox\" class=\"emailVizURL\" readonly=\"readonly\" onclick=\"this.focus();this.select();return false;\"/>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>\r\n        <span class=\"shareVizOption\">${_locEmbed}</span>\r\n        <br /><span class=\"shareVizHelpText\">${_locEmbedHelp}</span>\r\n        <br/><input id=\"share_embed_textbox\" class=\"embedViz\" readonly=\"readonly\" onclick=\"this.focus();this.select();return false;\"/>\r\n      </td>\r\n    </tr>\r\n    <tr>\r\n      <td>\r\n        <div style=\"white-space: nowrap;\">\r\n          <button class=\"tab-styledButton\" onclick=\"tableau_shared.hideShareDialog(); return false;\">\r\n            <span class=\"tab-styledButtonLeft\"></span>\r\n            <span class=\"tab-styledButtonMiddle\">${_locDone}</span>\r\n            <span class=\"tab-styledButtonRight\"></span>\r\n          </button>\r\n          <span id=\"dimension_warning\" style=\"font-family:Arial, Helvetica, sans-serif; font-size:10px; font-weight:normal; visibility:hidden; color:red; margin-left:10px;\">${_locPleaseEnterIntegerBetween}</span>\r\n        </div>\r\n      </td>\r\n    </tr>\r\n  </table>\r\n</div><!-- end shareVizTable -->\r\n</div>\r\n</div>\r\n",constructor:function(_6d8){this._loadLocalizedStrings();},_position:function(){var _6d9=jQuery(".wcShareButton");if(!jQuery("body").hasClass("dojoMove")&&_6d9.length>0){_5.placeOnScreenAroundElement(this.domNode,_6d9.get(0),{"TL":"BL","BL":"TL"});}},_loadLocalizedStrings:function(){var s=tab.Strings,esc=tableau.format.escapeHTML;this._locDialogTitle=esc(s.ShareDialogTitle);this._locDisplayOptions=esc(s.ShareDialogDisplayOptions);this._locWidth=esc(s.ShareDialogWidth);this._locHeight=esc(s.ShareDialogHeight);this._locInvalidWidth=esc(s.ShareDialogInvalidWidth);this._locInvalidHeight=esc(s.ShareDialogInvalidHeight);this._locEnterValueBetween=esc(s.ShareDialogEnterValueBetween(1,10000));this._locShowToolbar=esc(s.ShareDialogShowToolbar);this._locShowTabs=esc(s.ShareDialogShowTabs);this._locUrlForRssLinks=esc(s.ShareDialogUrlForRssLinks);this._locEnterUriForBlogEntry=esc(s.ShareDialogEnterUriForBlogEntry);if(tab.BrowserSupport._isAndroid){this._locShareMobileLinkText=esc(s.ShareDialogAndroidLinkText);}else{this._locShareMobileLinkText=esc(s.ShareDialogMobileLinkText);}this._locShareMobileEmailText=esc(s.ShareDialogMobileEmailText);this._locLink=esc(s.ShareDialogLink);this._locEmail=esc(s.ShareDialogEmail);this._locEmailHelp=esc(s.ShareDialogEmailHelp);this._locEmbed=esc(s.ShareDialogEmbed);this._locEmbedHelp=esc(s.ShareDialogEmbedHelp);this._locDone=esc(s.ShareDialogDoneButton);this._locPleaseEnterIntegerBetween=esc(s.ShareDialogPleaseEnterIntegerBetween(1,10000));}});}if(!_4._hasResource["tableau.base.Social"]){_4._hasResource["tableau.base.Social"]=true;_4.provide("tableau.base.Social");(function(){_4.declare("tableau.base.Social",null,{});tableau.base.Social.twitterPopup=function(_6dc,_6dd){var _6de,_6df,_6e0,_6e1;_6de={url:_6dc,via:"tableau",text:_6dd,related:"tableau"};_6df="https://twitter.com/share?"+_4.objectToQuery(_6de);_6e0=null;_6e1="scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=680,height=350";window.open(_6df,_6e0,_6e1);};tableau.base.Social.facebookPopup=function(_6e2,_6e3,_6e4,name,_6e6,_6e7){var _6e8,_6e9,_6ea,_6eb,_6ec;_6e8={app_id:_6e2,link:_6e3,picture:_6e4,name:name,description:_6e6};if(_6e7&&_6e7.length>0){_6e8.redirect_uri=_6e7;}_6e9="http://www.facebook.com/dialog/feed?"+_4.objectToQuery(_6e8);_6ea=null;_6eb="scrollbars=yes,resizable=yes,toolbar=no,location=no,width=1000,height=565";_6ec=window.open(_6e9,_6ea,_6eb);if(window.focus){_6ec.focus();}};tableau.base.Social.mailTo=function(_6ed,_6ee){var _6ef,_6f0;_6f0={body:_6ed};if(_6ee){_6f0.subject=_6ee;}_6ef="mailto:?"+_4.objectToQuery(_6f0);window.location.href=_6ef;};}());}if(!_4._hasResource["tableau.base.metrics"]){_4._hasResource["tableau.base.metrics"]=true;_4.provide("tableau.base.metrics");tableau.metrics={};tableau.metrics.getScrollW=function(){return tableau.metrics[tabBootstrap.UIMetricType.scrollbar];};tableau.metrics.getMinScrollWidth=function(){if(_4.isSafari||tableau.util.isMac){return 60;}return tableau.metrics.getScrollW()*2;};tableau.metrics.getScrollH=function(){return tableau.metrics[tabBootstrap.UIMetricType.scrollbar];};tableau.metrics.getMinScrollHeight=function(){if(_4.isSafari||tableau.util.isMac){return 60;}return tableau.metrics.getScrollH()*2;};tableau.metrics.getScrollInterval=function(){if(_4.isIE){return 7;}if(_4.isFF){return 10;}if(_4.isSafari){return 40;}return 1;};(function(){var _6f1=tabBootstrap.LayoutMetrics.getScrollbarSize();tableau.metrics[tabBootstrap.UIMetricType.scrollbar]=_6f1;}());}if(!_4._hasResource["tableau.base.CategoricalSelectionMixin"]){_4._hasResource["tableau.base.CategoricalSelectionMixin"]=true;_4.provide("tableau.base.CategoricalSelectionMixin");_4.declare("tableau.base.CategoricalSelectionMixin",null,{_anchorIndex:-1,_selectedIndexes:[],_lastRangeSelectionIndex:-1,recordCheckedChanges:function(_6f2,item,_6f4){if(tableau.FilterItem.isChecked(item)&&!_6f4.s){_6f2.tuples.push(tableau.FilterItem.setChecked(item,true,_6f4));}else{if(!tableau.FilterItem.isChecked(item)&&_6f4.s){_6f2.tuples.push(tableau.FilterItem.setChecked(item,false,_6f4));}}},clearRangeAnchorAndSelection:function(){var _6f5,node;node=this.fetchChildNodeByIndex(this._anchorIndex);if(node){_6f5=tableau.FilterItem.getCssNode(node);if(_6f5){_4.removeClass(node,"anchorSelection");}}this._anchorIndex=this._lastRangeSelectionIndex=-1;this._clearSelection();},refreshRangeAnchorAndSelection:function(){var _6f7,i,node,_6fa,_6fb;if(this._anchorIndex>=0){node=this.fetchChildNodeByIndex(this._anchorIndex);if(node){_6f7=tableau.FilterItem.getCssNode(node);if(_6f7){_4.addClass(_6f7,"anchorSelection");}}else{this._anchorIndex=-1;}}for(i=this._selectedIndexes.length-1;i>=0;--i){_6fa=this._selectedIndexes[i];_6fb=this.fetchChildNodeByIndex(_6fa);if(_6fb){this._selectItem(_6fa);}else{this._selectedIndexes.splice(i,1);}}},onListItemClick:function(evt){var _6fd,node,_6ff,_700,_701,_702,_703,_704=new tab.RawChange(),i,_706=[],_707,_708,item,_70a,_70b,_70c,_70d;if(!this.changelist){this.changelist=new tab.Changelist();}node=tableau.FilterItem.getNodeFromEvent(evt);if(!node){return;}_6fd=tableau.util.isNodeMatch(evt.target,"input",{"type":"checkbox"});_6fd=_6fd||tableau.util.isNodeMatch(evt.target,"input",{"type":"radio"});if(_6fd){tableau.FilterItem.syncCssToCheckState(node);if(tableau.FilterItem.isAllItem(node)){this.doSelectAll(this.isSingleSelect()||tableau.FilterItem.isChecked(node));return;}}_6ff=tableau.FilterItem.getIndex(node);if(tab.MiscUtil.isNullOrUndefined(_6ff)||_6ff<0){return;}if(tableau.FilterItem.isTypeInListItem(node)){if(evt.shiftKey===true&&this._anchorIndex>=0){this._selectRangeFromAnchor(_6ff);}else{if(tableau.util.isCtrlKey(evt)){this._toggleItemSelection(_6ff);this._updateRangeAnchor(_6ff);}else{this._clearSelection();this._updateRangeAnchor(_6ff);this._selectItem(_6ff);}}}else{if(_6fd){_702=tableau.FilterItem.isChecked(node);if(this.oFilter){_70b=this.oFilter.table;}else{if(this.oResults){_70b=this.oResults;}}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(_70b&&_70b.actual_size===_70b.tuples.length){_70c=_70b.tuples;_70d=_70c.length;for(i=0;i<_70d;i++){item=this.fetchChildNodeByIndex(i);if(item&&tableau.FilterItem.isChecked(item)){_707=_70c[i].d||_70c[i].t[0].v;_706.push(_707);}}_70a=this.qf||this;_708=new tab.CategoricalFilterData(_70a.oFilter.targetSheets,_70a.field,_70a.oFilter.exclude,_706);tab.FilterClientCommands.updateCategoricalFilter(_708);}}if(tableau.FilterItem.isTiled(node)){if(evt.shiftKey===true){this._updateCheckboxRangeFromAnchorByIndex(_6ff);_700=(this._anchorIndex>-1)?this._anchorIndex:_6ff;_704.setRange(new tab.IntegerRange(_700,_6ff),_702);this.changelist.addChange(_704);}else{_704.setSingle(_6ff,_702);this.changelist.addChange(_704);}}else{if(evt.shiftKey===true){this._updateCheckboxRangeFromAnchor(_6ff);}else{_704.setSingle(_6ff,_702);this.changelist.addChange(_704);}}this.notifyChange(this.getDoChangeFunc());}this._updateRangeAnchor(_6ff);}},getDoChangeFunc:function(){var _70e,_70f,_710,_711;_70e=_4.partial(this.applyChangesByChangelist,this.changelist);_70f=_4.hitch(this,_70e);_710=_4.hitch(this.changelist,this.changelist.reset);_711=function(){_70f();_710();};return _711;},notifyChange:function(_712){if(this._applyTimer){clearTimeout(this._applyTimer);delete this._applyTimer;}this.stateId++;this._applyTimer=setTimeout(_712,this.applyDelay);},forEachSelected:function(_713){var i,_715,_716,node;if(tab.MiscUtil.isNullOrUndefined(_713)||typeof (_713)!=="function"){return;}for(i=0,_715=this._selectedIndexes.length;i<_715;i++){_716=this._selectedIndexes[i];node=this.fetchChildNodeByIndex(_716);_713(_716,node);}},_selectRangeFromAnchor:function(_718){var _719,_71a,_71b=this._anchorIndex,_71c,_71d,last=this._lastRangeSelectionIndex>=0?this._lastRangeSelectionIndex:_71b,_71f=Math.min(_71b,_718),_720=Math.max(_71b,_718);for(_719=_718;_719<=Math.min(_71b,last);_719++){this._selectItem(_719);}for(_71c=last;_71c<_71f;_71c++){this._deselectItem(_71c);}for(_71a=Math.max(_71b,last);_71a<=_718;_71a++){this._selectItem(_71a);}for(_71d=_720+1;_71d<=last;_71d++){this._deselectItem(_71d);}this._lastRangeSelectionIndex=_718;},_toggleItemSelection:function(_721){var node=this.fetchChildNodeByIndex(_721);if(tableau.FilterItem.isSelected(node)){this._deselectItem(_721);}else{this._selectItem(_721);}},_selectItem:function(_723){var node=this.fetchChildNodeByIndex(_723),_725;tableau.FilterItem.setSelected(node,true);_725=tableau.util.binarySearch(_723,this._selectedIndexes);if(!_725.found){this._selectedIndexes.splice(_725.index,0,_723);}},_deselectItem:function(_726){var node=this.fetchChildNodeByIndex(_726),_728;tableau.FilterItem.setSelected(node,false);_728=tableau.util.binarySearch(_726,this._selectedIndexes);if(_728.found){this._selectedIndexes.splice(_728.index,1);}},_clearSelection:function(){var i;for(i=this._selectedIndexes.length-1;i>=0;--i){this._deselectItem(this._selectedIndexes[i]);}this._selectedIndexes=[];},_updateCheckboxRangeFromAnchor:function(_72a){var _72b=Math.min(this._anchorIndex,_72a),_72c=Math.max(this._anchorIndex,_72a),node=this.fetchChildNodeByIndex(_72b),_72e=this.fetchChildNodeByIndex(_72c),_72f=tableau.FilterItem.isChecked(this.fetchChildNodeByIndex(_72a)),_730;while(node&&node!==_72e){tableau.FilterItem.setChecked(node,_72f);_730=new tab.RawChange();_730.setSingle(tableau.FilterItem.getIndex(node),_72f);this.changelist.addChange(_730);node=node.nextSibling;}tableau.FilterItem.setChecked(_72e,_72f);_730=new tab.RawChange();_730.setSingle(tableau.FilterItem.getIndex(_72e),_72f);this.changelist.addChange(_730);},_updateCheckboxRangeFromAnchorByIndex:function(_731){var _732=Math.min(this._anchorIndex,_731),_733=Math.max(this._anchorIndex,_731),_734=tableau.FilterItem.isChecked(this.fetchChildNodeByIndex(_731)),i,node;for(i=_732;i<=_733;++i){node=this.fetchChildNodeByIndex(i);if(node){tableau.FilterItem.setChecked(node,_734);}}},_updateRangeAnchor:function(_737){var _738;if(this.isSingleSelect()){return;}if(this._anchorIndex===_737&&_737>=0){return;}_738=this.fetchChildNodeByIndex(this._anchorIndex);if(_738){_4.removeClass(tableau.FilterItem.getCssNode(_738),"anchorSelection");}this._anchorIndex=_737;_738=this.fetchChildNodeByIndex(_737);if(_738){_4.addClass(tableau.FilterItem.getCssNode(_738),"anchorSelection");}this._lastRangeSelectionIndex=-1;}});}if(!_4._hasResource["tableau.base.widget.catmode.BaseMode"]){_4._hasResource["tableau.base.widget.catmode.BaseMode"]=true;_4.provide("tableau.base.widget.catmode.BaseMode");_4.declare("tableau.base.widget.catmode.BaseMode",[_5._Contained],{constructor:function(_739,div,_73b){this.connections=[];this.parent=_739;this.div=div;this.attributes={};if(_73b!==undefined){this.attributes=_73b;}},instantiate:function(data,_73d,_73e){alert(tab.Strings.noLoc("Error: Unimplemented functionality"));},applyChanges:function(){alert(tab.Strings.noLoc("Error: Unimplemented functionality"));},layout:function(_73f,_740){_4.marginBox(this.div,_73f);},fetchChildNodeByIndex:function(_741){if(tab.MiscUtil.isNullOrUndefined(_741)||_741<0){return null;}if(tableau.FilterItem.isAllItem(this.div.firstChild)){_741+=1;}return this.div.childNodes[_741];},shouldUseAllItem:function(){return this.attributes["show-all"]!=="false";},countIfAll:function(_742){var i,_744=this.parent.mode==="checklist"?1:0;for(i=0;i<_742.length;i++){if(_742[i].s){_744+=1;}}return _744===_742.length;},getSummaryText:function(){return this.hasSummaryText()?this.parent.oFilter.summary:"";},formatTuple:function(_745){return tableau.format.formatTupleDisplayName(_745,true,this.parent.oFilter.role);},formatFacet:function(_746){return tableau.format.formatTupleDisplayFacet(_746,true,this.parent.oFilter.role);},hasSummaryText:function(){var _747=this.parent.mode==="slider",_748=this.parent.mode==="dropdown"||this.parent.mode==="checkdropdown",_749=this.parent.oFilter.summary,_74a=_749!==tab.Strings.QuickFilterAll;return _749&&(_747||(_748&&_74a));},applyChangesByChangelist:function(_74b,_74c){var _74d=this.attributes.values||"",_74e,_74f=[],_750=[],_751,_752=[],_753,i;if(_74c==="checklist"||_74c==="checkdropdown"||_74c==="typeinlist"){_74e=_74b.compileForChecklist(_74d);for(i=0;i<_74e.select.length;i++){_751=_74e.select[i];_74f.push(_751);}for(i=0;i<_74e.deselect.length;i++){_751=_74e.deselect[i];_750.push(_751);}tab.FilterClientCommands.modifyCategoricalFilterValuesByIndex(this.parent.session.get_sheetName(),this.parent.field,_74f,_750);}else{if(_74c==="radiolist"){_74e=_74b.compileForRadiolist(_74d);_752.push(_74e.index);tab.FilterClientCommands.setCategoricalFilterValuesByIndex(this.parent.session.get_sheetName(),this.parent.field,"filter-replace",_752);}}}});}if(!_4._hasResource["tableau.base.widget.catmode.Checklist"]){_4._hasResource["tableau.base.widget.catmode.Checklist"]=true;_4.provide("tableau.base.widget.catmode.Checklist");_4.declare("tableau.base.widget.catmode.Checklist",[tableau.base.widget.catmode.BaseMode],{instantiate:function(t,_756,_757,_758,_759,_75a){this.createChecklist(this.div,t,_756,_757,_758,_759,_75a);},createChecklist:function(div,t,_75d,_75e,_75f,_760,_761){var all=tableau.FilterItem.ALL,_763,_764,_765,_766=tableau.FilterItem.checkboxArray,_767=tableau.FilterItem.getCheckboxHTML,_768,_769,_76a;this.role=_75f;if(this.shouldUseAllItem()&&t.length>0){_76a=_767(_766,_75d+"_"+all,all,false,_75e,_760,_761);div.innerHTML=_76a;}_768=this.parent.oFilter.exclude&&_75e;_763=this.parent.oFilter.allChecked;_764=this.parent.oFilter.allNotChecked;_765=(_763&&!this.parent.oFilter.exclude)||(_764&&this.parent.oFilter.exclude);if(div.firstChild&&this.shouldUseAllItem()&&_765){tableau.FilterItem.setChecked(div.firstChild,true);}if(this.parent.attributes.values){_769=this.parent.attributes.values;}this.createTiledWidget(t,div,_75d,_768,_761,_75e,_769);this.connections.push(_4.connect(div,"onclick",this.parent,"onListItemClick"));},createTiledWidget:function(_76b,div,_76d,_76e,_76f,_770,_771){var _772,_773,ui,box,_776,_777,_778,_779,_77a,_77b=this.parent.oFilter.table.actual_size,_77c=17;_77a=this.parent.oFilter.isTiled?tsConfig.filterTileSize:_77b;_4.style(div,"position","relative");_772=_77b*_77c;_773=_77a?Math.ceil(_77b/_77a):0;ui=new tab.FilterListUI(div,_772,_773);box=_4.marginBox(div);_776=new tab.ListGridModel(_77b,_77c,_77a,box.h);_777=new tab.FilterContentFetcher(this.parent.session,this.parent.field,_771);_778=new tab.ChecklistContentFormatter(_76d,_76e,_76f,_770);_779=_76b.slice(0,_77a);if(this.tiledWidget){this.tiledWidget.destroy();}this.tiledWidget=new tab.TiledWidget(_777,_776,ui,_778,_779,false,this.role);},layout:function(_77d,_77e){this.inherited(arguments);if(this.tiledWidget){this.tiledWidget.updateViewport(_77d.w,_77d.h);}},destroy:function(){_4.forEach(this.connections,_4.disconnect);this.connections=[];if(this.tiledWidget){this.tiledWidget.destroy();}this.tiledWidget=null;},fetchChildNodeByIndex:function(_77f){if(this.tiledWidget){return this.tiledWidget.getElement(_77f);}else{return null;}}});}if(!_4._hasResource["tableau.base.widget.catmode.CheckDropdown"]){_4._hasResource["tableau.base.widget.catmode.CheckDropdown"]=true;_4.provide("tableau.base.widget.catmode.CheckDropdown");_4.declare("tableau.base.widget.catmode.CheckDropdown",[tableau.base.widget.catmode.BaseMode,tableau.base.widget.catmode.Checklist],{instantiate:function(t,_781,_782,_783,_784,_785){_782=_782||this.parent.oFilter.allChecked;this.fillChecklistElement=function(_786){this.createChecklist(_786,t,_781,_782,_783,_784,_785);};this.$dropdown=jQuery("<span>").addClass("tabComboBox").addClass("tabComboStdTheme").addClass("tabComboBoxNoIcon").addClass("tiledContent").on("click",jQuery.proxy(this.onDropdownClicked,this));this.$dropdownLabelContainer=jQuery("<div>").addClass("tabComboBoxNameContainer").appendTo(this.$dropdown);this.$dropdownLabel=jQuery("<span>").addClass("tabComboBoxName").text(this.getLabelText(t,_782,_783)).appendTo(this.$dropdownLabelContainer);this.$dropdownArrow=jQuery("<span>").addClass("tabComboBoxButton").appendTo(this.$dropdown);this.div.appendChild(this.$dropdown.get(0));var _787=jQuery("#"+this.parent.id+"_menu");if(_787.length>0){this.fillMenu(_787);}},getLabelText:function(t,_789,_78a){var i,l,_78d,_78e;_78d=-1;_78e=false;for(i=0,l=t.length;i<l;++i){if(t[i].s&&!_789){if(_78d>-1){_78e=true;}else{_78d=i;}}}if(_789){return tab.Strings.QuickFilterAll;}else{if(_78e){return tab.Strings.QuickFilterMultipleValues;}else{if(_78d===-1&&this.hasSummaryText()){return this.getSummaryText();}else{return tableau.format.formatTupleDisplayName(t[_78d]||"",true,_78a);}}}},layout:function(_78f,_790){this.inherited(arguments);var divw=_4.marginBox(this.div).w;if(divw>4){_4.style(this.div.firstChild,"width",(divw-4)+"px");}},onDropdownClicked:function(){tab.BrowserViewport.getViewport(_4.hitch(this,this.showMenu));},showMenu:function(_792){var _793,_794,_795,body,_797,_798,_799,_79a,w,r,l,_79e,_79f,_7a0,_7a1,_7a2,_7a3,_7a4,_7a5,_7a6,_7a7=false,_7a8=544,_7a9=51;_793=this.$dropdown.offset();_794=this.$dropdown.outerWidth();_795=this.$dropdown.outerHeight();body=document.body;_797=jQuery("<div>").css({"position":"absolute","top":0,"left":0,"bottom":0,"right":0,"z-index":899}).appendTo(body);_798=jQuery("<div>").attr("id",this.parent.id+"_menu").css({"position":"absolute","top":(_793.top+_795-1)+"px","left":_793.left+"px","max-height":"544px","overflow-x":"hidden","overflow-y":"auto","background-color":"white","border":"1px solid #bfbfbf","-moz-box-shadow":"2px 2px 2px #adadad","-webkit-box-shadow":"2px 2px 2px #adadad","box-shadow":"2px 2px 2px #adadad","font-family":"Arial, Helvetica, sans-serif","font-size":"11px","z-index":900,"visibility":"hidden"}).appendTo(body);_799=function(){_797.remove();_798.remove();};_797.on("click",_799);this.fillMenu(_798);_79e=_798.find(".tile").eq(0);r=_79e.css("right");_79e.css("right","auto");w=_79e.width()+20;_79e.css("right",r);w=Math.max(w,_794);_7a3=$(body).width();w=Math.min(w,_7a3);_798.width(w);_7a0=_798.offset();_7a1=_7a0.left+w;_79f=$(body).offset();_7a2=_79f.left+_7a3;_7a4=_7a1-_7a2;if(_7a4>0){l=_7a0.left-_7a4;l=Math.max(l,0);_798.css("left",l+"px");}_7a6=_792.getVisibleRoom(tab.PointUtil.fromPosition(_793));if(Math.min(_798.outerHeight(),_7a8)>_7a6.roomBelow){_7a7=true;}_7a5=(_7a7?_7a6.roomAbove:_7a6.roomBelow)-20;_7a5=Math.min(_7a5,_7a8);_7a5=Math.max(_7a5,_7a9);_798.css("max-height",_7a5+"px");if(_7a7){if(_7a6.roomAbove>(_7a5-1)){_798.css("top",(_793.top-_798.outerHeight()+1)+"px");}else{_798.css("top",(_793.top-_7a6.roomAbove)+"px");}}_798.css("visibility","visible");},fillMenu:function(_7aa){if(this.parent.oFilter.all||this.parent.oFilter.allNotChecked){_7aa.addClass("CFAll");}else{_7aa.removeClass("CFAll");}if(this.parent.oFilter.exclude){_7aa.addClass("CFExclusive");}else{_7aa.removeClass("CFExclusive");}var _7ab=document.createElement("div");_7aa.html(_7ab);this.fillChecklistElement(_7ab);}});}if(!_4._hasResource["tableau.base.widget.catmode.Dropdown"]){_4._hasResource["tableau.base.widget.catmode.Dropdown"]=true;_4.provide("tableau.base.widget.catmode.Dropdown");_4.declare("tableau.base.widget.catmode.Dropdown",[tableau.base.widget.catmode.BaseMode],{instantiate:function(t,_7ad,_7ae,_7af,_7b0,_7b1){var all=tableau.FilterItem.ALL,_7b3=tableau.format.formatTupleDisplayName,_7b4=tableau.format.formatTupleDisplayFacet,_7b5=tableau.FilterItem.getSelectHTML,i,id,item;this.comboViewModel=new tab.ComboBoxViewModel();this.comboViewModel.set_menuTheme(tab.ComboBoxMenuThemeChoice.dropdown);this.comboViewModel.add_selectedItemChanged(ss.Delegate.create(this,this.onSelection));this.comboView=tab.ObjectRegistry.newView(tab.ComboBoxView,this.comboViewModel);this.currentlySelected=-1;this.multimode=false;_7ae=_7ae||this.parent.oFilter.allChecked;if(this.shouldUseAllItem()&&t.length>0){_7b0=_7b1?_7b0:null;item=new tab.ComboBoxItem(null,all,null,_7b0);this.comboViewModel.addItem(item);if(_7ae){this.comboViewModel.set_selectedItem(item);}}for(i=0;i<t.length;i++){_7b0=_7b1?_7b4(t[i],true,_7af):null;item=new tab.ComboBoxItem(null,_7b3(t[i],true,_7af),{tuple:t[i],index:i},_7b0);this.comboViewModel.addItem(item);if(t[i].s&&!_7ae){if(this.currentlySelected>-1){this.multimode=true;}else{this.currentlySelected=i;this.comboViewModel.set_selectedItem(item);}}}if(this.multimode&&!_7ae){this.comboViewModel.set_summary(tab.Strings.QuickFilterMultipleValues);}else{if(this.currentlySelected===-1&&this.hasSummaryText()){this.comboViewModel.set_summary(this.getSummaryText());}}this.div.appendChild(this.comboView.get_element()[0]);},destroy:function(){_4.forEach(this.connections,_4.disconnect);this.comboViewModel.dispose();this.connections=[];},onSmallSearchUI:function(_7b9,_7ba){if(_7b9){_4.style(this.div,"display","none");_4.style(_7ba,"marginBottom","4px");}else{_4.style(this.div,"display","");}},layout:function(_7bb,_7bc){this.inherited(arguments);var divw=_4.marginBox(this.div).w;if(divw>4){_4.style(this.div.firstChild,"width",(divw-4)+"px");}},onSelection:function(_7be){var data=_7be.get_data(),_7c0=data?data.index:-1,_7c1=this.parent.oFilter.table,_7c2={schema:_7c1.schema,tuples:[]},_7c3,_7c4=[];if(_7c0!==this.currentlySelected){if(_7c0===-1){this.parent.doSelectAll(true);return;}if(_7c0>=_7c1.tuples.length||_7c0<0){return;}_7c1.tuples[_7c0].s=true;_7c2.tuples.push(_7c1.tuples[_7c0]);if(this.multimode||_7c0!==this.currentlySelected){++this.parent.stateId;_7c3=this.parent.oFilter.table.tuples[_7c0].d||this.parent.oFilter.table.tuples[_7c0].t[0].v;_7c4.push(_7c3);tab.FilterClientCommands.setCategoricalFilterValues(this.parent.session.get_sheetName(),this.parent.field,"filter-replace",_7c4);}}}});}if(!_4._hasResource["tableau.base.widget.ui.TypeIn"]){_4._hasResource["tableau.base.widget.ui.TypeIn"]=true;_4.provide("tableau.base.widget.ui.TypeIn");_4.declare("tableau.base.widget.ui.TypeIn",[],{constructor:function(_7c5,_7c6,_7c7){this.div=_7c5;this.doUpdate=_7c6;this.style=_7c7;_4.addClass(this.div,"tableauWidgetUiTypeIn");this.connections=[];},instantiate:function(_7c8,_7c9,_7ca){this.pattern=_7c8;this.fieldname=_7c9;this.dataValue=_7ca;if(this.pattern===undefined){this.pattern="";}this.div.innerHTML="<div id=\"typein_"+tableau.format.escapeHTML(_7c9)+"\" class=\"TypeInDiv\">"+"<span class=\"TypeInQuerySpan\"><input type=\"text\" class=\"QueryBox\" value=\""+tableau.format.escapeHTML(this.pattern)+"\"/></span>"+"<span class=\"goButton\" style=\"display:none\"></span></div>";this.outerDiv=this.div.firstChild;this.querySpan=this.outerDiv.childNodes[0];this.queryBox=this.querySpan.childNodes[0];this.goButton=this.outerDiv.childNodes[1];this.connections.push(_4.connect(this.queryBox,"onkeydown",this,"onKeyDown"));this.connections.push(_4.connect(this.queryBox,"onkeyup",this,"onKeyUp"));this.connections.push(_4.connect(this.queryBox,"onblur",this,"onInputBlur"));this.connections.push(_4.connect(this.queryBox,"onfocus",this,"onQueryBoxFocus"));this.connections.push(_4.connect(this.queryBox,"onclick",this,"onQueryBoxClick"));this.connections.push(_4.connect(this.queryBox,"onmousedown",function(e){e.stopPropagation();}));this.connections.push(_4.connect(this.queryBox,"onmousemove",function(e){e.stopPropagation();}));this.connections.push(_4.connect(this.goButton,"onmousedown",this,"onButtonMouseDown"));this.connections.push(_4.connect(this.goButton,"onclick",this,"onButtonClick"));this.connections.push(_4.connect(this.goButton,"onmouseover",this,"onGoHover"));this.connections.push(_4.connect(this.goButton,"onmouseout",this,"onGoUnhover"));this.connections.push(_4.connect(document.body,"onmousedown",this,function(e){this._mouseDownOutside=this.outerDiv!==e.target&&!tab.DomUtil.isAncestorOf(this.outerDiv,e.target);}));this.connections.push(_4.connect(document.body,"onmouseup",this,function(e){var _7cf=this.outerDiv!==e.target&&!tab.DomUtil.isAncestorOf(this.outerDiv,e.target);if(this._mouseDownOutside&&_7cf){this.setNewPattern();}this._mouseDownOutside=false;}));this.isClickingOnActionButton=false;this.setButtonToProperState();},destroy:function(){_4.forEach(this.connections,_4.disconnect);this.connections=[];},layout:function(){},setNewState:function(_7d0,_7d1,_7d2){this.pattern=_7d0;this.queryBox.value=_7d0;this.dataValue=_7d2;this.setButtonInactive();this.domain=_7d1||[];this.cached_autocomplete="";},shouldEditRawDataValue:function(){return (this.dataValue&&!this.autocomplete);},initializeAutocomplete:function(d,f){this.cached_autocomplete="";this.autocomplete=true;this.domain=d||[];this.autocomplete_func=f;},_setApplyTimer:function(func){this._clearTimeout();this._applyTimer=setTimeout(func,500);},_clearTimeout:function(){if(this._applyTimer){clearTimeout(this._applyTimer);delete this._applyTimer;}},startAutocomplete:function(){var _7d6,_7d7,func,i;if(!this.autocomplete){return;}if(tab.MiscUtil.isNullOrEmpty(this.queryBox.value)){return;}if(this.cached_autocomplete.toLowerCase().indexOf(this.queryBox.value.toLowerCase())===0){this.onAutocompleteDone(this.cached_autocomplete);return;}if(this.domain.length>0){_7d6=this.queryBox.value.toLowerCase();for(i=0,_7d7=this.domain.length;i<_7d7;i++){if(this.domain[i].toLowerCase().indexOf(_7d6)===0){this.onAutocompleteDone(this.domain[i]);return;}}}else{if(this.autocomplete_func){func=_4.hitch(this,this.autocomplete_func,this.queryBox.value,_4.hitch(this,this.onAutocompleteDone),this.fieldname);this._setApplyTimer(func);}}},onAutocompleteDone:function(_7da){var _7db;if(tab.MiscUtil.isNullOrEmpty(_7da)){return;}this.cached_autocomplete=_7da;_7db=this.queryBox.value;this.queryBox.value=_7da;tableau.util.selectText(this.queryBox,_7db.length,_7da.length);},onQueryBoxFocus:function(){this.queryBox.isFocused=true;if(this.shouldEditRawDataValue()){this.queryBox.value=tableau.format.formatDataValueEditable(this.dataValue);this.editingDataValue=true;}},onQueryBoxClick:function(){if(this.queryBox.isFocused){this.queryBox.select();}this.queryBox.isFocused=false;},onGoHover:function(){_4.addClass(this.goButton,"Hover");},onGoUnhover:function(){_4.removeClass(this.goButton,"Hover");},patternIsChanged:function(){if(this.editingDataValue&&this.shouldEditRawDataValue()){return tableau.format.formatDataValueEditable(this.dataValue)!==this.queryBox.value;}else{return this.pattern!==this.queryBox.value;}},setButtonToProperState:function(){var _7dc=(this.style==="TypeIn")?this.patternIsChanged():this.queryBox.value!=="";if(_7dc){this.setButtonActive();}else{this.setButtonInactive();}},setButtonActive:function(){_4.style(this.goButton,"display","");_4.addClass(this.goButton,this.style+"Active");_4.addClass(this.querySpan,"ShortQuerySpan");},setButtonInactive:function(){_4.removeClass(this.querySpan,"ShortQuerySpan");_4.removeClass(this.goButton,this.style+"Active");_4.style(this.goButton,"display","none");},onInputBlur:function(e){this.queryBox.isFocused=false;if(!this.isClickingOnActionButton&&!this.isHittingESC){this.setNewPattern();}this.isHittingESC=false;},onButtonMouseDown:function(e){this.isClickingOnActionButton=true;},onButtonClick:function(e){this.doButtonAction();this.isClickingOnActionButton=false;},handleESC:function(e){this.resetPattern();if(_4.isFF){setTimeout(_4.hitch(this,this.resetPattern),10);}this.setButtonToProperState();_4.stopEvent(e);},onKeyDown:function(e){if(e.keyCode===_4.keys.ESCAPE){this.handleESC(e);}this.keyCode=e.keyCode;},onKeyUp:function(e){var dk=_4.keys;switch(e.keyCode){case dk.ENTER:this._clearTimeout();this.setNewPattern();this.queryBox.blur();_4.stopEvent(e);break;case dk.ESCAPE:this._clearTimeout();this.handleESC(e);this.isHittingESC=true;this.queryBox.blur();break;case dk.BACKSPACE:case dk.DELETE:this._clearTimeout();this.setButtonToProperState();break;case dk.SHIFT:this.setButtonToProperState();break;default:if(this.keyCode===e.keyCode){this.startAutocomplete();this.setButtonToProperState();}break;}},setNewPattern:function(){if(this.patternIsChanged()){this.doUpdate(this.queryBox.value);if(!this.shouldEditRawDataValue()){this.setNewState(this.queryBox.value);}}else{if(this.shouldEditRawDataValue()){this.queryBox.value=this.pattern;}}this.editingDataValue=false;},resetPattern:function(){this.queryBox.value=this.pattern;},doButtonAction:function(){if(this.style==="TypeIn"){this.resetPattern();}else{this.queryBox.value="";this.setNewPattern();}this.setButtonToProperState();}});}if(!_4._hasResource["tableau.base.widget.catmode.Pattern"]){_4._hasResource["tableau.base.widget.catmode.Pattern"]=true;_4.provide("tableau.base.widget.catmode.Pattern");_4.declare("tableau.base.widget.catmode.Pattern",[tableau.base.widget.catmode.BaseMode],{instantiate:function(_7e4,_7e5){this.widget=new tableau.base.widget.ui.TypeIn(this.div,_4.hitch(this,this.doChange),"Pattern");this.widget.instantiate(_7e4,_7e5);},destroy:function(){this.widget.destroy();},layout:function(_7e6,_7e7){this.inherited(arguments);this.widget.layout();},doChange:function(_7e8){++this.parent.stateId;this.parent.session.setPatternFilterState(_7e8,this.parent);this.parent.oFilter.pattern=_7e8;}});}if(!_4._hasResource["tableau.base.widget.catmode.Radiolist"]){_4._hasResource["tableau.base.widget.catmode.Radiolist"]=true;_4.provide("tableau.base.widget.catmode.Radiolist");_4.declare("tableau.base.widget.catmode.Radiolist",[tableau.base.widget.catmode.BaseMode],{instantiate:function(t,_7ea,_7eb,_7ec,_7ed,_7ee){var all=tableau.FilterItem.ALL,_7f0=tableau.FilterItem.radioArray,_7f1=tableau.FilterItem.getRadioHTML,_7f2,_7f3;this.role=_7ec;_7eb=_7eb||this.parent.oFilter.allChecked;if(this.shouldUseAllItem()&&t.length>0){_7f3=_7f1(_7f0,_7ea+"_"+all,_7ea,all,false,_7eb,_7ed,_7ee);this.div.innerHTML=_7f3;}else{_7eb=false;}if(this.parent.attributes.values){_7f2=this.parent.attributes.values;}this.createTiledWidget(t,this.div,_7ea,_7ee,_7eb,_7f2);this.connections.push(_4.connect(this.div,"onclick",this.parent,"onListItemClick"));},createTiledWidget:function(_7f4,div,_7f6,_7f7,_7f8,_7f9){var _7fa,_7fb,ui,box,_7fe,_7ff,_800,_801,_802,_803=this.parent.oFilter.table.actual_size,_804=17;_802=this.parent.oFilter.isTiled?tsConfig.filterTileSize:_803;_4.style(div,"position","relative");_7fa=_803*_804;_7fb=_802?Math.ceil(_803/_802):0;ui=new tab.FilterListUI(div,_7fa,_7fb);box=_4.marginBox(div);_7fe=new tab.ListGridModel(_803,_804,_802,box.h);_7ff=new tab.FilterContentFetcher(this.parent.session,this.parent.field,_7f9);_800=new tab.RadiolistContentFormatter(_7f6,_7f7,_7f8);_801=_7f4.slice(0,_802);this.tiledWidget=new tab.TiledWidget(_7ff,_7fe,ui,_800,_801,false,this.role);},layout:function(_805,_806){this.inherited(arguments);this.tiledWidget.updateViewport(_805.w,_805.h);},destroy:function(){_4.forEach(this.connections,_4.disconnect);this.connections=[];this.tiledWidget.destroy();this.tiledWidget=null;},fetchChildNodeByIndex:function(_807){return this.tiledWidget.getElement(_807);}});}if(!_4._hasResource["dojo.regexp"]){_4._hasResource["dojo.regexp"]=true;_4.provide("dojo.regexp");_4.regexp.escapeString=function(str,_809){return str.replace(/([\.$?*!=:|{}\(\)\[\]\\\/^])/g,function(ch){if(_809&&_809.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};_4.regexp.buildGroupRE=function(arr,re,_80d){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return _4.regexp.group(b.join("|"),_80d);};_4.regexp.group=function(_810,_811){return "("+(_811?"?:":"")+_810+")";};}if(!_4._hasResource["dojo.number"]){_4._hasResource["dojo.number"]=true;_4.provide("dojo.number");_4.number.format=function(_812,_813){_813=_4.mixin({},_813||{});var _814=_4.i18n.normalizeLocale(_813.locale);var _815=_4.i18n.getLocalization("dojo.cldr","number",_814);_813.customs=_815;var _816=_813.pattern||_815[(_813.type||"decimal")+"Format"];if(isNaN(_812)){return null;}return _4.number._applyPattern(_812,_816,_813);};_4.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;_4.number._applyPattern=function(_817,_818,_819){_819=_819||{};var _81a=_819.customs.group;var _81b=_819.customs.decimal;var _81c=_818.split(";");var _81d=_81c[0];_818=_81c[(_817<0)?1:0]||("-"+_81d);if(_818.indexOf("%")!=-1){_817*=100;}else{if(_818.indexOf("")!=-1){_817*=1000;}else{if(_818.indexOf("")!=-1){_81a=_819.customs.currencyGroup||_81a;_81b=_819.customs.currencyDecimal||_81b;_818=_818.replace(/\u00a4{1,3}/,function(_81e){var prop=["symbol","currency","displayName"][_81e.length-1];return _819[prop]||_819.currency||"";});}else{if(_818.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _820=_4.number._numberPatternRE;var _821=_81d.match(_820);if(!_821){throw new Error("unable to find a number expression in pattern: "+_818);}if(_819.fractional===false){_819.places=0;}return _818.replace(_820,_4.number._formatAbsolute(_817,_821[0],{decimal:_81b,group:_81a,places:_819.places,round:_819.round}));};_4.number.round=function(_822,_823,_824){var _825=String(_822).split(".");var _826=(_825[1]&&_825[1].length)||0;if(_826>_823){var _827=Math.pow(10,_823);if(_824>0){_827*=10/_824;_823++;}_822=Math.round(_822*_827)/_827;_825=String(_822).split(".");_826=(_825[1]&&_825[1].length)||0;if(_826>_823){_825[1]=_825[1].substr(0,_823);_822=Number(_825.join("."));}}return _822;};_4.number._formatAbsolute=function(_828,_829,_82a){_82a=_82a||{};if(_82a.places===true){_82a.places=0;}if(_82a.places===Infinity){_82a.places=6;}var _82b=_829.split(".");var _82c=(_82a.places>=0)?_82a.places:(_82b[1]&&_82b[1].length)||0;if(!(_82a.round<0)){_828=_4.number.round(_828,_82c,_82a.round);}var _82d=String(Math.abs(_828)).split(".");var _82e=_82d[1]||"";if(_82a.places){var _82f=_4.isString(_82a.places)&&_82a.places.indexOf(",");if(_82f){_82a.places=_82a.places.substring(_82f+1);}_82d[1]=_4.string.pad(_82e.substr(0,_82a.places),_82a.places,"0",true);}else{if(_82b[1]&&_82a.places!==0){var pad=_82b[1].lastIndexOf("0")+1;if(pad>_82e.length){_82d[1]=_4.string.pad(_82e,pad,"0",true);}var _831=_82b[1].length;if(_831<_82e.length){_82d[1]=_82e.substr(0,_831);}}else{if(_82d[1]){_82d.pop();}}}var _832=_82b[0].replace(",","");pad=_832.indexOf("0");if(pad!=-1){pad=_832.length-pad;if(pad>_82d[0].length){_82d[0]=_4.string.pad(_82d[0],pad);}if(_832.indexOf("#")==-1){_82d[0]=_82d[0].substr(_82d[0].length-pad);}}var _833=_82b[0].lastIndexOf(",");var _834,_835;if(_833!=-1){_834=_82b[0].length-_833-1;var _836=_82b[0].substr(0,_833);_833=_836.lastIndexOf(",");if(_833!=-1){_835=_836.length-_833-1;}}var _837=[];for(var _838=_82d[0];_838;){var off=_838.length-_834;_837.push((off>0)?_838.substr(off):_838);_838=(off>0)?_838.slice(0,off):"";if(_835){_834=_835;delete _835;}}_82d[0]=_837.reverse().join(_82a.group||",");return _82d.join(_82a.decimal||".");};_4.number.regexp=function(_83a){return _4.number._parseInfo(_83a).regexp;};_4.number._parseInfo=function(_83b){_83b=_83b||{};var _83c=_4.i18n.normalizeLocale(_83b.locale);var _83d=_4.i18n.getLocalization("dojo.cldr","number",_83c);var _83e=_83b.pattern||_83d[(_83b.type||"decimal")+"Format"];var _83f=_83d.group;var _840=_83d.decimal;var _841=1;if(_83e.indexOf("%")!=-1){_841/=100;}else{if(_83e.indexOf("")!=-1){_841/=1000;}else{var _842=_83e.indexOf("")!=-1;if(_842){_83f=_83d.currencyGroup||_83f;_840=_83d.currencyDecimal||_840;}}}var _843=_83e.split(";");if(_843.length==1){_843.push("-"+_843[0]);}var re=_4.regexp.buildGroupRE(_843,function(_845){_845="(?:"+_4.regexp.escapeString(_845,".")+")";return _845.replace(_4.number._numberPatternRE,function(_846){var _847={signed:false,separator:_83b.strict?_83f:[_83f,""],fractional:_83b.fractional,decimal:_840,exponent:false};var _848=_846.split(".");var _849=_83b.places;if(_848.length==1||_849===0){_847.fractional=false;}else{if(_849===undefined){_849=_83b.pattern?_848[1].lastIndexOf("0")+1:Infinity;}if(_849&&_83b.fractional==undefined){_847.fractional=true;}if(!_83b.places&&(_849<_848[1].length)){_849+=","+_848[1].length;}_847.places=_849;}var _84a=_848[0].split(",");if(_84a.length>1){_847.groupSize=_84a.pop().length;if(_84a.length>1){_847.groupSize2=_84a.pop().length;}}return "("+_4.number._realNumberRegexp(_847)+")";});},true);if(_842){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_84b,_84c,_84d,_84e){var prop=["symbol","currency","displayName"][_84d.length-1];var _850=_4.regexp.escapeString(_83b[prop]||_83b.currency||"");_84c=_84c?"[\\s\\xa0]":"";_84e=_84e?"[\\s\\xa0]":"";if(!_83b.strict){if(_84c){_84c+="*";}if(_84e){_84e+="*";}return "(?:"+_84c+_850+_84e+")?";}return _84c+_850+_84e;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_83f,decimal:_840,factor:_841};};_4.number.parse=function(_851,_852){var info=_4.number._parseInfo(_852);var _854=(new RegExp("^"+info.regexp+"$")).exec(_851);if(!_854){return NaN;}var _855=_854[1];if(!_854[1]){if(!_854[2]){return NaN;}_855=_854[2];info.factor*=-1;}_855=_855.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return Number(_855)*info.factor;};_4.number._realNumberRegexp=function(_856){_856=_856||{};if(!("places" in _856)){_856.places=Infinity;}if(typeof _856.decimal!="string"){_856.decimal=".";}if(!("fractional" in _856)||/^0/.test(_856.places)){_856.fractional=[true,false];}if(!("exponent" in _856)){_856.exponent=[true,false];}if(!("eSigned" in _856)){_856.eSigned=[true,false];}var _857=_4.number._integerRegexp(_856);var _858=_4.regexp.buildGroupRE(_856.fractional,function(q){var re="";if(q&&(_856.places!==0)){re="\\"+_856.decimal;if(_856.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_856.places+"}";}}return re;},true);var _85b=_4.regexp.buildGroupRE(_856.exponent,function(q){if(q){return "([eE]"+_4.number._integerRegexp({signed:_856.eSigned})+")";}return "";});var _85d=_857+_858;if(_858){_85d="(?:(?:"+_85d+")|(?:"+_858+"))";}return _85d+_85b;};_4.number._integerRegexp=function(_85e){_85e=_85e||{};if(!("signed" in _85e)){_85e.signed=[true,false];}if(!("separator" in _85e)){_85e.separator="";}else{if(!("groupSize" in _85e)){_85e.groupSize=3;}}var _85f=_4.regexp.buildGroupRE(_85e.signed,function(q){return q?"[-+]":"";},true);var _861=_4.regexp.buildGroupRE(_85e.separator,function(sep){if(!sep){return "(?:0|[1-9]\\d*)";}sep=_4.regexp.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==""){sep="\\s\\xa0";}}var grp=_85e.groupSize,grp2=_85e.groupSize2;if(grp2){var _865="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_865+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_865;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _85f+_861;};}if(!_4._hasResource["dijit.form.Slider"]){_4._hasResource["dijit.form.Slider"]=true;_4.provide("dijit.form.Slider");_4.declare("dijit.form.HorizontalSlider",[_5.form._FormValueWidget,_5._Container],{templateString:"<table class=\"dijit dijitReset dijitSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress\"\r\n\t><tr class=\"dijitReset\"\r\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\r\n\t\t><td dojoAttachPoint=\"containerNode,topDecoration\" class=\"dijitReset\" style=\"text-align:center;width:100%;\"></td\r\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\r\n\t></tr\r\n\t><tr class=\"dijitReset\"\r\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\"\r\n\t\t\t><div class=\"dijitSliderDecrementIconH\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\r\n\t\t></td\r\n\t\t><td class=\"dijitReset\"\r\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper\" dojoAttachEvent=\"onclick:_onClkDecBumper\"></div\r\n\t\t></td\r\n\t\t><td class=\"dijitReset\"\r\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" name=\"${name}\"\r\n\t\t\t/><div class=\"dijitReset dijitSliderBarContainerH\" waiRole=\"presentation\" dojoAttachPoint=\"sliderBarContainer\"\r\n\t\t\t\t><div waiRole=\"presentation\" dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" dojoAttachEvent=\"onclick:_onBarClick\"\r\n\t\t\t\t\t><div class=\"dijitSliderMoveable dijitSliderMoveableH\" \r\n\t\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" dojoAttachEvent=\"onmousedown:_onHandleClick\" waiRole=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"></div\r\n\t\t\t\t\t></div\r\n\t\t\t\t></div\r\n\t\t\t\t><div waiRole=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" dojoAttachEvent=\"onclick:_onBarClick\"></div\r\n\t\t\t></div\r\n\t\t></td\r\n\t\t><td class=\"dijitReset\"\r\n\t\t\t><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper\" dojoAttachEvent=\"onclick:_onClkIncBumper\"></div\r\n\t\t></td\r\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH\" style=\"right:0px;\"\r\n\t\t\t><div class=\"dijitSliderIncrementIconH\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\r\n\t\t></td\r\n\t></tr\r\n\t><tr class=\"dijitReset\"\r\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\r\n\t\t><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset\" style=\"text-align:center;\"></td\r\n\t\t><td class=\"dijitReset\" colspan=\"2\"></td\r\n\t></tr\r\n></table>\r\n",value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:_5.defaultDuration,widgetsInTemplate:true,attributeMap:_4.mixin(_4.clone(_5.form._FormWidget.prototype.attributeMap),{id:"",name:"valueNode"}),baseClass:"dijitSlider",_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_startingPixelCount:"l",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyPress:function(e){if(this.disabled||this.readOnly||e.altKey||e.ctrlKey){return;}switch(e.charOrCode){case _4.keys.HOME:this._setValueAttr(this.minimum,true);break;case _4.keys.END:this._setValueAttr(this.maximum,true);break;case ((this._descending||this.isLeftToRight())?_4.keys.RIGHT_ARROW:_4.keys.LEFT_ARROW):case (this._descending===false?_4.keys.DOWN_ARROW:_4.keys.UP_ARROW):case (this._descending===false?_4.keys.PAGE_DOWN:_4.keys.PAGE_UP):this.increment(e);break;case ((this._descending||this.isLeftToRight())?_4.keys.LEFT_ARROW:_4.keys.RIGHT_ARROW):case (this._descending===false?_4.keys.UP_ARROW:_4.keys.DOWN_ARROW):case (this._descending===false?_4.keys.PAGE_UP:_4.keys.PAGE_DOWN):this.decrement(e);break;default:this.inherited(arguments);return;}_4.stopEvent(e);},_onHandleClick:function(e){if(this.disabled||this.readOnly){return;}if(!_4.isIE){_5.focus(this.sliderHandle);}_4.stopEvent(e);},_isReversed:function(){return !this.isLeftToRight();},_onBarClick:function(e){if(this.disabled||this.readOnly||!this.clickSelect){return;}_5.focus(this.sliderHandle);_4.stopEvent(e);var _869=_4.coords(this.sliderBarContainer,true);var _86a=e[this._mousePixelCoord]-_869[this._startingPixelCoord];this._setPixelValue(this._isReversed()?(_869[this._pixelCount]-_86a):_86a,_869[this._pixelCount],true);},_setPixelValue:function(_86b,_86c,_86d){if(this.disabled||this.readOnly){return;}_86b=_86b<0?0:_86c<_86b?_86c:_86b;var _86e=this.discreteValues;if(_86e==Infinity){_86e=_86c;}_86e--;if(_86e<1){_86e=1;}var _86f=_86c/_86e;var _870=Math.round(_86b/_86f);this._setValueAttr((this.maximum-this.minimum)*_870/_86e+this.minimum,_86d);},_setValueAttr:function(_871,_872){if(isNaN(_871)){_871=0;}this.valueNode.value=this.value=_871;_5.setWaiState(this.focusNode,"valuenow",_871);this.inherited(arguments);var _873=(this.maximum==this.minimum)?0:((_871-this.minimum)/(this.maximum-this.minimum));var _874=(this._descending===false)?this.remainingBar:this.progressBar;var _875=(this._descending===false)?this.progressBar:this.remainingBar;if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}if(_872&&this.slideDuration>0&&_874.style[this._progressPixelSize]){var _876=this;var _877={};var _878=parseFloat(_874.style[this._progressPixelSize]);var _879=this.slideDuration*(_873-_878/100);if(_879==0){return;}if(_879<0){_879=0-_879;}_877[this._progressPixelSize]={start:_878,end:_873*100,units:"%"};this._inProgressAnim=_4.animateProperty({node:_874,duration:_879,onAnimate:function(v){_875.style[_876._progressPixelSize]=(100-parseFloat(v[_876._progressPixelSize]))+"%";},onEnd:function(){delete _876._inProgressAnim;},properties:_877});this._inProgressAnim.play();}else{_874.style[this._progressPixelSize]=(_873*100)+"%";_875.style[this._progressPixelSize]=((1-_873)*100)+"%";}},_bumpValue:function(_87b){if(this.disabled||this.readOnly){return;}var s=_4.getComputedStyle(this.sliderBarContainer);var c=_4._getContentBox(this.sliderBarContainer,s);var _87e=this.discreteValues;if(_87e==Infinity){_87e=c[this._pixelCount];}_87e--;var _87f=0;if(this.maximum!=this.minimum){_87f=(this.value-this.minimum)*_87e/(this.maximum-this.minimum)+_87b;}if(_87f<0){_87f=0;}if(_87f>_87e){_87f=_87e;}_87f=_87f*(this.maximum-this.minimum)/_87e+this.minimum;this._setValueAttr(_87f,true);},_onClkIncBumper:function(){this._setValueAttr(this._descending===false?this.minimum:this.maximum,true);},_onClkDecBumper:function(){this._setValueAttr(this._descending===false?this.maximum:this.minimum,true);},decrement:function(e){this._bumpValue(e.charOrCode==_4.keys.PAGE_DOWN?-this.pageIncrement:-1);},increment:function(e){this._bumpValue(e.charOrCode==_4.keys.PAGE_UP?this.pageIncrement:1);},_mouseWheeled:function(evt){_4.stopEvent(evt);var _883=!_4.isMozilla;var _884=evt[(_883?"wheelDelta":"detail")]*(_883?1:-1);this[(_884<0?"decrement":"increment")](evt);},startup:function(){_4.forEach(this.getChildren(),function(_885){if(this[_885.container]!=this.containerNode){this[_885.container].appendChild(_885.domNode);}},this);},_typematicCallback:function(_886,_887,e){if(_886==-1){return;}this[(_887==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);},postCreate:function(){if(this.showButtons){this.incrementButton.style.display="";this.decrementButton.style.display="";this._connects.push(_5.typematic.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500));this._connects.push(_5.typematic.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));}this.connect(this.domNode,!_4.isMozilla?"onmousewheel":"DOMMouseScroll","_mouseWheeled");var _889=this;var _88a=function(){_5.form._SliderMover.apply(this,arguments);this.widget=_889;};_4.extend(_88a,_5.form._SliderMover.prototype);this._movable=new _4.dnd.Moveable(this.sliderHandle,{mover:_88a});var _88b=_4.query("label[for=\""+this.id+"\"]");if(_88b.length){_88b[0].id=(this.id+"_label");_5.setWaiState(this.focusNode,"labelledby",_88b[0].id);}_5.setWaiState(this.focusNode,"valuemin",this.minimum);_5.setWaiState(this.focusNode,"valuemax",this.maximum);this.inherited(arguments);},destroy:function(){this._movable.destroy();if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){this._inProgressAnim.stop(true);}this.inherited(arguments);}});_4.declare("dijit.form.VerticalSlider",_5.form.HorizontalSlider,{templateString:"<table class=\"dijitReset dijitSlider\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress\"\r\n><tbody class=\"dijitReset\"\r\n\t><tr class=\"dijitReset\"\r\n\t\t><td class=\"dijitReset\"></td\r\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\r\n\t\t\t><div class=\"dijitSliderIncrementIconV\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"><span class=\"dijitSliderButtonInner\">+</span></div\r\n\t\t></td\r\n\t\t><td class=\"dijitReset\"></td\r\n\t></tr\r\n\t><tr class=\"dijitReset\"\r\n\t\t><td class=\"dijitReset\"></td\r\n\t\t><td class=\"dijitReset\"\r\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderTopBumper dijitSliderTopBumper\" dojoAttachEvent=\"onclick:_onClkIncBumper\"></div></center\r\n\t\t></td\r\n\t\t><td class=\"dijitReset\"></td\r\n\t></tr\r\n\t><tr class=\"dijitReset\"\r\n\t\t><td dojoAttachPoint=\"leftDecoration\" class=\"dijitReset\" style=\"text-align:center;height:100%;\"></td\r\n\t\t><td class=\"dijitReset\" style=\"height:100%;\"\r\n\t\t\t><input dojoAttachPoint=\"valueNode\" type=\"hidden\" name=\"${name}\"\r\n\t\t\t/><center class=\"dijitReset dijitSliderBarContainerV\" waiRole=\"presentation\" dojoAttachPoint=\"sliderBarContainer\"\r\n\t\t\t\t><div waiRole=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderRemainingBar dijitSliderRemainingBarV\" dojoAttachEvent=\"onclick:_onBarClick\"><!--#5629--></div\r\n\t\t\t\t><div waiRole=\"presentation\" dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitSliderBarV dijitSliderProgressBar dijitSliderProgressBarV\" dojoAttachEvent=\"onclick:_onBarClick\"\r\n\t\t\t\t\t><div class=\"dijitSliderMoveable\" style=\"vertical-align:top;\" \r\n\t\t\t\t\t\t><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleV\" dojoAttachEvent=\"onmousedown:_onHandleClick\" waiRole=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"></div\r\n\t\t\t\t\t></div\r\n\t\t\t\t></div\r\n\t\t\t></center\r\n\t\t></td\r\n\t\t><td dojoAttachPoint=\"containerNode,rightDecoration\" class=\"dijitReset\" style=\"text-align:center;height:100%;\"></td\r\n\t></tr\r\n\t><tr class=\"dijitReset\"\r\n\t\t><td class=\"dijitReset\"></td\r\n\t\t><td class=\"dijitReset\"\r\n\t\t\t><center><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperV dijitSliderBottomBumper dijitSliderBottomBumper\" dojoAttachEvent=\"onclick:_onClkDecBumper\"></div></center\r\n\t\t></td\r\n\t\t><td class=\"dijitReset\"></td\r\n\t></tr\r\n\t><tr class=\"dijitReset\"\r\n\t\t><td class=\"dijitReset\"></td\r\n\t\t><td class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerV\"\r\n\t\t\t><div class=\"dijitSliderDecrementIconV\" tabIndex=\"-1\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"><span class=\"dijitSliderButtonInner\">-</span></div\r\n\t\t></td\r\n\t\t><td class=\"dijitReset\"></td\r\n\t></tr\r\n></tbody></table>\r\n",_mousePixelCoord:"pageY",_pixelCount:"h",_startingPixelCoord:"y",_startingPixelCount:"t",_handleOffsetCoord:"top",_progressPixelSize:"height",_descending:true,startup:function(){if(this._started){return;}if(!this.isLeftToRight()&&_4.isMoz){if(this.leftDecoration){this._rtlRectify(this.leftDecoration);}if(this.rightDecoration){this._rtlRectify(this.rightDecoration);}}this.inherited(arguments);},_isReversed:function(){return this._descending;},_rtlRectify:function(_88c){var _88d=[];while(_88c.firstChild){_88d.push(_88c.firstChild);_88c.removeChild(_88c.firstChild);}for(var i=_88d.length-1;i>=0;i--){if(_88d[i]){_88c.appendChild(_88d[i]);}}}});_4.declare("dijit.form._SliderMover",_4.dnd.Mover,{onMouseMove:function(e){var _890=this.widget;var _891=_890._abspos;if(!_891){_891=_890._abspos=_4.coords(_890.sliderBarContainer,true);_890._setPixelValue_=_4.hitch(_890,"_setPixelValue");_890._isReversed_=_890._isReversed();}var _892=e[_890._mousePixelCoord]-_891[_890._startingPixelCoord];_890._setPixelValue_(_890._isReversed_?(_891[_890._pixelCount]-_892):_892,_891[_890._pixelCount],false);},destroy:function(e){_4.dnd.Mover.prototype.destroy.apply(this,arguments);var _894=this.widget;_894._abspos=null;_894._setValueAttr(_894.value,true);}});_4.declare("dijit.form.HorizontalRule",[_5._Widget,_5._Templated],{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerH\"></div>",count:3,container:"containerNode",ruleStyle:"",_positionPrefix:"<div class=\"dijitRuleMark dijitRuleMarkH\" style=\"left:",_positionSuffix:"%;",_suffix:"\"></div>",_genHTML:function(pos,ndx){return this._positionPrefix+pos+this._positionSuffix+this.ruleStyle+this._suffix;},_isHorizontal:true,postCreate:function(){var _897;if(this.count==1){_897=this._genHTML(50,0);}else{var i;var _899=100/(this.count-1);if(!this._isHorizontal||this.isLeftToRight()){_897=this._genHTML(0,0);for(i=1;i<this.count-1;i++){_897+=this._genHTML(_899*i,i);}_897+=this._genHTML(100,this.count-1);}else{_897=this._genHTML(100,0);for(i=1;i<this.count-1;i++){_897+=this._genHTML(100-_899*i,i);}_897+=this._genHTML(0,this.count-1);}}this.domNode.innerHTML=_897;}});_4.declare("dijit.form.VerticalRule",_5.form.HorizontalRule,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerV\"></div>",_positionPrefix:"<div class=\"dijitRuleMark dijitRuleMarkV\" style=\"top:",_isHorizontal:false});_4.declare("dijit.form.HorizontalRuleLabels",_5.form.HorizontalRule,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerH dijitRuleLabelsContainer dijitRuleLabelsContainerH\"></div>",labelStyle:"",labels:[],numericMargin:0,minimum:0,maximum:1,constraints:{pattern:"#%"},_positionPrefix:"<div class=\"dijitRuleLabelContainer dijitRuleLabelContainerH\" style=\"left:",_labelPrefix:"\"><span class=\"dijitRuleLabel dijitRuleLabelH\">",_suffix:"</span></div>",_calcPosition:function(pos){return pos;},_genHTML:function(pos,ndx){return this._positionPrefix+this._calcPosition(pos)+this._positionSuffix+this.labelStyle+this._labelPrefix+this.labels[ndx]+this._suffix;},getLabels:function(){var _89d=this.labels;if(!_89d.length){_89d=_4.query("> li",this.srcNodeRef).map(function(node){return String(node.innerHTML);});}this.srcNodeRef.innerHTML="";if(!_89d.length&&this.count>1){var _89f=this.minimum;var inc=(this.maximum-_89f)/(this.count-1);for(var i=0;i<this.count;i++){_89d.push((i<this.numericMargin||i>=(this.count-this.numericMargin))?"":_4.number.format(_89f,this.constraints));_89f+=inc;}}return _89d;},postMixInProperties:function(){this.inherited(arguments);this.labels=this.getLabels();this.count=this.labels.length;}});_4.declare("dijit.form.VerticalRuleLabels",_5.form.HorizontalRuleLabels,{templateString:"<div class=\"dijitRuleContainer dijitRuleContainerV dijitRuleLabelsContainer dijitRuleLabelsContainerV\"></div>",_positionPrefix:"<div class=\"dijitRuleLabelContainer dijitRuleLabelContainerV\" style=\"top:",_labelPrefix:"\"><span class=\"dijitRuleLabel dijitRuleLabelV\">",_calcPosition:function(pos){return 100-pos;},_isHorizontal:false});}if(!_4._hasResource["tableau.base.widget.ui.Slider"]){_4._hasResource["tableau.base.widget.ui.Slider"]=true;_4.provide("tableau.base.widget.ui.Slider");_4.declare("tableau.base.widget.ui.Slider",[],{styleid:null,sliderRules:null,timer:null,ATTR_READOUT:["show-readout","hide-readout"],ATTR_SLIDER:["show-slider","hide-slider"],ATTR_ARROWS:["show-step-btns","hide-buttons"],ATTR_TICKS:["show-ticks","hide-ticks"],shouldShow:function(_8a3){return (this.attributes[_8a3[0]]!=="false"&&this.attributes[_8a3[1]]!=="true");},constructor:function(_8a4,_8a5,_8a6,_8a7,_8a8,_8a9,_8aa,_8ab,_8ac){this.div=_8a4;this.attributes=_8a5;this.isAll=_8a6;this.doUpdate=_8a7;this.getTitleOffset=_8a8;this.getCurrentText=_8a9;this.onIntermediateChange=_8aa;this.getCurrentFacet=_8ab;this.showFacets=_8ac;_4.addClass(this.div,"tableauWidgetUiSlider");this.connections=[];this.currentlySelected=-1;},calculate_styleid:function(){this.styleid=0;if(!this.shouldShow(this.ATTR_READOUT)){this.styleid+=4;}if(!this.shouldShow(this.ATTR_SLIDER)){this.styleid+=2;}if(!this.shouldShow(this.ATTR_ARROWS)){this.styleid+=1;}if(this.styleid>5){this.styleid=3;}},destroy:function(){_4.unsubscribe(this._start_sub);_4.unsubscribe(this._stop_sub);_4.forEach(this.connections,_4.disconnect);this.killTimer();this.connections=[];if(this._tooltip){this._tooltip.domNode.parentNode.removeChild(this._tooltip.domNode);this._tooltip=null;}if(this.slider&&this.slider.destroy){this.slider.destroy();}if(this.sliderRules&&this.sliderRules.destroy){this.sliderRules.destroy();}},instantiateFromDomain:function(_8ad,_8ae){var i,len,_8b1=[];for(i=0,len=_8ad.length;i<len;i++){_8b1[i]={d:_8ad[i],s:(_8ae===_8ad[i])};}this.instantiateFromTuples(_8b1);},instantiateFromTuples:function(t,text){var _8b4=-1,i,len,_8b7=tab.Strings.QuickFilterUnknown,_8b8;if(t.length>0){for(i=0,len=t.length;i<len;i++){if(t[i].s===true&&!this.isAll){if(_8b4>-1){_8b7=tab.Strings.QuickFilterMultipleValues;}else{_8b4=i;_8b7=this.getCurrentText(i);}}}}if(_8b4<0){_8b4=0;if(text!==undefined){_8b7=text;}}if(this.showFacets){_8b8=this.getCurrentFacet(_8b4);}this.instantiate(t.length,_8b4,_8b7,_8b8);},instantiate:function(_8b9,_8ba,_8bb,_8bc){var _8bd,_8be,_8bf,_8c0,_8c1;this.currentlySelected=_8ba;this.calculate_styleid();if(this.shouldShow(this.ATTR_READOUT)){this.readout=document.createElement("div");_4.addClass(this.readout,"sliderTextReadout");this.textDiv=document.createElement("div");_4.addClass(this.textDiv,"sliderText");this.textDiv.innerHTML=tableau.format.escapeHTML(_8bb);if(this.showFacets){this.facetDiv=document.createElement("div");_4.addClass(this.facetDiv,"facet");this.facetDiv.innerHTML=tableau.format.escapeHTML(_8bc);this.readout.appendChild(this.facetDiv);}this.readout.appendChild(this.textDiv);this.div.appendChild(this.readout);}if(this.styleid===3){return;}_8bf=document.createElement("div");if(this.shouldShow(this.ATTR_SLIDER)){_8bd=document.createElement("div");_8bf.appendChild(_8bd);}this.div.appendChild(_8bf);if(_8b9<1){_8b9=1;}this.isContinuous=(_8b9===Infinity);if(this.shouldShow(this.ATTR_SLIDER)&&_8b9<1200&&(this.div.width/_8b9)>=4&&this.shouldShow(this.ATTR_TICKS)){_8be={count:_8b9};this.sliderRules=new _5.form.HorizontalRule(_8be,_8bd);}_8c0={templateString:"<div class=\"dijit dijitReset\"\r\n    ><div class=\"dijitReset tableauSlider\" dojoAttachPoint=\"tableauSlider\"\r\n        ><table class=\"dijit dijitReset\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" rules=\"none\" dojoAttachEvent=\"onkeypress:_onKeyPress\"\r\n            ><tr class=\"dijitReset\"\r\n                ><td class=\"dijitReset\"></td\r\n                ><td dojoAttachPoint=\"containerNode,topDecoration\" class=\"dijitReset\" style=\"text-align:center;width:100%;\"></td\r\n                ><td class=\"dijitReset\"></td\r\n            ></tr\r\n            ><tr class=\"dijitReset\"\r\n                ><td class=\"dijitReset\"\r\n                    ><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper\" dojoAttachEvent=\"onclick:_onClkDecBumper\"></div\r\n                ></td\r\n                ><td class=\"dijitReset\"\r\n                    ><input dojoAttachPoint=\"valueNode\" type=\"hidden\" name=\"${name}\"\r\n                    /><div class=\"dijitReset dijitSliderBarContainerH\" waiRole=\"presentation\" dojoAttachPoint=\"sliderBarContainer\"\r\n                        ><div waiRole=\"presentation\" dojoAttachPoint=\"progressBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH\" dojoAttachEvent=\"onclick:_onBarClick\"\r\n                            ><div class=\"dijitSliderMoveable dijitSliderMoveableH\"\r\n                                ><div dojoAttachPoint=\"sliderHandle,focusNode\" class=\"dijitSliderImageHandle dijitSliderImageHandleH\" dojoAttachEvent=\"onmousedown:_onHandleClick\" waiRole=\"slider\" valuemin=\"${minimum}\" valuemax=\"${maximum}\"></div\r\n                            ></div\r\n                        ></div\r\n                        ><div waiRole=\"presentation\" dojoAttachPoint=\"remainingBar\" class=\"dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH\" dojoAttachEvent=\"onclick:_onBarClick\"></div\r\n                    ></div\r\n                ></td\r\n                ><td class=\"dijitReset\"\r\n                    ><div class=\"dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper\" dojoAttachEvent=\"onclick:_onClkIncBumper\"></div\r\n                ></td\r\n            ></tr\r\n            ><tr class=\"dijitReset\"\r\n                ><td class=\"dijitReset\"></td\r\n                ><td dojoAttachPoint=\"containerNode,bottomDecoration\" class=\"dijitReset\"></td\r\n                ><td class=\"dijitReset\"></td\r\n            ></tr\r\n        ></table\r\n    ></div\r\n    ><div class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowDec\" style=\"display:none\" dojoAttachPoint=\"decrementButton\"\r\n        ><div class=\"dijitSliderDecrementIconH\" tabIndex=\"-1\"\r\n            ><span class=\"dijitSliderButtonInner\">-</span\r\n        ></div\r\n    ></div\r\n    ><div class=\"dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowInc\" style=\"display:none\" dojoAttachPoint=\"incrementButton\"\r\n        ><div class=\"dijitSliderIncrementIconH\" tabIndex=\"-1\"\r\n            ><span class=\"dijitSliderButtonInner\">+</span\r\n        ></div\r\n    ></div\r\n></div>\r\n",onChange:_4.hitch(this,"applyChanges"),value:this.currentlySelected,slideDuration:0,intermediateChanges:true,showButtons:this.shouldShow(this.ATTR_ARROWS),pageIncrement:1};if(_8b9!==Infinity){_8c0.minimum=0;_8c0.maximum=_8b9-1;_8c0.discreteValues=_8b9;}this.slider=new _5.form.HorizontalSlider(_8c0,_8bf);this._start_sub=_4.subscribe("/dnd/move/start",this,"startDrag");this._stop_sub=_4.subscribe("/dnd/move/stop",this,"stopDrag");this.slider.startup();if(this.sliderRules){this.sliderRules.startup();}this.shouldShowTooltip=false;if(!this.shouldShow(this.ATTR_READOUT)){this.tooltipDiv=document.createElement("div");this.slider.sliderHandle.appendChild(this.tooltipDiv);_8c1=_5._MasterTooltip.prototype;_8c1.templateString="<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\">\r\n  <div class=\"dijitTooltipContainer\" dojoAttachpoint=\"coreArea\">\r\n    <div class=\"dijitTooltipContents\" dojoAttachPoint=\"containerNode\" waiRole='alert'></div></div>\r\n  <div class=\"dijitTooltipConnector\"></div>\r\n</div>\r\n";this._tooltip=new _5._MasterTooltip();this._tooltip.DOJO_orient=this._tooltip.orient;this._tooltip.orient=_4.hitch(this._tooltip,function(){this.DOJO_orient.apply(this,arguments);_4.addClass(this.domNode,"sliderThumbTooltip");});this.connections.push(_4.connect(this.slider.sliderHandle,"onmouseover",this,"onOverThumb"));this.connections.push(_4.connect(this.slider.sliderHandle,"onmouseout",this,"onOutThumb"));}this.leftButton=this.slider.decrementButton.childNodes[0];this.rightButton=this.slider.incrementButton.childNodes[0];this.updateButtons();this.initial_layout();},updateButtons:function(){this.setButtonState(this.leftButton,"Left",this.currentlySelected===0);this.setButtonState(this.rightButton,"Right",this.currentlySelected===this.slider.maximum);},setButtonState:function(_8c2,pos,_8c4){_4.removeClass(_8c2,"cp"+pos+"Arrow"+(_8c4?"Black":"Grey"));_4.addClass(_8c2,"cp"+pos+"Arrow"+(_8c4?"Grey":"Black"));},refreshSliderMarksForIE:function(){if(_4.isIE<=7){if(this.sliderRules){this.sliderRules.domNode.className=this.sliderRules.domNode.className+" ";}}},setNewState:function(_8c5){this.currentlySelected=_8c5;this.slider._setValueAttr(this.currentlySelected);this.refreshSliderMarksForIE();},startDrag:function(_8c6){if(_8c6&&_8c6.node===this.slider.sliderHandle){this._isDragging=true;if(this.timer){this.killTimer();}}},stopDrag:function(_8c7){if(_8c7&&_8c7.node===this.slider.sliderHandle){this._isDragging=false;if(this.timer){this.killTimer();}this.setTimer();this.doThumbTooltip();}},onOverThumb:function(e){if(!this.shouldShow(this.ATTR_READOUT)){if(this.tooltipTimer){clearTimeout(this.tooltipTimer);delete this.tooltipTimer;}this.shouldShowTooltip=true;this.tooltipTimer=setTimeout(_4.hitch(this,this.doThumbTooltip),50);}},onOutThumb:function(e){if(this.tooltipTimer){clearTimeout(this.tooltipTimer);delete this.tooltipTimer;}if(this._tooltip){this._tooltip.hide(this.tooltipDiv);}this.shouldShowTooltip=false;},doThumbTooltip:function(){var _8ca,text;if(!this.shouldShow(this.ATTR_READOUT)){this._tooltip.hide(this.tooltipDiv);if(this.shouldShowTooltip||this._isDragging){_8ca=(this._current_index)?this._current_index:this.currentlySelected;text=this.getCurrentText(_8ca);this._tooltip.show(text,this.tooltipDiv,["above","below"]);}}},getRealIndex:function(_8cc){var _8cd;if(_8cc===undefined||isNaN(_8cc)){return 0;}if(this.isContinuous){_8cd=_8cc;}else{_8cd=parseInt(_8cc,10);}if(_8cd<0){_8cd=0;}return _8cd;},updateViz:function(){if(this._current_index===undefined||this.currentlySelected===undefined||this._current_index===this.currentlySelected){return;}var _8ce=this.getRealIndex(this._current_index);if(this.doUpdate){this.doUpdate(_8ce);}this.currentlySelected=this._current_index=_8ce;this.updateButtons();},updateReadout:function(text,_8d0){if(this.styleid<4){this.textDiv.innerHTML=text;if(this.showFacets){this.facetDiv.innerHTML=_8d0;}}},applyChanges:function(_8d1){if(isNaN(_8d1)){return;}var _8d2=this.showFacets?this.getCurrentFacet(_8d1):null;this.updateReadout(this.getCurrentText(_8d1),_8d2);this._current_index=_8d1;if(this.onIntermediateChange){this.onIntermediateChange();}if(!this._isDragging){if(this.timer){this.killTimer();}this.setTimer();}else{if(this.timer){this.killTimer();}}this.doThumbTooltip();},initial_layout:function(){if(!this.shouldShow(this.ATTR_ARROWS)){_4.addClass(this.div,"HideArrows");}if(!this.shouldShow(this.ATTR_SLIDER)){_4.addClass(this.div,"HideSlider");}if(this.styleid>3){_4.style(this.div,"height","15px");}},setTimer:function(){this.timer=setTimeout(_4.hitch(this,this.timerCallback),500);},killTimer:function(){if(this.timer!==null){clearTimeout(this.timer);this.timer=null;}},timerCallback:function(){this.updateViz();},layout:function(){var _8d3=0,_8d4=34,_8d5=false,_8d6,_8d7,_8d8;_4.style(this.div,"overflow","hidden");_8d7=_4.marginBox(this.div).h;_8d6=_4.style(this.div,"width")-4;_4.style(this.div,"overflow","");if(_8d6<_8d4){return;}if(this.readout){_4.style(this.readout,"width","");_4.style(this.readout,"float","none");}if(this.slider){_4.style(this.slider.tableauSlider,"width","");_4.style(this.slider.tableauSlider,"float","none");}if(this.sliderRules&&(this.sliderRules.count*2>_8d6)){_4.style(this.sliderRules.domNode,"display","none");}if(_8d7<38&&this.styleid<=1){_8d8=(this.styleid===0)?(_8d6-_8d4):_8d6;_8d8=Math.floor((_8d8-14)/2);_4.style(this.readout,"width",_8d8+"px");_4.style(this.slider.tableauSlider,"width",_8d8+"px");_4.style(this.readout,"float","left");_4.style(this.slider.tableauSlider,"float","left");_8d5=true;}else{if(this.styleid===0||this.styleid===4){_4.style(this.slider.tableauSlider,"width",_8d6-_8d4+"px");}else{if(this.styleid===1||this.styleid===5){_4.style(this.slider.tableauSlider,"width",_8d6+"px");}else{if(this.styleid===2){_4.style(this.readout,"width",_8d6-_8d4-4+"px");}}}}if(this.shouldShow(this.ATTR_ARROWS)){if(this.styleid===2||this.styleid===4){_8d3=2;}if(this.styleid===0){_8d3=_8d5?2:21;}_8d3+=this.getTitleOffset();_4.style(this.slider.incrementButton,"top",_8d3+"px");_4.style(this.slider.decrementButton,"top",_8d3+"px");}}});}if(!_4._hasResource["tableau.base.widget.catmode.Slider"]){_4._hasResource["tableau.base.widget.catmode.Slider"]=true;_4.provide("tableau.base.widget.catmode.Slider");_4.declare("tableau.base.widget.catmode.Slider",[tableau.base.widget.catmode.BaseMode],{instantiate:function(_8d9,_8da,_8db,_8dc,_8dd,_8de){this.tuples=_8d9;_8db=_8db||this.parent.oFilter.allChecked;if(this.shouldUseAllItem()){this.tuples=[{d:tab.Strings.QuickFilterAll,s:_8db,f:[{t:"i",v:_8dd}]}].concat(_8d9);}else{_8db=false;}this.widget=new tableau.base.widget.ui.Slider(this.div,this.attributes,_8db,_4.hitch(this,this.updateViz),_4.hitch(this.parent,this.parent.getTitleOffset),_4.hitch(this,this.getCurrentText),_4.hitch(this,this.onIntermediateChange),_4.hitch(this,this.getCurrentFacet),_8de);this.widget.instantiateFromTuples(this.tuples,this.getSummaryText());},destroy:function(){this.widget.destroy();},layout:function(_8df,_8e0){this.inherited(arguments);this.widget.layout();},showOrHide:function(elem,show){_4.style(elem,"display",(show?"":"none"));},onSmallSearchUI:function(_8e3,_8e4){var show=!_8e3,w=this.widget;if(w.styleid===2||w.styleid===4){this.showOrHide(w.slider.decrementButton,show);this.showOrHide(w.slider.incrementButton,show);}if(w.styleid===3){this.showOrHide(w.div,show);_4.style(_8e4,"marginBottom","2px");}else{if(w.styleid<3){this.showOrHide(w.readout,show);}else{this.showOrHide(w.slider.tableauSlider,show);}}},getRealIndex:function(_8e7){if(_8e7===undefined||isNaN(_8e7)){return 0;}var _8e8=parseInt(_8e7,10);if(_8e8<0){_8e8=0;}return _8e8;},updateViz:function(_8e9){var _8ea={schema:this.parent.oFilter.table.schema,tuples:[]},_8eb=this.getRealIndex(_8e9),_8ec,_8ed=[];if(this.shouldUseAllItem()&&_8eb===0){this.parent.doSelectAll(true);return;}this.tuples[_8eb].s=true;_8ea.tuples.push(this.tuples[_8eb]);this.parent.stateId+=1;_8ec=this.tuples[_8eb].d||this.tuples[_8eb].t[0].v;_8ed.push(_8ec);tab.FilterClientCommands.setCategoricalFilterValues(this.parent.session.get_sheetName(),this.parent.field,"filter-replace",_8ed);},onIntermediateChange:function(_8ee){if(this.parent.searchWidget.isVisible){this.parent.searchWidget.toggleUI();}},getCurrentText:function(_8ef){var _8f0,_8f1;_8f0=this.getRealIndex(_8ef);_8f1=this.tuples[_8f0];return tableau.format.formatTupleDisplayName(_8f1,true,this.parent.oFilter.role);},getCurrentFacet:function(_8f2){var _8f3,_8f4;_8f3=this.getRealIndex(_8f2);_8f4=this.tuples[_8f3];return tableau.format.formatTupleDisplayFacet(_8f4,true,this.parent.oFilter.role);}});}if(!_4._hasResource["tableau.base.widget.TypeInFilterContents"]){_4._hasResource["tableau.base.widget.TypeInFilterContents"]=true;_4.provide("tableau.base.widget.TypeInFilterContents");_4.declare("tableau.base.widget.TypeInFilterContents",[_5._Widget,_5._Templated,_5._Contained],{templateString:"<div class=\"TypeInFilter\"\r\n  ><div class=\"TIFItemsList\" dojoAttachPoint=\"domItemsList\"\r\n        dojoAttachEvent=\"onclick:_onItemsListClick,onmouseover:_onItemsListMouseOver,onmouseout:_onItemsListMouseOut,onkeydown:_onItemsKeyDown\"\r\n    ><div class=\"wcIconSearchRemove\" dojoAttachPoint=\"domXButton\"\r\n          dojoAttachEvent=\"onclick:_onXButtonClick,onmouseover:_onXButtonMouseOver,onmouseout:_onXButtonMouseOut\"></div\r\n  ></div\r\n  ><div class=\"TIFButtonDiv\" dojoAttachPoint=\"domClearListButtonDiv\"\r\n    ><button class=\"TIFButton\"\r\n             dojoAttachEvent=\"onclick:_onClearListButtonClick\">Clear List</button\r\n    ></div\r\n></div>\r\n",isContainer:false,parentFilter:null,tuples:null,itemName:"",role:null,domItemsList:null,domXButton:null,domClearListButtonDiv:null,postCreate:function(){var _8f5=tableau.FilterItem.typeInListArray,_8f6=tableau.format.formatTupleDisplayName,_8f7=tableau.FilterItem.getTypeInListHTML,i,id,_8fa,_8fb=[],_8fc,_8fd=0;for(i=0;i<this.tuples.length;i++){_8fc=this.tuples[i];if(_8fc.s){id=this.itemName+"_"+i;_8fa=_8f7(_8f5,id,_8f6(_8fc,true,this.role));_8fb.push(_8fa);_8fd++;}}this.domItemsList.innerHTML=_8fb.join("");_4.style(this.domClearListButtonDiv,"display",_8fd>3?"block":"none");},_onItemsListClick:function(evt){this.parentFilter.onListItemClick(evt);},_onItemsListMouseOver:function(evt){var _900,node,_902,top;if(!evt.target||!_4.hasClass(evt.target,"FITypeInItem")){return;}_4.addClass(evt.target,"Hover");node=this._lastHoveredItem=tableau.FilterItem.getNodeFromEvent(evt);_900=_4.coords(node);_902=_4.coords(node.parentNode);top=(_900.y-_902.y)+node.parentNode.scrollTop+2;node.appendChild(this.domXButton);_4.style(this.domXButton,{top:top+"px",display:"block"});},_onItemsListMouseOut:function(evt){if(!evt.relatedTarget||evt.relatedTarget!==this.domXButton){if(this._lastHoveredItem){_4.removeClass(this._lastHoveredItem,"Hover");}this._lastHoveredItem=null;_4.style(this.domXButton,"display","none");}},_onItemsKeyDown:function(evt){var dk=_4.keys;if(evt.keyCode===dk.DELETE){this._removeSelectedItemsFromFilter();_4.stopEvent(evt);}},_onXButtonClick:function(evt){var node,_909,_90a,_90b;_4.stopEvent(evt);node=tableau.FilterItem.getNodeFromEvent(evt);if(!node){return;}tableau.FilterItem.setChecked(node,false);if(this.parentFilter.oFilter){_90a=this.parentFilter.oFilter.table;}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(_90a&&_90a.actual_size===_90a.tuples.length){_90b=new tab.CategoricalFilterData(this.parentFilter.oFilter.targetSheets,this.parentFilter.field,this.parentFilter.oFilter.exclude,this.getCheckedAliases(this.getUIState()));tab.FilterClientCommands.updateCategoricalFilter(_90b);}}this.parentFilter.clearRangeAnchorAndSelection();_909=_4.hitch(this.parentFilter,this.parentFilter.applyChanges);this.parentFilter.notifyChange(_909);},_onXButtonMouseOver:function(evt){_4.addClass(this.domXButton,"Hover");},_onXButtonMouseOut:function(evt){_4.removeClass(this.domXButton,"Hover");},_onClearListButtonClick:function(evt){var node,_910,_911,_912;this.parentFilter.searchWidget.clearSearch(true);for(node=this.domItemsList.firstChild;node;node=node.nextSibling){tableau.FilterItem.setChecked(node,false);}++this.parentFilter.stateId;if(this.parentFilter.oFilter){_911=this.parentFilter.oFilter.table;}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(_911&&_911.actual_size===_911.tuples.length){_912=new tab.CategoricalFilterData(this.parentFilter.oFilter.targetSheets,this.parentFilter.field,this.parentFilter.oFilter.exclude,this.getCheckedAliases(this.getUIState()));tab.FilterClientCommands.updateCategoricalFilter(_912);}}this.parentFilter.clearRangeAnchorAndSelection();_910=_4.hitch(this.parentFilter,this.parentFilter.applyChanges);this.parentFilter.notifyChange(_910);_4.style(this.domClearListButtonDiv,"display","none");},layout:function(_913,_914){var _915;if(tableau.util.isElementVisible(this.domClearListButtonDiv)){_915=_4.marginBox(this.domClearListButtonDiv);_913.h=Math.max(0,_913.h-_915.h);}if(_4.isIE<8){if(_913.h<=12){_4.style(this.domItemsList,"overflow","hidden");}else{_4.style(this.domItemsList,"overflow","");}}_4.marginBox(this.domItemsList,_913);},_removeSelectedItemsFromFilter:function(){this.parentFilter.forEachSelected(function(_916,node){tableau.FilterItem.setChecked(node,false);});this.parentFilter.clearRangeAnchorAndSelection();this.parentFilter.notifyChange();},getUIState:function(){var _918=this.domItemsList.firstChild,_919={},item,_91b;for(item=_918;item!==null;item=item.nextSibling){_91b=this.getFormattedAlias(this.tuples[tableau.FilterItem.getIndex(item)]);_919[_91b]=tableau.FilterItem.isChecked(item);}return _919;},getCheckedAliases:function(_91c){var _91d=[],_91e;for(_91e in _91c){if(_91c.hasOwnProperty(_91e)){if(_91c[_91e]){_91d.push(_91e);}}}return _91d;},getFormattedAlias:function(_91f){return tableau.format.formatTupleDisplayName(_91f,true,this.role);}});}if(!_4._hasResource["tableau.base.widget.catmode.TypeIn"]){_4._hasResource["tableau.base.widget.catmode.TypeIn"]=true;_4.provide("tableau.base.widget.catmode.TypeIn");_4.declare("tableau.base.widget.catmode.TypeIn",[tableau.base.widget.catmode.BaseMode],{isContainer:true,_contentsWidget:null,instantiate:function(_920,_921,_922,role){this._contentsWidget=new tableau.base.widget.TypeInFilterContents({parentFilter:this.parent,tuples:_920,itemName:_921,role:role});this.div.appendChild(this._contentsWidget.domNode);this._contentsWidget.startup();this._setupDismissResultsHandlers();this._isAll=_922;},_setupDismissResultsHandlers:function(){var _924;_924=function(evt){var _926=this.parent.searchWidget.domResults;if(_926===evt.target||tab.DomUtil.isAncestorOf(_926,evt.target)){return;}if(evt.target===this.parent.searchWidget.domXButton){this.parent.searchWidget.clearSearch();}else{this.parent.searchWidget.clearSearch(true,true);}};this.connections.push(_4.connect(document.body,"onmousedown",_4.hitch(this,_924)));},destroy:function(){_4.forEach(this.connections,_4.disconnect);this.connections=[];if(this._contentsWidget){this._contentsWidget.destroyRecursive();}this._contentsWidget=null;},layout:function(_927,_928){this.inherited(arguments);this._contentsWidget.layout(_927,_928);},fetchChildNodeByIndex:function(_929){var _92a=this._contentsWidget.domItemsList.childNodes;if(!tab.MiscUtil.isValidIndex(_929,_92a)){return null;}return _92a[_929];},applyChanges:function(){var _92b=this.getServerState(),_92c=this._contentsWidget.getUIState(),_92d=this.getStateDifference(_92c,_92b),_92e=this.getStateDifference(_92b,_92c);if(_92d.length>0||_92e.length>0){this.parent.stateId++;tab.FilterClientCommands.modifyCategoricalFilterValues(this.parent.session.get_sheetName(),this.parent.field,_92d,_92e);}},getServerState:function(){var _92f=this.parent.oFilter.table.tuples,_930={},i,l,_933;for(i=0,l=_92f.length;i<l;i++){_933=_92f[i];_930[this._contentsWidget.getFormattedAlias(_933)]=_933.s;}return _930;},getStateDifference:function(_934,_935){var diff=[],_937;for(_937 in _934){if(_934.hasOwnProperty(_937)){if(_934[_937]&&!_935[_937]){diff.push(_937);}}}return diff;}});}if(!_4._hasResource["tableau.base.widget.ConditionalsWidget"]){_4._hasResource["tableau.base.widget.ConditionalsWidget"]=true;_4.provide("tableau.base.widget.ConditionalsWidget");_4.declare("tableau.base.widget.ConditionalsWidget",[_5._Widget,_5._Templated,_5._Contained],{templateString:"<div class=\"ConditionalsWidget\"\r\n  ><div class=\"Conditional\" dojoAttachPoint=\"domCondition\"\r\n    ><span dojoAttachPoint=\"domConditionTitle\" class=\"ConditionalTitle\">Condition</span><br/\r\n    ><span dojoAttachPoint=\"domConditionText\"></span></div\r\n  ><div class=\"Conditional\" dojoAttachPoint=\"domLimit\"\r\n    ><span dojoAttachPoint=\"domLimitTitle\" class=\"ConditionalTitle\">Limit</span><br/\r\n    ><span dojoAttachPoint=\"domLimitText\"></span></div\r\n></div>\r\n",isContainer:false,domCondition:null,domConditionTitle:null,domConditionText:null,domLimit:null,domLimitTitle:null,domLimitText:null,init:function(_938,_939){if(_938){this.domConditionText.innerHTML=_938;this.domCondition.title=_938;}else{_4.style(this.domCondition,"display","none");}if(_939){this.domLimitText.innerHTML=_939;this.domLimit.title=_939;}else{_4.style(this.domLimit,"display","none");}if(_938&&_939){_4.style(this.domLimit,"borderTop","solid 1px #FAFAFA");}},postCreate:function(){this._localize();},_localize:function(){var s=tab.Strings;this.domConditionTitle.innerHTML=tableau.format.escapeHTML(s.QuickFilterConditionalsCondition);this.domLimitTitle.innerHTML=tableau.format.escapeHTML(s.QuickFilterConditionalsLimit);}});}if(!_4._hasResource["tableau.base.widget.SearchWidgetBase"]){_4._hasResource["tableau.base.widget.SearchWidgetBase"]=true;_4.provide("tableau.base.widget.SearchWidgetBase");_4.declare("tableau.base.widget.SearchWidgetBase",[_5._Widget,_5._Templated,_5._Contained],{isContainer:false,domXButton:null,CANCEL_SEARCH_TOOLTIP:tab.Strings.QuickFilterSearchCancel,SEARCH_TOOLTIP:tab.Strings.QuickFilterSearchTooltip,ADD_ITEM_CTRL_ENTER:tab.Strings.QuickFilterSearchAddItemCtrlEnter,ADD_ITEM_ENTER:tab.Strings.QuickFilterSearchAddItemEnter,XBUTTON_CLOSE_TOOLTIP:tab.Strings.QuickFilterSearchCloseTooltip,XBUTTON_CLEAR_TOOLTIP:tab.Strings.QuickFilterSearchClearTooltip,NO_MATCHES:tab.Strings.QuickFilterSearchNoMatches,isVisible:false,qf:null,resultCount:0,searchDelay:400,postMixInProperties:function(){this.inherited(arguments);this.busy_gif_url=tableau.util.assetUrl("/images/busy.gif");},postCreate:function(){this._isTypeInList=this.qf&&this.qf.isTypeInList;},resize:function(_93b){_4.marginBox(this.domNode,_93b);this.layout();},onQueryBoxKeyDown:function(_93c){var _93d=this._getOnQueryBoxKeyDownBehavior(_93c);if(_93d){if(_93d.stopEvent){_4.stopEvent(_93c);}if(_93d.functionToCall){setTimeout(_4.hitch(this,_93d.functionToCall),10);}}},_getOnQueryBoxKeyDownBehavior:function(_93e){var dk=_4.keys,_940={functionToCall:null,stopEvent:false};switch(_93e.keyCode){case dk.ENTER:_940.stopEvent=true;break;case dk.ESCAPE:this.onXButtonClick();_940.stopEvent=true;break;default:_940.functionToCall="_handleNonCommandKeyDown";break;}return _940;},_handleNonCommandKeyDown:function(){this._updateXButtonTooltip();},onXButtonClick:function(){if(!this._isTypeInList){var qStr=this.getQuery();this.hideUI();if(qStr!==""){this.showUI();}}else{this.clearSearch();}},onButtonHover:function(_942){_4.addClass(_942.target,"Hover");},onButtonUnhover:function(_943){_4.removeClass(_943.target,"Hover");},toggleUI:function(){if(this.isVisible){this.hideUI();}else{this.showUI();}},isSingleSelect:function(){return this.qf.isSingleSelect();},focusQueryBox:function(){throw "This is an abstract method and must be implemented in the subclass";},blurQueryBox:function(){throw "This is an abstract method and must be implemented in the subclass";},getQuery:function(){throw "This is an abstract method and must be implemented in the subclass";},setQuery:function(_944){throw "This is an abstract method and must be implemented in the subclass";},updateSearch:function(){throw "This is an abstract method and must be implemented in the subclass";},showUI:function(_945){if(this.isVisible){return;}_4.style(this.domNode,"display","block");this.isVisible=true;if(!_945){this.qf.layout();}this.focusQueryBox();},hideUI:function(){if(!this.isVisible){return;}this.clearSearch(false,true);_4.style(this.domNode,"display","none");this.blurQueryBox();this.isVisible=false;this.qf.layout();},clearSearch:function(_946,_947){if(!_946){this.setQuery("");this._updateXButtonTooltip();}this.resultCount=0;this.qf.layout();if(!_947){this.focusQueryBox();}},_updateXButtonTooltip:function(){if(this.getQuery()===""&&!this._isTypeInList){this.domXButton.title=this.XBUTTON_CLOSE_TOOLTIP;}else{this.domXButton.title=this.XBUTTON_CLEAR_TOOLTIP;}},formatTuple:function(_948){return tableau.format.formatTupleDisplayName(_948,true,this.qf.oFilter.role);}});}if(!_4._hasResource["tableau.base.widget.SearchWidget"]){_4._hasResource["tableau.base.widget.SearchWidget"]=true;_4.provide("tableau.base.widget.SearchWidget");_4.declare("tableau.base.widget.SearchWidget",[tableau.base.widget.SearchWidgetBase,tableau.base.CategoricalSelectionMixin],{templateString:"<div class=\"Search\"\r\n  ><div class=\"SearchBox\" dojoAttachPoint=\"domQuerySection\"\r\n    ><textarea rows=\"1\" class=\"QueryBox\" spellcheck=\"false\"\r\n      dojoAttachPoint=\"domQueryBox\"\r\n      dojoAttachEvent=\"onkeydown:onQueryBoxKeyDown,onpaste:onQueryBoxPaste\"></textarea\r\n    ><span class=\"wcSearchX\" title=\"${XBUTTON_CLOSE_TOOLTIP}\"\r\n      dojoAttachPoint=\"domXButton\"\r\n      dojoAttachEvent=\"onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover\"></span\r\n    ><img class=\"searchBusyImg\" title=\"${CANCEL_SEARCH_TOOLTIP}\" src=\"${busy_gif_url}\"\r\n      dojoAttachPoint=\"domSearchBusyImg\"\r\n      dojoAttachEvent=\"onclick:onSearchBusyImgClick\"></img\r\n    ><span class=\"wcIconSearch\" title=\"${SEARCH_TOOLTIP}\"\r\n      dojoAttachPoint=\"domSearchButton\"\r\n      dojoAttachEvent=\"onclick:onSearchButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover\"></span\r\n    ><span class=\"wcIconSearchAdd\" title=\"${ADD_ITEM_CTRL_ENTER}\"\r\n      dojoAttachPoint=\"domSearchAddButton\"\r\n      dojoAttachEvent=\"onclick:onSearchAddButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover\"></span\r\n  ></div\r\n  ><div class=\"SearchResults\" dojoAttachPoint=\"domResults\" dojoAttachEvent=\"onclick:onListItemClick\"></div\r\n></div>\r\n",domQuerySection:null,domQueryBox:null,domSearchAddButton:null,domSearchButton:null,domSearchBusyImg:null,domResults:null,applyDelay:500,searchResultsMaxRows:100,_bSearching:false,postCreate:function(){this.inherited(arguments);if(this._isTypeInList){this.showUI(true);}this._isFilterSearchable=true;if(this.qf&&this._isTypeInList){this._isFilterSearchable=this.qf.oFilter.is_searchable;}if(this._isFilterSearchable){this.domSearchAddButton.title=this.ADD_ITEM_CTRL_ENTER;}else{this.domSearchAddButton.title=this.ADD_ITEM_ENTER;}this._setQueryIconsVisibility(true);tableau.util.disableTextSelection(this.domResults);},destroy:function(_949){this.domResults.innerHTML="";this.inherited(arguments);},onQueryBoxPaste:function(_94a){if(this._queryBoxPasteTimeout){clearTimeout(this._queryBoxPasteTimeout);delete this._queryBoxPasteTimeout;}this._queryBoxPasteTimeout=setTimeout(_4.hitch(this,"_handleQueryBoxPaste"),10);},_handleQueryBoxPaste:function(){var _94b,_94c;_94c=this.getQuery();_94c=_94c.replace(/\r\n/g,"\n");_94b=_94c.split("\n");if(_94b.length>1){this._addManualSearchItems(_94b);}},_getOnQueryBoxKeyDownBehavior:function(_94d){var dk=_4.keys,_94f;_94f=this.inherited(arguments);dk=_4.keys;switch(_94d.keyCode){case dk.ESCAPE:if(_4.isFF){_94f.functionToCall="onXButtonClick";}break;case dk.ENTER:if(this._isTypeInList){_94f.stopEvent=true;_94f.functionToCall=this._getEnterKeyDownBehaviorOnTypeInList(_94d);}break;}return _94f;},_getEnterKeyDownBehaviorOnTypeInList:function(_950){if(_950.ctrlKey){return "onSearchAddButtonClick";}if(this._isFilterSearchable){return "onSearchButtonClick";}return "onSearchAddButtonClick";},_handleNonCommandKeyDown:function(){this.inherited(arguments);if(this._isTypeInList){this.clearSearch(true);}if(!this._isTypeInList){this._startSearchTimer();}},onSearchAddButtonClick:function(){this._addManualSearchItems();},onSearchButtonClick:function(){this.doSearch();},onSearchBusyImgClick:function(){this._cancelRemoteSearch();},focusQueryBox:function(){this.domQueryBox.focus();},blurQueryBox:function(){this.domQueryBox.blur();},getQuery:function(){return this.domQueryBox.value;},setQuery:function(_951){this.domQueryBox.value=_951;},showUI:function(_952){if(this.isVisible){return;}if(this.qf.declaredClass==="tableau.base.widget.CategoricalFilter"&&this.qf.oFilter.table.tuples.length===0&&!this._isTypeInList){return;}this.inherited(arguments);},clearSearch:function(_953,_954){this.inherited(arguments);_4.style(this.domResults,"display","none");this.domResults.innerHTML="";this.clearRangeAnchorAndSelection();this._cancelRemoteSearch();},_setQueryIconsVisibility:function(_955){var _956,_957=this._isTypeInList,_958,_959,_95a,_95b;_958=_955?false:tableau.util.isElementVisible(this.domResults);_95a=(this.getQuery()!==""&&_957&&!_958);_956=_95a;_959=(_95a&&this._isFilterSearchable);_4.style(this.domSearchBusyImg,"display",_959&&this._bSearching?"block":"none");_4.style(this.domSearchButton,"display",_959&&!this._bSearching?"block":"none");_4.style(this.domSearchAddButton,"display",_956?"block":"none");_95b=(_957&&!_958)?"none":"block";_4.style(this.domXButton,"display",_95b);this._fixQueryWidth();},fetchChildNodeByIndex:function(_95c){var i,_95e=this.domResults.childNodes,len;for(i=0,len=_95e.length;i<len;i++){if(tableau.FilterItem.getIndex(_95e[i])===_95c){return _95e[i];}}return null;},layout:function(_960){this._setQueryIconsVisibility();var _961=this._getItemHeight();if(this._isTypeInList||this.qf.mode==="checkdropdown"){this._positionTypeInListSearchResults(_961);}else{if(_961!==0){this._setIntegralHeight(_960/_961,_961);}}},_fixQueryWidth:function(){var _962=tableau.util.isElementVisible(this.domXButton),_963=tableau.util.isElementVisible(this.domSearchAddButton),_964=tableau.util.isElementVisible(this.domSearchButton),_965=tableau.util.isElementVisible(this.domSearchBusyImg),_966=0;if(_962){_966+=_4.marginBox(this.domXButton).w;}if(_963){_966+=_4.marginBox(this.domSearchAddButton).w;}if(_964){_966+=_4.marginBox(this.domSearchButton).w;}if(_965){_966+=_4.marginBox(this.domSearchBusyImg).w;}_4.marginBox(this.domQueryBox,{w:_4.contentBox(this.domQuerySection).w-_966});},_positionTypeInListSearchResults:function(_967){var _968,_969,_96a,_96b,_96c,_96d,_96e,_96f,_970,_971,top,left,_974,_975,_976;_976=_4.query(".wcVizDisplay")[0];if(!this._initializedSearchResults){this._initializedSearchResults=true;_976.appendChild(this.domResults);_4.style(this.domResults,{position:"absolute",zIndex:"987"});this._domResultsPBExtents=_4._getPadBorderExtents(this.domResults);}_96d=_4.coords(this.qf.domNode.parentNode);_96f=_4.coords(this.domQuerySection);_970=_96d.t+_96f.t;_971=_970+_96f.h;_974=_4.coords(_976);_975=_974.t+_974.h;_96b=_967+this._domResultsPBExtents.h;_96c=this.domResults.childNodes.length*_967+this._domResultsPBExtents.h;_969=_975-_971;_968=_970-_974.t;_96e=true;_96a=Math.min(_96c,_969);if(_96a<_96b&&_968>_969){_96a=Math.min(_96c,_968);_96e=false;}_96a=Math.max(_96a,_96b);_4.marginBox(this.domResults,{w:_96f.w,h:_96a});top=_96e?_971:_970-_96a;left=_96d.l+_96f.l;_4.style(this.domResults,{top:top+"px",left:left+"px",borderTopWidth:_96e?"0":"1px",borderBottomWidth:_96e?"1px":"0"});},_setIntegralHeight:function(_977,_978){var _979=Math.max(this.domResults.childNodes.length,1),_97a=Math.min(_979,Math.floor(_977/2));_4.style(this.domResults,"height",_97a*_978+"px");},_getItemHeight:function(){if(this.domResults.firstChild){if(this.domResults.firstChild.offsetHeight){return this.domResults.firstChild.offsetHeight;}else{return 15;}}return 0;},_startSearchTimer:function(){if(this._searchTimer){clearTimeout(this._searchTimer);delete this._searchTimer;}this._searchTimer=setTimeout(_4.hitch(this,this.doSearch),this.searchDelay);},_showSearchSpinner:function(_97b){this._bSearching=_97b;this._setQueryIconsVisibility();},_addManualSearchItems:function(_97c){var _97d,i,item,_980,_981;if(this.qf.declaredClass!=="tableau.base.widget.CategoricalFilter"){return;}if(tab.MiscUtil.isNullOrUndefined(_97c)){_97c=this.getQuery().split("\n");}if(tab.MiscUtil.isNullOrEmpty(_97c)){return;}_981=[];for(i=0,_980=_97c.length;i<_980;i++){item=_97c[i];if(!tab.MiscUtil.isNullOrEmpty(item)){_981.push({d:item,s:true,t:[{v:item,t:"s"}]});}}_97d={schema:this.qf.oFilter.table.schema,tuples:_981};this._notifyParentFilterOfChanged(_97d,true);this.clearSearch();},doSearch:function(){this._searchWithQuery(this.getQuery());},updateSearch:function(){if(this.isVisible&&this.resultCount>0){this._searchWithQuery(this.getQuery());}},_searchWithQuery:function(_982){if(_982.length<=0){this.clearSearch();}else{if(this.qf.declaredClass==="tableau.base.widget.CategoricalFilter"&&!this._isTypeInList){if(this.qf.oFilter.isTiled){this._doRemoteSearch(_982,true);}else{this._handleSearchResults(this._doCategoricalSearch(_982));}}else{this._doRemoteSearch(_982,false);}}},_doCategoricalSearch:function(_983){var _984,_985,_986=this.qf.oFilter,i,id,_989,_98a=[],_98b=this.isSingleSelect(),_98c="SI_"+_986.name,t=_986.table.tuples;if(this.qf.session){_98c+=this.qf.session.viewid.toString();}_984=(_98b)?[].concat(tableau.FilterItem.radioArray):[].concat(tableau.FilterItem.checkboxArray);for(i=0;i<t.length;i++){_985=this.formatTuple(t[i]);if(this._searchQueryMatchesText(_983.toLowerCase(),_985.toLowerCase())){id=_98c+"_"+i;_989=tableau.FilterItem.getSearchResultHTML(this.qf.mode,_984,id,(_98b)?_98c:id,_985,t[i].s,_986.all);_98a.push(_989);}}return _98a;},_searchQueryMatchesText:function(_98e,text){var len=_98e.length,_991;if(_98e.charAt(0)==="\""&&_98e.charAt(len-1)==="\""){return _98e.substr(1,len-2)===text;}else{if(_98e.charAt(len-1)==="*"&&_98e.charAt(0)!=="*"){return text.indexOf(_98e.substr(0,len-1))===0;}else{if(_98e.charAt(0)==="*"&&_98e.charAt(len-1)!=="*"){_991=text.lastIndexOf(_98e.substr(1,len-1));return _991>=0&&_991===text.length-(len-1);}else{if(_98e.charAt(0)==="*"&&_98e.charAt(len-1)==="*"){return text.indexOf(_98e.substr(1,len-2))>=0;}else{return text.indexOf(_98e)>=0;}}}}},_doRemoteSearch:function(_992,_993){var _994=tableau.types.QFDomain.QFD_ALL;if(this.qf.attributes){_994=this.qf.attributes.values;}this._showSearchSpinner(this._isTypeInList);this._lastRemoteSearch=this.qf.session.searchFilter(this.qf.field,_992,this.searchResultsMaxRows,_993,_994,_4.hitch(this,"_handleSearchResults"),_4.hitch(this,"_handleSearchResultsError"));},_cancelRemoteSearch:function(){if(this._lastRemoteSearch){this._lastRemoteSearch.abort();delete this._lastRemoteSearch;}this._showSearchSpinner(false);},_addNotShownCountDiv:function(html,_996,_997){var _998,_999,esc=tableau.format.escapeHTML;if(!tab.MiscUtil.isNullOrUndefined(_997)&&_996<_997){_998=_997-_996;html.push("<div class=\"searchResultsRemaining\">");if(_998===0){html.push(esc(tab.Strings.QuickFilterSearchResultsNotShownZero));}else{if(_998===1){html.push(esc(tab.Strings.QuickFilterSearchResultsNotShownSingular));}else{_999=tableau.format.formatIntAuto(_998,"t",",","3;0");html.push(esc(tab.Strings.QuickFilterSearchResultsNotShownPlural(_999)));}}html.push("</div>");}},_searchResultsToHtml:function(data){var _99c,_99d=this.qf.oFilter,i,len,id,_9a1,_9a2="SI_"+_99d.name,_9a3,_9a4,_9a5,t,ti,_9a8,_9a9;if(data.length<=0){return [];}this.oResults=data;t=this.oResults.tuples;ti=this.oResults.indices;_9a4=[];_9a5=this.isSingleSelect();_99d=this.qf.oFilter;_9a2="SI_"+_99d.name;if(this.qf.session){_9a2+=this.qf.session.viewid.toString();}_99c=(_9a5)?[].concat(tableau.FilterItem.radioArray):[].concat(tableau.FilterItem.checkboxArray);for(i=0,len=t.length;i<len;i++){_9a8=ti?ti[i]:i;id=_9a2+"_"+_9a8;_9a9=this.formatTuple(t[i]);_9a1=tableau.FilterItem.getSearchResultHTML(this.qf.mode,_99c,id,(_9a5)?_9a2:id,_9a9,t[i].s,_99d.all&&!this._isTypeInList);_9a4.push(_9a1);}this._addNotShownCountDiv(_9a4,t.length,data.actual_size);return _9a4;},_handleSearchResults:function(data){var esc=tableau.format.escapeHTML,_9ac=this.NO_MATCHES;this._showSearchSpinner(false);if(data&&data.dojoType==="cancel"){return;}this.domResults.innerHTML="";if(this.qf.declaredClass==="tableau.base.widget.HierarchicalFilter"||this._isTypeInList||this.qf.oFilter.isTiled){if(data.schema[0].collation&&data.schema[0].collation.f===0){_9ac="<div>"+esc(_9ac)+"<br/>"+esc(tab.Strings.QuickFilterSearchDataIsCaseSensitive)+"</div>";}data=this._searchResultsToHtml(data);}this.resultCount=data.length;this.domResults.innerHTML=(this.resultCount>0)?data.join(""):_9ac;_4.style(this.domResults,"display",(this.domResults.innerHTML.length>0)?"block":"none");this._setQueryIconsVisibility();this.qf.layout();this.refreshRangeAnchorAndSelection();},_handleSearchResultsError:function(_9ad){this._showSearchSpinner(false);this.domResults.innerHTML="";this.resultCount=0;},applyChanges:function(){var _9ae=null;if(this.qf.declaredClass==="tableau.base.widget.CategoricalFilter"&&!this._isTypeInList){_9ae=this._applyChangesCat();}else{_9ae=this._applyChangesHierOrTypeIn();}this._notifyParentFilterOfChanged(_9ae);},applyChangesByChangelist:function(_9af){if(this.qf.declaredClass==="tableau.base.widget.CategoricalFilter"&&!this._isTypeInList){this.qf.applyChangesByChangelist(_9af);}else{this.applyChanges();}},_notifyParentFilterOfChanged:function(_9b0,_9b1,_9b2){var _9b3,_9b4;if(_9b0.tuples.length===0){return;}this.qf.updateStateFromSearch(_9b0);if(_9b2){return;}++this.qf.stateId;if(_9b1){_9b3=_4.hitch(this,"_onManualAddSuccess");this.qf.session.addManualFilterItems(_9b0,this.qf,_9b3);}else{_9b4=this._isTypeInAll();if(_9b4||this.qf.isSingleSelect()){this._doSetCategoricalFilter(_9b4,_9b0);}else{if(this.qf.declaredClass==="tableau.base.widget.HierarchicalFilter"){this._doModifyHierarchialFilter(_9b0);}else{this._doModifyCategoricalFilter(_9b0);}}}},_doSetCategoricalFilter:function(_9b5,_9b6){var i,_9b8,_9b9=[],_9ba=_9b6.tuples.length;if(_9b5===true){for(i=0;i<_9ba;i++){_9b8=_9b6.tuples[i].d||_9b6.tuples[i].t[0].v;if(_9b6.tuples[i].s===true){_9b9.push(_9b8);}}}else{_9b8=_9b6.tuples[0].d||_9b6.tuples[0].t[0].v;_9b9.push(_9b8);}tab.FilterClientCommands.setCategoricalFilterValues(this.qf.session.get_sheetName(),this.qf.field,"filter-replace",_9b9);},_doModifyCategoricalFilter:function(_9bb){var i,_9bd,_9be=[],_9bf=[],_9c0=_9bb.tuples.length;for(i=0;i<_9c0;i++){_9bd=_9bb.tuples[i].d||_9bb.tuples[i].t[0].v;if(_9bb.tuples[i].s===true){_9be.push(_9bd);}else{_9bf.push(_9bd);}}tab.FilterClientCommands.modifyCategoricalFilterValues(this.qf.session.get_sheetName(),this.qf.field,_9be,_9bf);},_doModifyHierarchialFilter:function(_9c1){var i,j,_9c4,_9c5=[],_9c6=[],_9c7="filter-delta",_9c8=_9c1.tuples.length,_9c9,key,_9cb=_9c1.tuples;for(i=0;i<_9c8;i++){_9c9=_9cb[i].t.length;_9c4="";for(j=0;j<_9c9;++j){key=_9cb[i].t[j];if(key.v&&_9c4.length<key.v.length){_9c4=key.v;}}if(_9cb[i].s===true){_9c5.push(_9c4);}else{_9c6.push(_9c4);}}tab.FilterClientCommands.doMemberHierarchialFilter(this.qf.session.get_sheetName(),this.qf.field,_9c5,_9c6,_9c7);},_isTypeInAll:function(){return this._isTypeInList===true&&this.qf.modeContents._isAll===true;},_applyChangesCat:function(){var _9cc={schema:this.qf.oFilter.table.schema,tuples:[]},i,j,_9cf,item=this.domResults.firstChild,len,_9d2=this.domResults.childNodes.length,_9d3,_9d4=this.qf.oFilter.table.tuples;if(this.qf.isSingleSelect()){for(i=0;i<_9d2;i++,item=item.nextSibling){if(tableau.FilterItem.isChecked(item)){_9d3=tableau.FilterItem.getIndex(item);this.recordCheckedChanges(_9cc,item,_9d4[_9d3]);for(j=0;j<_9d4.length;++j){if(j!==_9d3){_9d4[j].s=false;}}break;}}}else{_9cf={};for(i=0;i<_9d2;i++,item=item.nextSibling){_9d3=tableau.FilterItem.getIndex(item);this.recordCheckedChanges(_9cc,item,_9d4[_9d3]);_9cf[_9d3]=1;}item=this.qf.domContent.firstChild;if(tableau.FilterItem.isAllItem(item)){item=item.nextSibling;}for(i=0,len=_9d4.length;i<len;i++,item=item.nextSibling){if(!_9cf[i]){this.recordCheckedChanges(_9cc,item,_9d4[i]);}}}return _9cc;},_applyChangesHierOrTypeIn:function(){var _9d5={schema:this.oResults.schema,tuples:[]},i,item=this.domResults.firstChild,_9d8,_9d9=this.oResults.tuples;for(i=0,_9d8=_9d9.length;i<_9d8;i++,item=item.nextSibling){this.recordCheckedChanges(_9d5,item,_9d9[i]);}return _9d5;},_onManualAddSuccess:function(_9da){var _9db,_9dc,esc=tableau.format.escapeHTML,i=0,_9df=_9da.invalidTuples,_9e0=_9df.length,_9e1,_9e2;if(tab.MiscUtil.isNullOrUndefined(_9da,_9da.invalidTuples,_9da.totalTuples)){return false;}if(_9e0>0){_9db=[];if(_9e0===1){_9db.push(esc(tab.Strings.QuickFilterSearchInvalidDataMemberSingular(_9df[0].t[0].v)));_9db.push("<br/>");}else{_9db.push(esc(tab.Strings.QuickFilterSearchInvalidDataMembersPlural));_9db.push("<br/>");for(i=0;i<_9e0;i++){_9db.push("&nbsp;&nbsp;&nbsp;&nbsp;&bull;&nbsp;");_9db.push(_9df[i].t[0].v);_9db.push("<br/>");}}tableau.util.showAlertDialog(_9db.join(""),tab.Strings.QuickFilterSearchInvalidDataMembersDialogTitle);_9e1=[];for(i=0;i<_9e0;i++){_9e2=_9df[i].t[0].v;_9e1.push({d:_9e2,s:false,t:_9df[i]});}_9dc={schema:this.qf.oFilter.table.schema,tuples:_9e1};this._notifyParentFilterOfChanged(_9dc,true,true);}return _9da.totalTuples>_9e0;}});}if(!_4._hasResource["dojo.data.util.filter"]){_4._hasResource["dojo.data.util.filter"]=true;_4.provide("dojo.data.util.filter");_4.data.util.filter.patternToRegExp=function(_9e3,_9e4){var rxp="^";var c=null;for(var i=0;i<_9e3.length;i++){c=_9e3.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_9e3.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_9e4){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};}if(!_4._hasResource["dojo.data.util.sorter"]){_4._hasResource["dojo.data.util.sorter"]=true;_4.provide("dojo.data.util.sorter");_4.data.util.sorter.basicComparator=function(a,b){var ret=0;if(a>b||typeof a==="undefined"||a===null){ret=1;}else{if(a<b||typeof b==="undefined"||b===null){ret=-1;}}return ret;};_4.data.util.sorter.createSortFunction=function(_9eb,_9ec){var _9ed=[];function createSortFunction(attr,dir){return function(_9f0,_9f1){var a=_9ec.getValue(_9f0,attr);var b=_9ec.getValue(_9f1,attr);var _9f4=null;if(_9ec.comparatorMap){if(typeof attr!=="string"){attr=_9ec.getIdentity(attr);}_9f4=_9ec.comparatorMap[attr]||_4.data.util.sorter.basicComparator;}_9f4=_9f4||_4.data.util.sorter.basicComparator;return dir*_9f4(a,b);};};var _9f5;for(var i=0;i<_9eb.length;i++){_9f5=_9eb[i];if(_9f5.attribute){var _9f7=(_9f5.descending)?-1:1;_9ed.push(createSortFunction(_9f5.attribute,_9f7));}}return function(rowA,rowB){var i=0;while(i<_9ed.length){var ret=_9ed[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};}if(!_4._hasResource["dojo.data.util.simpleFetch"]){_4._hasResource["dojo.data.util.simpleFetch"]=true;_4.provide("dojo.data.util.simpleFetch");_4.data.util.simpleFetch.fetch=function(_9fc){_9fc=_9fc||{};if(!_9fc.store){_9fc.store=this;}var self=this;var _9fe=function(_9ff,_a00){if(_a00.onError){var _a01=_a00.scope||_4.global;_a00.onError.call(_a01,_9ff,_a00);}};var _a02=function(_a03,_a04){var _a05=_a04.abort||null;var _a06=false;var _a07=_a04.start?_a04.start:0;var _a08=(_a04.count&&(_a04.count!==Infinity))?(_a07+_a04.count):_a03.length;_a04.abort=function(){_a06=true;if(_a05){_a05.call(_a04);}};var _a09=_a04.scope||_4.global;if(!_a04.store){_a04.store=self;}if(_a04.onBegin){_a04.onBegin.call(_a09,_a03.length,_a04);}if(_a04.sort){_a03.sort(_4.data.util.sorter.createSortFunction(_a04.sort,self));}if(_a04.onItem){for(var i=_a07;(i<_a03.length)&&(i<_a08);++i){var item=_a03[i];if(!_a06){_a04.onItem.call(_a09,item,_a04);}}}if(_a04.onComplete&&!_a06){var _a0c=null;if(!_a04.onItem){_a0c=_a03.slice(_a07,_a08);}_a04.onComplete.call(_a09,_a0c,_a04);}};this._fetchItems(_9fc,_a02,_9fe);return _9fc;};}if(!_4._hasResource["dojo.data.ItemFileReadStore"]){_4._hasResource["dojo.data.ItemFileReadStore"]=true;_4.provide("dojo.data.ItemFileReadStore");_4.declare("dojo.data.ItemFileReadStore",null,{constructor:function(_a0d){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_a0d.url;this._jsonData=_a0d.data;this._datatypeMap=_a0d.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_a0e){return _4.date.stamp.fromISOString(_a0e);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_a0d.urlPreventCache!==undefined){this.urlPreventCache=_a0d.urlPreventCache?true:false;}if(_a0d.clearOnClose){this.clearOnClose=true;}},url:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.");}},_assertIsAttribute:function(_a10){if(typeof _a10!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.");}},getValue:function(item,_a12,_a13){var _a14=this.getValues(item,_a12);return (_a14.length>0)?_a14[0]:_a13;},getValues:function(item,_a16){this._assertIsItem(item);this._assertIsAttribute(_a16);return item[_a16]||[];},getAttributes:function(item){this._assertIsItem(item);var _a18=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_a18.push(key);}}return _a18;},hasAttribute:function(item,_a1b){return this.getValues(item,_a1b).length>0;},containsValue:function(item,_a1d,_a1e){var _a1f=undefined;if(typeof _a1e==="string"){_a1f=_4.data.util.filter.patternToRegExp(_a1e,false);}return this._containsValue(item,_a1d,_a1e,_a1f);},_containsValue:function(item,_a21,_a22,_a23){return _4.some(this.getValues(item,_a21),function(_a24){if(_a24!==null&&!_4.isObject(_a24)&&_a23){if(_a24.toString().match(_a23)){return true;}}else{if(_a22===_a24){return true;}}});},isItem:function(_a25){if(_a25&&_a25[this._storeRefPropName]===this){if(this._arrayOfAllItems[_a25[this._itemNumPropName]]===_a25){return true;}}return false;},isItemLoaded:function(_a26){return this.isItem(_a26);},loadItem:function(_a27){this._assertIsItem(_a27.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},_fetchItems:function(_a2a,_a2b,_a2c){var self=this;var _a2e=function(_a2f,_a30){var _a31=[];if(_a2f.query){var _a32=_a2f.queryOptions?_a2f.queryOptions.ignoreCase:false;var _a33={};for(var key in _a2f.query){var _a35=_a2f.query[key];if(typeof _a35==="string"){_a33[key]=_4.data.util.filter.patternToRegExp(_a35,_a32);}}for(var i=0;i<_a30.length;++i){var _a37=true;var _a38=_a30[i];if(_a38===null){_a37=false;}else{for(var key in _a2f.query){var _a35=_a2f.query[key];if(!self._containsValue(_a38,key,_a35,_a33[key])){_a37=false;}}}if(_a37){_a31.push(_a38);}}_a2b(_a31,_a2f);}else{for(var i=0;i<_a30.length;++i){var item=_a30[i];if(item!==null){_a31.push(item);}}_a2b(_a31,_a2f);}};if(this._loadFinished){_a2e(_a2a,this._getItemsArray(_a2a.queryOptions));}else{if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_a2a,filter:_a2e});}else{this._loadInProgress=true;var _a3a={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache};var _a3b=_4.xhrGet(_a3a);_a3b.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;_a2e(_a2a,self._getItemsArray(_a2a.queryOptions));self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_a2c(e,_a2a);}});_a3b.addErrback(function(_a3d){self._loadInProgress=false;_a2c(_a3d,_a2a);});}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;_a2e(_a2a,this._getItemsArray(_a2a.queryOptions));}catch(e){_a2c(e,_a2a);}}else{_a2c(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),_a2a);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _a3f=this._queuedFetches[i];var _a40=_a3f.args;var _a41=_a3f.filter;if(_a41){_a41(_a40,this._getItemsArray(_a40.queryOptions));}else{this.fetchItemByIdentity(_a40);}}this._queuedFetches=[];}},_getItemsArray:function(_a42){if(_a42&&_a42.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_a43){if(this.clearOnClose&&(this._jsonFileUrl!=="")){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_a44){var _a45=false;function valueIsAnItem(_a46){var _a47=((_a46!=null)&&(typeof _a46=="object")&&(!_4.isArray(_a46)||_a45)&&(!_4.isFunction(_a46))&&(_a46.constructor==Object||_4.isArray(_a46))&&(typeof _a46._reference=="undefined")&&(typeof _a46._type=="undefined")&&(typeof _a46._value=="undefined"));return _a47;};var self=this;function addItemAndSubItemsToArrayOfAllItems(_a49){self._arrayOfAllItems.push(_a49);for(var _a4a in _a49){var _a4b=_a49[_a4a];if(_a4b){if(_4.isArray(_a4b)){var _a4c=_a4b;for(var k=0;k<_a4c.length;++k){var _a4e=_a4c[k];if(valueIsAnItem(_a4e)){addItemAndSubItemsToArrayOfAllItems(_a4e);}}}else{if(valueIsAnItem(_a4b)){addItemAndSubItemsToArrayOfAllItems(_a4b);}}}}};this._labelAttr=_a44.label;var i;var item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_a44.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(_4.isArray(item)){_a45=true;}addItemAndSubItemsToArrayOfAllItems(item);item[this._rootItemPropName]=true;}var _a51={};var key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _a53=item[key];if(_a53!==null){if(!_4.isArray(_a53)){item[key]=[_a53];}}else{item[key]=[null];}}_a51[key]=key;}}while(_a51[this._storeRefPropName]){this._storeRefPropName+="_";}while(_a51[this._itemNumPropName]){this._itemNumPropName+="_";}while(_a51[this._reverseRefMap]){this._reverseRefMap+="_";}var _a54;var _a55=_a44.identifier;if(_a55){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_a55;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_a54=item[_a55];var _a56=_a54[0];if(!this._itemsByIdentity[_a56]){this._itemsByIdentity[_a56]=item;}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_a55+"].  Value collided: ["+_a56+"]");}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_a55+"].  Value collided: ["+_a56+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_a54=item[key];for(var j=0;j<_a54.length;++j){_a53=_a54[j];if(_a53!==null&&typeof _a53=="object"){if(_a53._type&&_a53._value){var type=_a53._type;var _a59=this._datatypeMap[type];if(!_a59){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(_4.isFunction(_a59)){_a54[j]=new _a59(_a53._value);}else{if(_4.isFunction(_a59.deserialize)){_a54[j]=_a59.deserialize(_a53._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_a53._reference){var _a5a=_a53._reference;if(!_4.isObject(_a5a)){_a54[j]=this._itemsByIdentity[_a5a];}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _a5c=this._arrayOfAllItems[k];var _a5d=true;for(var _a5e in _a5a){if(_a5c[_a5e]!=_a5a[_a5e]){_a5d=false;}}if(_a5d){_a54[j]=_a5c;}}}if(this.referenceIntegrity){var _a5f=_a54[j];if(this.isItem(_a5f)){this._addReferenceToMap(_a5f,item,key);}}}else{if(this.isItem(_a53)){if(this.referenceIntegrity){this._addReferenceToMap(_a53,item,key);}}}}}}}},_addReferenceToMap:function(_a60,_a61,_a62){},getIdentity:function(item){var _a64=this._features["dojo.data.api.Identity"];if(_a64===Number){return item[this._itemNumPropName];}else{var _a65=item[_a64];if(_a65){return _a65[0];}}return null;},fetchItemByIdentity:function(_a66){if(!this._loadFinished){var self=this;if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_a66});}else{this._loadInProgress=true;var _a68={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache};var _a69=_4.xhrGet(_a68);_a69.addCallback(function(data){var _a6b=_a66.scope?_a66.scope:_4.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;var item=self._getItemByIdentity(_a66.identity);if(_a66.onItem){_a66.onItem.call(_a6b,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_a66.onError){_a66.onError.call(_a6b,error);}}});_a69.addErrback(function(_a6d){self._loadInProgress=false;if(_a66.onError){var _a6e=_a66.scope?_a66.scope:_4.global;_a66.onError.call(_a6e,_a6d);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;var item=self._getItemByIdentity(_a66.identity);if(_a66.onItem){var _a70=_a66.scope?_a66.scope:_4.global;_a66.onItem.call(_a70,item);}}}}else{var item=this._getItemByIdentity(_a66.identity);if(_a66.onItem){var _a70=_a66.scope?_a66.scope:_4.global;_a66.onItem.call(_a70,item);}}},_getItemByIdentity:function(_a71){var item=null;if(this._itemsByIdentity){item=this._itemsByIdentity[_a71];}else{item=this._arrayOfAllItems[_a71];}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _a74=this._features["dojo.data.api.Identity"];if(_a74===Number){return null;}else{return [_a74];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl){var _a76={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,sync:true};var _a77=_4.xhrGet(_a76);_a77.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error("dojo.data.ItemFileReadStore:  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_a77.addErrback(function(_a79){throw _a79;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});_4.extend(_4.data.ItemFileReadStore,_4.data.util.simpleFetch);}if(!_4._hasResource["dojo.data.ItemFileWriteStore"]){_4._hasResource["dojo.data.ItemFileWriteStore"]=true;_4.provide("dojo.data.ItemFileWriteStore");_4.declare("dojo.data.ItemFileWriteStore",_4.data.ItemFileReadStore,{constructor:function(_a7a){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap["Date"].serialize){this._datatypeMap["Date"].serialize=function(obj){return _4.date.stamp.toISOString(obj,{zulu:true});};}if(_a7a&&(_a7a.referenceIntegrity===false)){this.referenceIntegrity=false;}this._saveInProgress=false;},referenceIntegrity:true,_assert:function(_a7c){if(!_a7c){throw new Error("assertion failed in ItemFileWriteStore");}},_getIdentifierAttribute:function(){var _a7d=this.getFeatures()["dojo.data.api.Identity"];return _a7d;},newItem:function(_a7e,_a7f){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad();}if(typeof _a7e!="object"&&typeof _a7e!="undefined"){throw new Error("newItem() was passed something other than an object");}var _a80=null;var _a81=this._getIdentifierAttribute();if(_a81===Number){_a80=this._arrayOfAllItems.length;}else{_a80=_a7e[_a81];if(typeof _a80==="undefined"){throw new Error("newItem() was not passed an identity for the new item");}if(_4.isArray(_a80)){throw new Error("newItem() was not passed an single-valued identity");}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[_a80]==="undefined");}this._assert(typeof this._pending._newItems[_a80]==="undefined");this._assert(typeof this._pending._deletedItems[_a80]==="undefined");var _a82={};_a82[this._storeRefPropName]=this;_a82[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[_a80]=_a82;_a82[_a81]=[_a80];}this._arrayOfAllItems.push(_a82);var _a83=null;if(_a7f&&_a7f.parent&&_a7f.attribute){_a83={item:_a7f.parent,attribute:_a7f.attribute,oldValue:undefined};var _a84=this.getValues(_a7f.parent,_a7f.attribute);if(_a84&&_a84.length>0){var _a85=_a84.slice(0,_a84.length);if(_a84.length===1){_a83.oldValue=_a84[0];}else{_a83.oldValue=_a84.slice(0,_a84.length);}_a85.push(_a82);this._setValueOrValues(_a7f.parent,_a7f.attribute,_a85,false);_a83.newValue=this.getValues(_a7f.parent,_a7f.attribute);}else{this._setValueOrValues(_a7f.parent,_a7f.attribute,_a82,false);_a83.newValue=_a82;}}else{_a82[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(_a82);}this._pending._newItems[_a80]=_a82;for(var key in _a7e){if(key===this._storeRefPropName||key===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem");}var _a87=_a7e[key];if(!_4.isArray(_a87)){_a87=[_a87];}_a82[key]=_a87;if(this.referenceIntegrity){for(var i=0;i<_a87.length;i++){var val=_a87[i];if(this.isItem(val)){this._addReferenceToMap(val,_a82,key);}}}}this.onNew(_a82,_a83);return _a82;},_removeArrayElement:function(_a8a,_a8b){var _a8c=_4.indexOf(_a8a,_a8b);if(_a8c!=-1){_a8a.splice(_a8c,1);return true;}return false;},deleteItem:function(item){this._assert(!this._saveInProgress);this._assertIsItem(item);var _a8e=item[this._itemNumPropName];var _a8f=this.getIdentity(item);if(this.referenceIntegrity){var _a90=this.getAttributes(item);if(item[this._reverseRefMap]){item["backup_"+this._reverseRefMap]=_4.clone(item[this._reverseRefMap]);}_4.forEach(_a90,function(_a91){_4.forEach(this.getValues(item,_a91),function(_a92){if(this.isItem(_a92)){if(!item["backupRefs_"+this._reverseRefMap]){item["backupRefs_"+this._reverseRefMap]=[];}item["backupRefs_"+this._reverseRefMap].push({id:this.getIdentity(_a92),attr:_a91});this._removeReferenceFromMap(_a92,item,_a91);}},this);},this);var _a93=item[this._reverseRefMap];if(_a93){for(var _a94 in _a93){var _a95=null;if(this._itemsByIdentity){_a95=this._itemsByIdentity[_a94];}else{_a95=this._arrayOfAllItems[_a94];}if(_a95){for(var _a96 in _a93[_a94]){var _a97=this.getValues(_a95,_a96)||[];var _a98=_4.filter(_a97,function(_a99){return !(this.isItem(_a99)&&this.getIdentity(_a99)==_a8f);},this);this._removeReferenceFromMap(item,_a95,_a96);if(_a98.length<_a97.length){this._setValueOrValues(_a95,_a96,_a98,true);}}}}}}this._arrayOfAllItems[_a8e]=null;item[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[_a8f];}this._pending._deletedItems[_a8f]=item;if(item[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,item);}this.onDelete(item);return true;},setValue:function(item,_a9b,_a9c){return this._setValueOrValues(item,_a9b,_a9c,true);},setValues:function(item,_a9e,_a9f){return this._setValueOrValues(item,_a9e,_a9f,true);},unsetAttribute:function(item,_aa1){return this._setValueOrValues(item,_aa1,[],true);},_setValueOrValues:function(item,_aa3,_aa4,_aa5){this._assert(!this._saveInProgress);this._assertIsItem(item);this._assert(_4.isString(_aa3));this._assert(typeof _aa4!=="undefined");var _aa6=this._getIdentifierAttribute();if(_aa3==_aa6){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.");}var _aa7=this._getValueOrValues(item,_aa3);var _aa8=this.getIdentity(item);if(!this._pending._modifiedItems[_aa8]){var _aa9={};for(var key in item){if((key===this._storeRefPropName)||(key===this._itemNumPropName)||(key===this._rootItemPropName)){_aa9[key]=item[key];}else{if(key===this._reverseRefMap){_aa9[key]=_4.clone(item[key]);}else{_aa9[key]=item[key].slice(0,item[key].length);}}}this._pending._modifiedItems[_aa8]=_aa9;}var _aab=false;if(_4.isArray(_aa4)&&_aa4.length===0){_aab=delete item[_aa3];_aa4=undefined;if(this.referenceIntegrity&&_aa7){var _aac=_aa7;if(!_4.isArray(_aac)){_aac=[_aac];}for(var i=0;i<_aac.length;i++){var _aae=_aac[i];if(this.isItem(_aae)){this._removeReferenceFromMap(_aae,item,_aa3);}}}}else{var _aaf;if(_4.isArray(_aa4)){var _ab0=_aa4;_aaf=_aa4.slice(0,_aa4.length);}else{_aaf=[_aa4];}if(this.referenceIntegrity){if(_aa7){var _aac=_aa7;if(!_4.isArray(_aac)){_aac=[_aac];}var map={};_4.forEach(_aac,function(_ab2){if(this.isItem(_ab2)){var id=this.getIdentity(_ab2);map[id.toString()]=true;}},this);_4.forEach(_aaf,function(_ab4){if(this.isItem(_ab4)){var id=this.getIdentity(_ab4);if(map[id.toString()]){delete map[id.toString()];}else{this._addReferenceToMap(_ab4,item,_aa3);}}},this);for(var rId in map){var _ab7;if(this._itemsByIdentity){_ab7=this._itemsByIdentity[rId];}else{_ab7=this._arrayOfAllItems[rId];}this._removeReferenceFromMap(_ab7,item,_aa3);}}else{for(var i=0;i<_aaf.length;i++){var _aae=_aaf[i];if(this.isItem(_aae)){this._addReferenceToMap(_aae,item,_aa3);}}}}item[_aa3]=_aaf;_aab=true;}if(_aa5){this.onSet(item,_aa3,_aa7,_aa4);}return _aab;},_addReferenceToMap:function(_ab8,_ab9,_aba){var _abb=this.getIdentity(_ab9);var _abc=_ab8[this._reverseRefMap];if(!_abc){_abc=_ab8[this._reverseRefMap]={};}var _abd=_abc[_abb];if(!_abd){_abd=_abc[_abb]={};}_abd[_aba]=true;},_removeReferenceFromMap:function(_abe,_abf,_ac0){var _ac1=this.getIdentity(_abf);var _ac2=_abe[this._reverseRefMap];var _ac3;if(_ac2){for(_ac3 in _ac2){if(_ac3==_ac1){delete _ac2[_ac3][_ac0];if(this._isEmpty(_ac2[_ac3])){delete _ac2[_ac3];}}}if(this._isEmpty(_ac2)){delete _abe[this._reverseRefMap];}}},_dumpReferenceMap:function(){var i;for(i=0;i<this._arrayOfAllItems.length;i++){var item=this._arrayOfAllItems[i];if(item&&item[this._reverseRefMap]){console.log("Item: ["+this.getIdentity(item)+"] is referenced by: "+_4.toJson(item[this._reverseRefMap]));}}},_getValueOrValues:function(item,_ac7){var _ac8=undefined;if(this.hasAttribute(item,_ac7)){var _ac9=this.getValues(item,_ac7);if(_ac9.length==1){_ac8=_ac9[0];}else{_ac8=_ac9;}}return _ac8;},_flatten:function(_aca){if(this.isItem(_aca)){var item=_aca;var _acc=this.getIdentity(item);var _acd={_reference:_acc};return _acd;}else{if(typeof _aca==="object"){for(var type in this._datatypeMap){var _acf=this._datatypeMap[type];if(_4.isObject(_acf)&&!_4.isFunction(_acf)){if(_aca instanceof _acf.type){if(!_acf.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]");}return {_type:type,_value:_acf.serialize(_aca)};}}else{if(_aca instanceof _acf){return {_type:type,_value:_aca.toString()};}}}}return _aca;}},_getNewFileContentString:function(){var _ad0={};var _ad1=this._getIdentifierAttribute();if(_ad1!==Number){_ad0.identifier=_ad1;}if(this._labelAttr){_ad0.label=this._labelAttr;}_ad0.items=[];for(var i=0;i<this._arrayOfAllItems.length;++i){var item=this._arrayOfAllItems[i];if(item!==null){var _ad4={};for(var key in item){if(key!==this._storeRefPropName&&key!==this._itemNumPropName){var _ad6=key;var _ad7=this.getValues(item,_ad6);if(_ad7.length==1){_ad4[_ad6]=this._flatten(_ad7[0]);}else{var _ad8=[];for(var j=0;j<_ad7.length;++j){_ad8.push(this._flatten(_ad7[j]));_ad4[_ad6]=_ad8;}}}}_ad0.items.push(_ad4);}}var _ada=true;return _4.toJson(_ad0,_ada);},_isEmpty:function(_adb){var _adc=true;if(_4.isObject(_adb)){var i;for(i in _adb){_adc=false;break;}}else{if(_4.isArray(_adb)){if(_adb.length>0){_adc=false;}}}return _adc;},save:function(_ade){this._assert(!this._saveInProgress);this._saveInProgress=true;var self=this;var _ae0=function(){self._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};self._saveInProgress=false;if(_ade&&_ade.onComplete){var _ae1=_ade.scope||_4.global;_ade.onComplete.call(_ae1);}};var _ae2=function(err){self._saveInProgress=false;if(_ade&&_ade.onError){var _ae4=_ade.scope||_4.global;_ade.onError.call(_ae4,err);}};if(this._saveEverything){var _ae5=this._getNewFileContentString();this._saveEverything(_ae0,_ae2,_ae5);}if(this._saveCustom){this._saveCustom(_ae0,_ae2);}if(!this._saveEverything&&!this._saveCustom){_ae0();}},revert:function(){this._assert(!this._saveInProgress);var _ae6;for(_ae6 in this._pending._modifiedItems){var _ae7=this._pending._modifiedItems[_ae6];var _ae8=null;if(this._itemsByIdentity){_ae8=this._itemsByIdentity[_ae6];}else{_ae8=this._arrayOfAllItems[_ae6];}_ae7[this._storeRefPropName]=this;_ae8[this._storeRefPropName]=null;var _ae9=_ae8[this._itemNumPropName];this._arrayOfAllItems[_ae9]=_ae7;if(_ae8[this._rootItemPropName]){var i;for(i=0;i<this._arrayOfTopLevelItems.length;i++){var _aeb=this._arrayOfTopLevelItems[i];if(this.getIdentity(_aeb)==_ae6){this._arrayOfTopLevelItems[i]=_ae7;break;}}}if(this._itemsByIdentity){this._itemsByIdentity[_ae6]=_ae7;}}var _aec;for(_ae6 in this._pending._deletedItems){_aec=this._pending._deletedItems[_ae6];_aec[this._storeRefPropName]=this;var _aed=_aec[this._itemNumPropName];if(_aec["backup_"+this._reverseRefMap]){_aec[this._reverseRefMap]=_aec["backup_"+this._reverseRefMap];delete _aec["backup_"+this._reverseRefMap];}this._arrayOfAllItems[_aed]=_aec;if(this._itemsByIdentity){this._itemsByIdentity[_ae6]=_aec;}if(_aec[this._rootItemPropName]){this._arrayOfTopLevelItems.push(_aec);}}for(_ae6 in this._pending._deletedItems){_aec=this._pending._deletedItems[_ae6];if(_aec["backupRefs_"+this._reverseRefMap]){_4.forEach(_aec["backupRefs_"+this._reverseRefMap],function(_aee){var _aef;if(this._itemsByIdentity){_aef=this._itemsByIdentity[_aee.id];}else{_aef=this._arrayOfAllItems[_aee.id];}this._addReferenceToMap(_aef,_aec,_aee.attr);},this);delete _aec["backupRefs_"+this._reverseRefMap];}}for(_ae6 in this._pending._newItems){var _af0=this._pending._newItems[_ae6];_af0[this._storeRefPropName]=null;this._arrayOfAllItems[_af0[this._itemNumPropName]]=null;if(_af0[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,_af0);}if(this._itemsByIdentity){delete this._itemsByIdentity[_ae6];}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true;},isDirty:function(item){if(item){var _af2=this.getIdentity(item);return new Boolean(this._pending._newItems[_af2]||this._pending._modifiedItems[_af2]||this._pending._deletedItems[_af2]).valueOf();}else{if(!this._isEmpty(this._pending._newItems)||!this._isEmpty(this._pending._modifiedItems)||!this._isEmpty(this._pending._deletedItems)){return true;}return false;}},onSet:function(item,_af4,_af5,_af6){},onNew:function(_af7,_af8){},onDelete:function(_af9){},close:function(_afa){if(this.clearOnClose){if(!this.isDirty()){this.inherited(arguments);}else{if(this._jsonFileUrl!==""){throw new Error("dojo.data.ItemFileWriteStore: There are unsaved changes present in the store.  Please save or revert the changes before invoking close.");}}}}});}if(!_4._hasResource["dijit.form.TextBox"]){_4._hasResource["dijit.form.TextBox"]=true;_4.provide("dijit.form.TextBox");_4.declare("dijit.form.TextBox",_5.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",templateString:"<input class=\"dijit dijitReset dijitLeft\" dojoAttachPoint='textbox,focusNode' name=\"${name}\"\r\n\tdojoAttachEvent='onmouseenter:_onMouse,onmouseleave:_onMouse,onfocus:_onMouse,onblur:_onMouse,onkeypress:_onKeyPress'\r\n\tautocomplete=\"off\" type=\"${type}\"\r\n\t/>\r\n",baseClass:"dijitTextBox",attributeMap:_4.mixin(_4.clone(_5.form._FormValueWidget.prototype.attributeMap),{maxLength:"focusNode"}),_getValueAttr:function(){return this.parse(this.attr("displayedValue"),this.constraints);},_setValueAttr:function(_afb,_afc,_afd){var _afe;if(_afb!==undefined){_afe=this.filter(_afb);if(_afe!==null&&((typeof _afe!="number")||!isNaN(_afe))){if(typeof _afd!="string"){_afd=this.format(_afe,this.constraints);}}else{_afd="";}}if(_afd!=null&&_afd!=undefined){this.textbox.value=_afd;}_5.form.TextBox.superclass._setValueAttr.call(this,_afe,_afc);},displayedValue:"",getDisplayedValue:function(){_4.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use attr('displayedValue') instead.","","2.0");return this.attr("displayedValue");},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},setDisplayedValue:function(_aff){_4.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use attr('displayedValue', ...) instead.","","2.0");this.attr("displayedValue",_aff);},_setDisplayedValueAttr:function(_b00){this.textbox.value=_b00;this._setValueAttr(this.attr("value"));},format:function(_b01,_b02){return ((_b01==null||_b01==undefined)?"":(_b01.toString?_b01.toString():_b01));},parse:function(_b03,_b04){return _b03;},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this._layoutHack();},filter:function(val){if(typeof val!="string"){return val;}if(this.trim){val=_4.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.attr("value"),(this.isValid?this.isValid():true));},_onBlur:function(){this._setBlurValue();this.inherited(arguments);}});_5.selectInputText=function(_b07,_b08,stop){var _b0a=_4.global;var _b0b=_4.doc;_b07=_4.byId(_b07);if(isNaN(_b08)){_b08=0;}if(isNaN(stop)){stop=_b07.value?_b07.value.length:0;}_b07.focus();if(_b0b["selection"]&&_4.body()["createTextRange"]){if(_b07.createTextRange){var _b0c=_b07.createTextRange();with(_b0c){collapse(true);moveStart("character",_b08);moveEnd("character",stop);select();}}}else{if(_b0a["getSelection"]){var _b0d=_b0a.getSelection();if(_b07.setSelectionRange){_b07.setSelectionRange(_b08,stop);}}}};}if(!_4._hasResource["dijit.Tooltip"]){_4._hasResource["dijit.Tooltip"]=true;_4.provide("dijit.Tooltip");_4.declare("dijit._MasterTooltip",[_5._Widget,_5._Templated],{duration:_5.defaultDuration,templateString:"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\">\r\n\t<div class=\"dijitTooltipContainer dijitTooltipContents\" dojoAttachPoint=\"containerNode\" waiRole='alert'></div>\r\n\t<div class=\"dijitTooltipConnector\"></div>\r\n</div>\r\n",postCreate:function(){_4.body().appendChild(this.domNode);this.bgIframe=new _5.BackgroundIframe(this.domNode);this.fadeIn=_4.fadeIn({node:this.domNode,duration:this.duration,onEnd:_4.hitch(this,"_onShow")});this.fadeOut=_4.fadeOut({node:this.domNode,duration:this.duration,onEnd:_4.hitch(this,"_onHide")});},show:function(_b0e,_b0f,_b10,_b11){if(this.aroundNode&&this.aroundNode===_b0f){}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_b0e;this.domNode.style.top=(this.domNode.offsetTop+1)+"px";var _b12={};var ltr=this.isLeftToRight();_4.forEach((_b10&&_b10.length)?_b10:_5.Tooltip.defaultPosition,function(pos){switch(pos){case "after":_b12[ltr?"BR":"BL"]=ltr?"BL":"BR";break;case "before":_b12[ltr?"BL":"BR"]=ltr?"BR":"BL";break;case "below":_b12[ltr?"BL":"BR"]=ltr?"TL":"TR";_b12[ltr?"BR":"BL"]=ltr?"TR":"TL";break;case "above":default:_b12[ltr?"TL":"TR"]=ltr?"BL":"BR";_b12[ltr?"TR":"TL"]=ltr?"BR":"BL";break;}});var pos=_5.placeOnScreenAroundElement(this.domNode,_b0f,_b12,_4.hitch(this,"orient"));_4.style(this.domNode,"opacity",0);this.timerHandle=setTimeout(function(){_5.hideTooltip();},5000);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_b0f;this.tiledViewerTrackID=_b11||this.tiledViewerTrackID;},getTiledViewerTrackID:function(){return this.tiledViewerTrackID;},orient:function(node,_b17,_b18,_b19){node.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_b17+"-"+_b18];if(_b19&&_b19!=0){_4.addClass(node,"dijitTooltipOverflow");}else{_4.removeClass(node,"dijitTooltipOverflow");}_4.forEach(node.childNodes,function(_b1a,i){if(_b1a.className&&_b1a.className.indexOf("dijitTooltipConnector")>-1){if(_b19&&_b19!=0){_4.style(_b1a,"left",node.tab_pos_x);}else{_4.style(_b1a,"left","auto");}}});},_onShow:function(){if(_4.isIE){this.domNode.style.filter="";}},close:function(){this.hide();},hide:function(_b1c){if(this.timerHandle){clearTimeout(this.timerHandle);delete this.timerHandle;}if(this._onDeck&&this._onDeck[1]==_b1c){this._onDeck=null;}else{this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}},_onHide:function(){if(this.domNode){this.domNode.style.cssText="";}if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});_5.showTooltip=function(_b1d,_b1e,_b1f,_b20){if(!_5._masterTT){_5._masterTT=new _5._MasterTooltip();}return _5._masterTT.show(_b1d,_b1e,_b1f,_b20);};_5.hideTooltip=function(_b21){if(!_5._masterTT){_5._masterTT=new _5._MasterTooltip();}return _5._masterTT.hide(_b21);};_4.declare("dijit.Tooltip",_5._Widget,{label:"",showDelay:400,connectId:[],position:[],postCreate:function(){_4.addClass(this.domNode,"dijitTooltipData");this._connectNodes=[];_4.forEach(this.connectId,function(id){var node=_4.byId(id);if(node){this._connectNodes.push(node);_4.forEach(["onMouseEnter","onMouseLeave","onFocus","onBlur"],function(_b24){this.connect(node,_b24.toLowerCase(),"_"+_b24);},this);if(_4.isIE){node.style.zoom=1;}}},this);},_onMouseEnter:function(e){this._onHover(e);},_onMouseLeave:function(e){this._onUnHover(e);},_onFocus:function(e){this._focus=true;this._onHover(e);this.inherited(arguments);},_onBlur:function(e){this._focus=false;this._onUnHover(e);this.inherited(arguments);},_onHover:function(e){if(!this._showTimer){var _b2a=e.target;this._showTimer=setTimeout(_4.hitch(this,function(){this.open(_b2a);}),this.showDelay);}},_onUnHover:function(e){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_b2c){_b2c=_b2c||this._connectNodes[0];if(!_b2c){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}_5.showTooltip(this.label||this.domNode.innerHTML,_b2c,this.position);this._connectNode=_b2c;},close:function(){if(this._connectNode){_5.hideTooltip(this._connectNode);delete this._connectNode;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},uninitialize:function(){this.close();}});_5.Tooltip.defaultPosition=["after","before"];}if(!_4._hasResource["dijit.form.ValidationTextBox"]){_4._hasResource["dijit.form.ValidationTextBox"]=true;_4.provide("dijit.form.ValidationTextBox");_4.declare("dijit.form.ValidationTextBox",_5.form.TextBox,{templateString:"<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\r\n\tid=\"widget_${id}\"\r\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\" waiRole=\"presentation\"\r\n\t><div style=\"overflow:hidden;\"\r\n\t\t><div class=\"dijitReset dijitValidationIcon\"><br></div\r\n\t\t><div class=\"dijitReset dijitValidationIconText\">&Chi;</div\r\n\t\t><div class=\"dijitReset dijitInputField\"\r\n\t\t\t><input class=\"dijitReset\" dojoAttachPoint='textbox,focusNode' dojoAttachEvent='onfocus:_update,onkeyup:_update,onblur:_onMouse,onkeypress:_onKeyPress' autocomplete=\"off\"\r\n\t\t\ttype='${type}' name='${name}'\r\n\t\t/></div\r\n\t></div\r\n></div>\r\n",baseClass:"dijitTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(_b2d){return this.regExp;},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused);},validator:function(_b2e,_b2f){return (new RegExp("^(?:"+this.regExpGen(_b2f)+")"+(this.required?"":"?")+"$")).test(_b2e)&&(!this.required||!this._isEmpty(_b2e))&&(this._isEmpty(_b2e)||this.parse(_b2e,_b2f)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(_b30){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_b31){return /^\s*$/.test(_b31);},getErrorMessage:function(_b32){return this.invalidMessage;},getPromptMessage:function(_b33){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_b34){var _b35="";var _b36=this.disabled||this.isValid(_b34);if(_b36){this._maskValidSubsetError=true;}var _b37=!_b36&&_b34&&this._isValidSubset();var _b38=this._isEmpty(this.textbox.value);this.state=(_b36||(!this._hasBeenBlurred&&_b38)||_b37)?"":"Error";if(this.state=="Error"){this._maskValidSubsetError=false;}this._setStateClass();_5.setWaiState(this.focusNode,"invalid",_b36?"false":"true");if(_b34){if(_b38){_b35=this.getPromptMessage(true);}if(!_b35&&(this.state=="Error"||(_b37&&!this._maskValidSubsetError))){_b35=this.getErrorMessage(true);}}this.displayMessage(_b35);return _b36;},_message:"",displayMessage:function(_b39){if(this._message==_b39){return;}this._message=_b39;_5.hideTooltip(this.domNode);if(_b39){_5.showTooltip(_b39,this.domNode,this.tooltipPosition);}},_refreshState:function(){this.validate(this._focused);},_update:function(e){this._refreshState();this._onMouse(e);},constructor:function(){this.constraints={};},postMixInProperties:function(){this.inherited(arguments);this.constraints.locale=this.lang;this.messages=_4.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage;}var p=this.regExpGen(this.constraints);this.regExp=p;var _b3c="";if(p!=".*"){this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_b3c+=re;break;case ")":_b3c+="|$)";break;default:_b3c+="(?:"+re+"|$)";break;}});}try{"".search(_b3c);}catch(e){_b3c=this.regExp;console.debug("RegExp error in "+this.declaredClass+": "+this.regExp);}this._partialre="^(?:"+_b3c+")$";},_setDisabledAttr:function(_b3e){this.inherited(arguments);if(this.valueNode){this.valueNode.disabled=_b3e;}this._refreshState();},_setRequiredAttr:function(_b3f){this.required=_b3f;_5.setWaiState(this.focusNode,"required",_b3f);this._refreshState();},postCreate:function(){if(_4.isIE){var s=_4.getComputedStyle(this.focusNode);if(s){var ff=s.fontFamily;if(ff){this.focusNode.style.fontFamily=ff;}}}this.inherited(arguments);}});_4.declare("dijit.form.MappedTextBox",_5.form.ValidationTextBox,{serialize:function(val,_b43){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.attr("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);var _b45=this.textbox;var _b46=(this.valueNode=_4.doc.createElement("input"));_b46.setAttribute("type",_b45.type);_4.style(_b46,"display","none");this.valueNode.name=this.textbox.name;_4.place(_b46,_b45,"after");this.textbox.name=this.textbox.name+"_displayed_";this.textbox.removeAttribute("name");},_setDisabledAttr:function(_b47){this.inherited(arguments);_4.attr(this.valueNode,"disabled",_b47);}});_4.declare("dijit.form.RangeBoundTextBox",_5.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(_b48,_b49){var _b4a="min" in _b49;var _b4b="max" in _b49;if(_b4a||_b4b){return (!_b4a||this.compare(_b48,_b49.min)>=0)&&(!_b4b||this.compare(_b48,_b49.max)<=0);}return true;},isInRange:function(_b4c){return this.rangeCheck(this.attr("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.attr("value");var _b4e=false;var _b4f=false;if("min" in this.constraints){var min=this.constraints.min;val=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min);_b4e=(typeof val=="number")&&val<0;}if("max" in this.constraints){var max=this.constraints.max;val=this.compare(val,((typeof max!="number")||max>0)?max:0);_b4f=(typeof val=="number")&&val>0;}return _b4e||_b4f;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_b52){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_b52));},getErrorMessage:function(_b53){if(_5.form.RangeBoundTextBox.superclass.isValid.call(this,false)&&!this.isInRange(_b53)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=_4.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},postCreate:function(){this.inherited(arguments);if(this.constraints.min!==undefined){_5.setWaiState(this.focusNode,"valuemin",this.constraints.min);}if(this.constraints.max!==undefined){_5.setWaiState(this.focusNode,"valuemax",this.constraints.max);}},_setValueAttr:function(_b54,_b55){_5.setWaiState(this.focusNode,"valuenow",_b54);this.inherited(arguments);}});}if(!_4._hasResource["dijit.form.ComboBox"]){_4._hasResource["dijit.form.ComboBox"]=true;_4.provide("dijit.form.ComboBox");_4.declare("dijit.form.ComboBoxMixin",null,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:"<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\r\n\tid=\"widget_${id}\"\r\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\" dojoAttachPoint=\"comboNode\" waiRole=\"combobox\" tabIndex=\"-1\"\r\n\t><div style=\"overflow:hidden;\"\r\n\t\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton'\r\n\t\t\tdojoAttachPoint=\"downArrowNode\" waiRole=\"presentation\"\r\n\t\t\tdojoAttachEvent=\"onmousedown:_onArrowMouseDown,onmouseup:_onMouse,onmouseenter:_onMouse,onmouseleave:_onMouse\"\r\n\t\t\t><div class=\"dijitArrowButtonInner\">&thinsp;</div\r\n\t\t\t><div class=\"dijitArrowButtonChar\">&#9660;</div\r\n\t\t></div\r\n\t\t><div class=\"dijitReset dijitValidationIcon\"><br></div\r\n\t\t><div class=\"dijitReset dijitValidationIconText\">&Chi;</div\r\n\t\t><div class=\"dijitReset dijitInputField\"\r\n\t\t\t><input type=\"text\" autocomplete=\"off\" name=\"${name}\" class='dijitReset'\r\n\t\t\tdojoAttachEvent=\"onkeypress:_onKeyPress, onfocus:_update, compositionend\"\r\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" waiRole=\"textbox\" waiState=\"haspopup-true,autocomplete-list\"\r\n\t\t/></div\r\n\t></div\r\n></div>\r\n",baseClass:"dijitComboBox",_getCaretPos:function(_b56){var pos=0;if(typeof (_b56.selectionStart)=="number"){pos=_b56.selectionStart;}else{if(_4.isIE){var tr=_4.doc.selection.createRange().duplicate();var ntr=_b56.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_b5a,_b5b){_b5b=parseInt(_b5b);_5.selectInputText(_b5a,_b5b,_b5b);},_setDisabledAttr:function(_b5c){_5.setWaiState(this.comboNode,"disabled",_b5c);},_onKeyPress:function(evt){var key=evt.charOrCode;if(evt.altKey||(evt.ctrlKey&&(key!="x"&&key!="v"))||evt.key==_4.keys.SHIFT){return;}var _b5f=false;var pw=this._popupWidget;var dk=_4.keys;if(this._isShowingNow){pw.handleKey(key);}switch(key){case dk.PAGE_DOWN:case dk.DOWN_ARROW:if(!this._isShowingNow||this._prev_key_esc){this._arrowPressed();_b5f=true;}else{this._announceOption(pw.getHighlightedOption());}_4.stopEvent(evt);this._prev_key_backspace=false;this._prev_key_esc=false;break;case dk.PAGE_UP:case dk.UP_ARROW:if(this._isShowingNow){this._announceOption(pw.getHighlightedOption());}_4.stopEvent(evt);this._prev_key_backspace=false;this._prev_key_esc=false;break;case dk.ENTER:var _b62;if(this._isShowingNow&&(_b62=pw.getHighlightedOption())){if(_b62==pw.nextButton){this._nextSearch(1);_4.stopEvent(evt);break;}else{if(_b62==pw.previousButton){this._nextSearch(-1);_4.stopEvent(evt);break;}}}else{this._setDisplayedValueAttr(this.attr("displayedValue"),true);}evt.preventDefault();case dk.TAB:var _b63=this.attr("displayedValue");if(pw&&(_b63==pw._messages["previousMessage"]||_b63==pw._messages["nextMessage"])){break;}if(this._isShowingNow){this._prev_key_backspace=false;this._prev_key_esc=false;if(pw.getHighlightedOption()){pw.attr("value",{target:pw.getHighlightedOption()});}this._lastQuery=null;this._hideResultList();}break;case " ":this._prev_key_backspace=false;this._prev_key_esc=false;if(this._isShowingNow&&pw.getHighlightedOption()){_4.stopEvent(evt);this._selectOption();this._hideResultList();}else{_b5f=true;}break;case dk.ESCAPE:this._prev_key_backspace=false;this._prev_key_esc=true;if(this._isShowingNow){_4.stopEvent(evt);this._hideResultList();}else{this.inherited(arguments);}break;case dk.DELETE:case dk.BACKSPACE:this._prev_key_esc=false;this._prev_key_backspace=true;_b5f=true;break;case dk.RIGHT_ARROW:case dk.LEFT_ARROW:this._prev_key_backspace=false;this._prev_key_esc=false;break;default:this._prev_key_backspace=false;this._prev_key_esc=false;_b5f=typeof key=="string";}if(this.searchTimer){clearTimeout(this.searchTimer);}if(_b5f){setTimeout(_4.hitch(this,"_startSearchFromInput"),1);}},_autoCompleteText:function(text){var fn=this.focusNode;_5.selectInputText(fn,fn.value.length);var _b66=this.ignoreCase?"toLowerCase":"substr";if(text[_b66](0).indexOf(this.focusNode.value[_b66](0))==0){var cpos=this._getCaretPos(fn);if((cpos+1)>fn.value.length){fn.value=text;_5.selectInputText(fn,cpos);}}else{fn.value=text;_5.selectInputText(fn);}},_openResultList:function(_b68,_b69){if(this.disabled||this.readOnly||(_b69.query[this.searchAttr]!=this._lastQuery)){return;}this._popupWidget.clearResultList();if(!_b68.length){this._hideResultList();return;}var _b6a=new String(this.store.getValue(_b68[0],this.searchAttr));if(_b6a&&this.autoComplete&&!this._prev_key_backspace&&(_b69.query[this.searchAttr]!="*")){this._autoCompleteText(_b6a);}_b69._maxOptions=this._maxOptions;this._popupWidget.createOptions(_b68,_b69,_4.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(_b69.direction){if(1==_b69.direction){this._popupWidget.highlightFirstOption();}else{if(-1==_b69.direction){this._popupWidget.highlightLastOption();}}this._announceOption(this._popupWidget.getHighlightedOption());}},_showResultList:function(){this._hideResultList();var _b6b=this._popupWidget.getItems(),_b6c=Math.min(_b6b.length,this.maxListLength);this._arrowPressed();this.displayMessage("");_4.style(this._popupWidget.domNode,{width:"",height:""});var best=this.open();var _b6e=_4.marginBox(this._popupWidget.domNode);this._popupWidget.domNode.style.overflow=((best.h==_b6e.h)&&(best.w==_b6e.w))?"hidden":"auto";var _b6f=best.w;if(best.h<this._popupWidget.domNode.scrollHeight){_b6f+=16;}_4.marginBox(this._popupWidget.domNode,{h:best.h,w:Math.max(_b6f,this.domNode.offsetWidth)});_5.setWaiState(this.comboNode,"expanded","true");},_hideResultList:function(){if(this._isShowingNow){_5.popup.close(this._popupWidget);this._arrowIdle();this._isShowingNow=false;_5.setWaiState(this.comboNode,"expanded","false");_5.removeWaiState(this.focusNode,"activedescendant");}},_setBlurValue:function(){var _b70=this.attr("displayedValue");var pw=this._popupWidget;if(pw&&(_b70==pw._messages["previousMessage"]||_b70==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{this.attr("displayedValue",_b70);}},_onBlur:function(){this._hideResultList();this._arrowIdle();this.inherited(arguments);},_announceOption:function(node){if(node==null){return;}var _b73;if(node==this._popupWidget.nextButton||node==this._popupWidget.previousButton){_b73=node.innerHTML;}else{_b73=this.store.getValue(node.item,this.searchAttr);}this.focusNode.value=this.focusNode.value.substring(0,this._getCaretPos(this.focusNode));_5.setWaiState(this.focusNode,"activedescendant",_4.attr(node,"id"));this._autoCompleteText(_b73);},_selectOption:function(evt){var tgt=null;if(!evt){evt={target:this._popupWidget.getHighlightedOption()};}if(!evt.target){this.attr("displayedValue",this.attr("displayedValue"));return;}else{tgt=evt.target;}if(!evt.noHide){this._hideResultList();this._setCaretPos(this.focusNode,this.store.getValue(tgt.item,this.searchAttr).length);}this._doSelect(tgt);},_doSelect:function(tgt){this.item=tgt.item;this.attr("value",this.store.getValue(tgt.item,this.searchAttr));},_onArrowMouseDown:function(evt){if(this.disabled||this.readOnly){return;}_4.stopEvent(evt);this.focus();if(this._isShowingNow){this._hideResultList();}else{this._startSearch("");}},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_getQueryString:function(text){return _4.string.substitute(this.queryExpr,[text]);},_startSearch:function(key){if(!this._popupWidget){var _b7a=this.id+"_popup";this._popupWidget=new _5.form._ComboBoxMenu({onChange:_4.hitch(this,this._selectOption),id:_b7a});_5.removeWaiState(this.focusNode,"activedescendant");_5.setWaiState(this.textbox,"owns",_b7a);}this.item=null;var _b7b=_4.clone(this.query);this._lastInput=key;this._lastQuery=_b7b[this.searchAttr]=this._getQueryString(key);this.searchTimer=setTimeout(_4.hitch(this,function(_b7c,_b7d){var _b7e={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:_b7c,onBegin:_4.hitch(this,"_setMaxOptions"),onComplete:_4.hitch(this,"_openResultList"),onError:function(_b7f){console.error("dijit.form.ComboBox: "+_b7f);_4.hitch(_b7d,"_hideResultList")();},start:0,count:this.pageSize};_4.mixin(_b7e,_b7d.fetchProperties);var _b80=_b7d.store.fetch(_b7e);var _b81=function(_b82,_b83){_b82.start+=_b82.count*_b83;_b82.direction=_b83;this.store.fetch(_b82);};this._nextSearch=this._popupWidget.onPage=_4.hitch(this,_b81,_b80);},_b7b,this),this.searchDelay);},_setMaxOptions:function(size,_b85){this._maxOptions=size;},_getValueField:function(){return this.searchAttr;},_arrowPressed:function(){if(!this.disabled&&!this.readOnly&&this.hasDownArrow){_4.addClass(this.downArrowNode,"dijitArrowButtonActive");}},_arrowIdle:function(){if(!this.disabled&&!this.readOnly&&this.hasDownArrow){_4.removeClass(this.downArrowNode,"dojoArrowButtonPushed");}},compositionend:function(evt){this._onKeyPress({charCode:-1});},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.hasDownArrow){this.baseClass="dijitTextBox";}if(!this.store){var _b87=this.srcNodeRef;this.store=new _5.form._ComboBoxDataStore(_b87);if(!this.value||((typeof _b87.selectedIndex=="number")&&_b87.selectedIndex.toString()===this.value)){var item=this.store.fetchSelectedItem();if(item){this.value=this.store.getValue(item,this._getValueField());}}}},_postCreate:function(){var _b89=_4.query("label[for=\""+this.id+"\"]");if(_b89.length){_b89[0].id=(this.id+"_label");var cn=this.comboNode;_5.setWaiState(cn,"labelledby",_b89[0].id);}},uninitialize:function(){if(this._popupWidget){this._hideResultList();this._popupWidget.destroy();}},_getMenuLabelFromItem:function(item){var _b8c=this.store.getValue(item,this.labelAttr||this.searchAttr);var _b8d=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_b8c=this.doHighlight(_b8c,this._escapeHtml(this._lastInput));_b8d="html";}return {html:_b8d=="html",label:_b8c};},doHighlight:function(_b8e,find){var _b90="i"+(this.highlightMatch=="all"?"g":"");var _b91=this._escapeHtml(_b8e);var ret=_b91.replace(new RegExp("^("+find+")",_b90),"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");if(_b91==ret){ret=_b91.replace(new RegExp(" ("+find+")",_b90)," <span class=\"dijitComboBoxHighlightMatch\">$1</span>");}return ret;},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},open:function(){this._isShowingNow=true;return _5.popup.open({popup:this._popupWidget,around:this.domNode,parent:this});},reset:function(){this.item=null;this.inherited(arguments);}});_4.declare("dijit.form._ComboBoxMenu",[_5._Widget,_5._Templated],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' tabIndex='-1' style='overflow: \"auto\"; overflow-x: \"hidden\";'>"+"<li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton'></li>"+"<li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton'></li>"+"</ul>",_messages:null,postMixInProperties:function(){this._messages=_4.i18n.getLocalization("dijit.form","ComboBox",this.lang);this.inherited("postMixInProperties",arguments);},_setValueAttr:function(_b94){this.value=_b94;this.onChange(_b94);},onChange:function(_b95){},onPage:function(_b96){},postCreate:function(){this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];this.inherited(arguments);},onClose:function(){this._blurOptionNode();},_createOption:function(item,_b98){var _b99=_b98(item);var _b9a=_4.doc.createElement("li");_5.setWaiRole(_b9a,"option");if(_b99.html){_b9a.innerHTML=_b99.label;}else{_b9a.appendChild(_4.doc.createTextNode(_b99.label));}if(_b9a.innerHTML==""){_b9a.innerHTML="&nbsp;";}_b9a.item=item;return _b9a;},createOptions:function(_b9b,_b9c,_b9d){this.previousButton.style.display=(_b9c.start==0)?"none":"";_4.attr(this.previousButton,"id",this.id+"_prev");_4.forEach(_b9b,function(item,i){var _ba0=this._createOption(item,_b9d);_ba0.className="dijitReset dijitMenuItem";_4.attr(_ba0,"id",this.id+i);this.domNode.insertBefore(_ba0,this.nextButton);},this);var _ba1=false;if(_b9c._maxOptions&&_b9c._maxOptions!=-1){if((_b9c.start+_b9c.count)<_b9c._maxOptions){_ba1=true;}else{if((_b9c.start+_b9c.count)>(_b9c._maxOptions-1)){if(_b9c.count==_b9b.length){_ba1=true;}}}}else{if(_b9c.count==_b9b.length){_ba1=true;}}this.nextButton.style.display=_ba1?"":"none";_4.attr(this.nextButton,"id",this.id+"_next");},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);}},getItems:function(){return this.domNode.childNodes;},getListLength:function(){return this.domNode.childNodes.length-2;},_onMouseDown:function(evt){_4.stopEvent(evt);},_onMouseUp:function(evt){if(evt.target===this.domNode){return;}else{if(evt.target==this.previousButton){this.onPage(-1);}else{if(evt.target==this.nextButton){this.onPage(1);}else{var tgt=evt.target;while(!tgt.item){tgt=tgt.parentNode;}this._setValueAttr({target:tgt},true);}}}},_onMouseOver:function(evt){if(evt.target===this.domNode){return;}var tgt=evt.target;if(!(tgt==this.previousButton||tgt==this.nextButton)){while(!tgt.item){tgt=tgt.parentNode;}}this._focusOptionNode(tgt);},_onMouseOut:function(evt){if(evt.target===this.domNode){return;}this._blurOptionNode();},_focusOptionNode:function(node){if(this._highlighted_option!=node){this._blurOptionNode();this._highlighted_option=node;_4.addClass(this._highlighted_option,"dijitMenuItemHover");}},_blurOptionNode:function(){if(this._highlighted_option){_4.removeClass(this._highlighted_option,"dijitMenuItemHover");this._highlighted_option=null;}},_highlightNextOption:function(){var fc=this.domNode.firstChild;if(!this.getHighlightedOption()){this._focusOptionNode(fc.style.display=="none"?fc.nextSibling:fc);}else{var ns=this._highlighted_option.nextSibling;if(ns&&ns.style.display!="none"){this._focusOptionNode(ns);}}_5.scrollIntoView(this._highlighted_option);},highlightFirstOption:function(){this._focusOptionNode(this.domNode.firstChild.nextSibling);_5.scrollIntoView(this._highlighted_option);},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);_5.scrollIntoView(this._highlighted_option);},_highlightPrevOption:function(){var lc=this.domNode.lastChild;if(!this.getHighlightedOption()){this._focusOptionNode(lc.style.display=="none"?lc.previousSibling:lc);}else{var ps=this._highlighted_option.previousSibling;if(ps&&ps.style.display!="none"){this._focusOptionNode(ps);}}_5.scrollIntoView(this._highlighted_option);},_page:function(up){var _bae=0;var _baf=this.domNode.scrollTop;var _bb0=_4.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption();}while(_bae<_bb0){if(up){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break;}this._highlightPrevOption();}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break;}this._highlightNextOption();}var _bb1=this.domNode.scrollTop;_bae+=(_bb1-_baf)*(up?-1:1);_baf=_bb1;}},pageUp:function(){this._page(true);},pageDown:function(){this._page(false);},getHighlightedOption:function(){var ho=this._highlighted_option;return (ho&&ho.parentNode)?ho:null;},handleKey:function(key){switch(key){case _4.keys.DOWN_ARROW:this._highlightNextOption();break;case _4.keys.PAGE_DOWN:this.pageDown();break;case _4.keys.UP_ARROW:this._highlightPrevOption();break;case _4.keys.PAGE_UP:this.pageUp();break;}}});_4.declare("dijit.form.ComboBox",[_5.form.ValidationTextBox,_5.form.ComboBoxMixin],{postMixInProperties:function(){_5.form.ComboBoxMixin.prototype.postMixInProperties.apply(this,arguments);_5.form.ValidationTextBox.prototype.postMixInProperties.apply(this,arguments);},postCreate:function(){_5.form.ComboBoxMixin.prototype._postCreate.apply(this,arguments);_5.form.ValidationTextBox.prototype.postCreate.apply(this,arguments);},_setDisabledAttr:function(_bb4){_5.form.ValidationTextBox.prototype._setDisabledAttr.apply(this,arguments);_5.form.ComboBoxMixin.prototype._setDisabledAttr.apply(this,arguments);},_setValueAttr:function(_bb5,_bb6){if(!_bb5){_bb5="";}_5.form.ValidationTextBox.prototype._setValueAttr.call(this,_bb5,_bb6);}});_4.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(root){this.root=root;_4.query("> option",root).forEach(function(node){node.innerHTML=_4.trim(node.innerHTML);});},getValue:function(item,_bba,_bbb){return (_bba=="value")?item.value:(item.innerText||item.textContent||"");},isItemLoaded:function(_bbc){return true;},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true};},_fetchItems:function(args,_bbe,_bbf){if(!args.query){args.query={};}if(!args.query.name){args.query.name="";}if(!args.queryOptions){args.queryOptions={};}var _bc0=_4.data.util.filter.patternToRegExp(args.query.name,args.queryOptions.ignoreCase),_bc1=_4.query("> option",this.root).filter(function(_bc2){return (_bc2.innerText||_bc2.textContent||"").match(_bc0);});if(args.sort){_bc1.sort(_4.data.util.sorter.createSortFunction(args.sort,this));}_bbe(_bc1,args);},close:function(_bc3){return;},getLabel:function(item){return item.innerHTML;},getIdentity:function(item){return _4.attr(item,"value");},fetchItemByIdentity:function(args){var item=_4.query("option[value='"+args.identity+"']",this.root)[0];args.onItem(item);},fetchSelectedItem:function(){var root=this.root,si=root.selectedIndex;return _4.query("> option:nth-child("+(si!=-1?si+1:1)+")",root)[0];}});_4.extend(_5.form._ComboBoxDataStore,_4.data.util.simpleFetch);}if(!_4._hasResource["tableau.base.widget.SmallSearchWidget"]){_4._hasResource["tableau.base.widget.SmallSearchWidget"]=true;_4.provide("tableau.base.widget.SmallSearchWidget");_4.declare("tableau.base.widget.SmallSearchWidget",[tableau.base.widget.SearchWidgetBase],{templateString:"<div class=\"SmallSearch\"\r\n  ><div class=\"SmallSearchBox\" dojoAttachPoint=\"domSearchBox\"\r\n    ><div class=\"Autocompleter\" dojoAttachPoint=\"domAutocompleter\"></div\r\n    ><div class=\"wcSearchX dijitInlineTable\" title=\"${XBUTTON_CLOSE_TOOLTIP}\"\r\n          dojoAttachPoint=\"domXButton\"\r\n          dojoAttachEvent=\"onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover\"></div\r\n  ></div\r\n></div>\r\n",domSearchBox:null,domAutocompleter:null,startup:function(){this.inherited(arguments);this.autocompleter=new _5.form.ComboBox({store:null,autoComplete:false,hasDownArrow:false,highlightMatch:"none",searchDelay:this.searchDelay,onChange:_4.hitch(this,"applyChanges"),onKeyDown:_4.hitch(this,"onQueryBoxKeyDown")},this.domAutocompleter);this.autocompleter.startup();this.autocompleter._getQueryString=function(text){var len,_bcc;len=text.length;if(len<1){return "";}if(text[0]==="\""&&text[len-1]==="\""){return text.substr(1,len-2);}_bcc=text;if(_bcc.length>1&&_bcc[0]==="\\"&&_bcc[1]==="*"){_bcc="*"+_bcc.substr(2);}if(_bcc.length>1&&_bcc[_bcc.length-2]==="\\"&&_bcc[_bcc.length-1]==="*"){_bcc=_bcc.substr(0,_bcc.length-2)+"*";}if(_bcc[0]!=="*"&&_bcc[_bcc.length-1]!=="*"){_bcc="*"+_bcc+"*";}return _bcc;};var _bcd=this.NO_MATCHES;this.autocompleter.DOJO_openResultList=this.autocompleter._openResultList;this.autocompleter._openResultList=_4.hitch(this.autocompleter,function(_bce,_bcf){this.DOJO_openResultList(_bce,_bcf);if(!_bce.length){this.tooltipPosition=["above","below"];this.displayMessage(_bcd);}else{_5.hideTooltip(this.domNode);}});},getDataStore:function(){var i,_bd1=[],len,t=this.qf.oFilter.table.tuples;for(i=0,len=t.length;i<len;i++){_bd1.push({name:this.formatTuple(t[i])});}return new _4.data.ItemFileWriteStore({data:{items:_bd1}});},destroy:function(_bd4){this.domSearchBox.innerHTML="";this.autocompleter=null;this.inherited(arguments);},focusQueryBox:function(){this.autocompleter.focus();},blurQueryBox:function(){this.autocompleter._onBlur();},getQuery:function(){return this.autocompleter.attr("value");},setQuery:function(_bd5){this.autocompleter.attr("value",_bd5);},fixQueryWidth:function(){var _bd6=_4.marginBox(this.domNode).w,_bd7;if(_bd6>25){_bd7={w:_bd6-25};_4.marginBox(this.autocompleter.comboNode,_bd7);_4.marginBox(this.autocompleter.comboNode.firstChild,_bd7);_4.marginBox(this.autocompleter.textbox,_bd7);}_4.style(this.autocompleter.comboNode,"float","left");},showUI:function(_bd8){if(this.isVisible){return;}this.inherited(arguments);this.qf.modeContents.onSmallSearchUI(true,this.domNode);},hideUI:function(){if(!this.isVisible){return;}this.inherited(arguments);this.qf.modeContents.onSmallSearchUI(false,this.domNode);},layout:function(_bd9){this.fixQueryWidth();},updateSearch:function(){this.autocompleter.store=this.getDataStore();this.qf.modeContents.onSmallSearchUI(this.isVisible,this.domNode);},applyChanges:function(text){var _bdb,i,len,_bde=true,t,_be0,_be1=[];if(!text){return;}_bdb={schema:this.qf.oFilter.table.schema,tuples:[]};t=this.qf.oFilter.table.tuples;for(i=0,len=t.length;i<len;i++){if(text===this.formatTuple(t[i])){_bdb.tuples.push(t[i]);t[i].s=true;}else{if(t[i].s){delete t[i].s;}}}if(_bdb.tuples.length!==0){this.qf.updateStateFromSearch();_be0=_bdb.tuples[0].d||_bdb.tuples[0].t[0].v;_be1.push(_be0);tab.FilterClientCommands.setCategoricalFilterValues(this.qf.session.get_sheetName(),this.qf.field,"filter-replace",_be1);this.clearSearch(false,true);this.onXButtonClick();}}});}if(!_4._hasResource["tableau.base.widget.CategoricalFilter"]){_4._hasResource["tableau.base.widget.CategoricalFilter"]=true;_4.provide("tableau.base.widget.CategoricalFilter");_4.declare("tableau.base.widget.CategoricalFilter",[_5._Widget,_5._Contained,_5._Templated,tableau.base.CategoricalSelectionMixin],{templateString:"<div class=\"CategoricalFilter\"\r\n    ><div class=\"CategoricalFilterBox\" dojoAttachPoint=\"domBox\"\r\n        ><div class=\"TitleAndControls\" dojoAttachPoint=\"domControls\"\r\n            ><div class=\"FilterTitle\" dojoAttachPoint=\"domTitleBar\"\r\n               ><img dojoAttachPoint=\"domTitleImage\"/></div\r\n            ><div dojoType=\"dijit.form.Button\" class=\"CFButton CFSearchButton\" showlabel=\"false\"\r\n             dojoAttachPoint=\"searchButton\" dojoAttachEvent=\"onClick:toggleSearchUI\"\r\n             iconClass=\"wcIconSearch\">Search</div\r\n            ><div dojoType=\"dijit.form.Button\" class=\"CFButton CFDomainButton\" showlabel=\"false\"\r\n             dojoAttachPoint=\"domainButton\" dojoAttachEvent=\"onClick:toggleDomain\"\r\n             iconClass=\"wcIconDomainAll\">Show Fewer Values</div\r\n            ><div dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick:doMenu\" iconClass=\"wcIconContextMenu\"\r\n            class=\"CFButton CFMenuButton\" dojoAttachPoint=\"menuButton\" name=\"type\"></div\r\n        ></div\r\n        ><div dojoAttachPoint=\"searchDiv\"></div\r\n        ><div class=\"CFContent\" dojoAttachPoint=\"domContent\"></div\r\n        ><div class=\"CFHorizScroll\" dojoAttachPoint=\"domHorizScroll\" dojoAttachEvent=\"onscroll:doscrollHoriz\"\r\n            ><div dojoAttachPoint=\"domHorizScrollContent\"></div\r\n        ></div\r\n        ><div dojoType=\"tableau.base.widget.ConditionalsWidget\" dojoAttachPoint=\"conditionals\"></div\r\n    ></div\r\n></div>\r\n",widgetsInTemplate:true,session:null,field:"",oFilter:null,applyDelay:1000,attributes:{},format:{},isTypeInList:false,domTitleBar:null,domContent:null,domBox:null,searchDiv:null,domainButton:null,menuButton:null,stateId:0,rid:0,timestamp:0,searchWidget:null,singleSelectMenuItem:null,multiSelectMenuItem:null,inclusiveMenuItem:null,exclusiveMenuItem:null,getCheckDropdownCatmodeClass:function(){return tableau.base.widget.catmode.CheckDropdown;},getChecklistCatmodeClass:function(){return tableau.base.widget.catmode.Checklist;},getRadiolistCatmodeClass:function(){return tableau.base.widget.catmode.Radiolist;},getSliderCatmodeClass:function(){return tableau.base.widget.catmode.Slider;},getDropdownCatmodeClass:function(){return tableau.base.widget.catmode.Dropdown;},getPatternCatmodeClass:function(){return tableau.base.widget.catmode.Pattern;},getTypeInListCatmodeClass:function(){return tableau.base.widget.catmode.TypeIn;},makeSmallSearchWidget:function(_be2,_be3){return new tableau.base.widget.SmallSearchWidget(_be2,_be3);},makeSearchWidget:function(_be4,_be5){return new tableau.base.widget.SearchWidget(_be4,_be5);},postCreate:function(){var _be6,_be7,_be8;this.getSID=_4.hitch(this,function(){return this.stateId;});this.initMode();this._localize();if(this.mode!=="pattern"){tableau.util.disableTextSelection(this.domContent);}this.timestamp=new Date().getTime();if(this.mode==="slider"||this.mode==="dropdown"){this.searchWidget=this.makeSmallSearchWidget({qf:this},this.searchDiv);}else{this.searchWidget=this.makeSearchWidget({qf:this},this.searchDiv);}this.searchWidget.startup();if(!this.metricsOnly){_be8=(this.mode==="pattern"||this.mode==="typeinlist"||this.shouldHideSearchButton());_be6=(this.mode==="pattern"||this.mode==="typeinlist"||this.shouldHideDomainButton());this.processControlButtons(_be8,_be6,this.shouldHideContextMenu());}this.initFromState(true);},processControlButtons:function(_be9,_bea,_beb){var _bec=0,_bed;_bed=function(_bee,hide){if(hide){_4.addClass(_bee.domNode,"CFButtonHide");}else{_bec+=1;_4.addClass(_bee.domNode,"CFButtonR"+_bec);}};_bed(this.menuButton,_beb);_bed(this.domainButton,_bea);_bed(this.searchButton,_be9);_4.addClass(this.domControls,"CF"+_bec+"Button");},hideEmptyTitlebar:function(){return (""===tableau.format.formatColumnDisplayName(this.oFilter));},setTitleImageSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},shouldHideSearchButton:function(){return this.hideEmptyTitlebar()||this.attributes["show-search"]==="false";},shouldHideDomainButton:function(){return this.hideEmptyTitlebar()||this.attributes["show-domain"]==="false";},shouldHideContextMenu:function(){return this.hideEmptyTitlebar()||this.getContextMenuCommands().commandItems.length===0;},isInlineTitle:function(){return _4.hasClass(this.domNode,"CFInlineTitle");},resize:function(_bf2){_4.marginBox(this.domNode,_bf2);this.layout();},destroy:function(_bf3){if(this.modeContents&&this.modeContents.destroy){this.modeContents.destroy();this.modeContents=null;}if(this.searchWidget){this.searchWidget.destroy();this.searchWidget=null;}this.domContent.innerHTML="";this.inherited(arguments);},getMetrics:function(){var _bf4,_bf5,_bf6=_4.marginBox(this.domNode),pad;if(!this.isCompactFilter()){pad=1;_bf5=_4.contentBox(this.domContent);_bf4=this.domContent.childNodes.length;if(_4.isFF&&tableau.util.isMac){pad+=4;}return {fixed:{w:0,h:_bf6.h-_bf5.h+pad},item:{w:0,h:_bf5.h/_bf4}};}else{return {fixed:{w:0,h:_bf6.h}};}},initMode:function(){this.mode=this.oFilter.mode||"checklist";if(this.oFilter.pattern!==undefined&&this.oFilter.pattern!==null){this.mode="pattern";}this.isTypeInList=this.mode==="typeinlist";},fetchTitleImage:function(){++this.rid;this.domTitleImage.src=this.layoutSession.formatZoneURL("image/png",this.zid)+"&"+this.rid+"Z"+this.timestamp;},initFromState:function(_bf8,_bf9){var _bfa,i,_bfc,_bfd,_bfe,_bff,tF=tableau.format,_c01=tF.formatColumnDisplayName(this.oFilter),sum=0,_c03="",_c04=this.oFilter.show_facets&&this.width>100,_c05;this.initMode();if(this.oFilter.exclude){_c01=tab.Strings.QuickFilterTitleBarExclusive(_c01);}_4.attr(this.domTitleBar,"title",_c01);if(this.hideEmptyTitlebar()){_4.style(this.domTitleImage,"display","none");_4.marginBox(this.domTitleBar,{h:0});}else{this.fetchTitleImage();}if(this.oFilter.catIsHier&&this.mode!=="typeinlist"&&this.mode!=="pattern"){_bfe=true;for(i=0,_bfc=this.oFilter.table.actual_size;i<_bfc;i++){if(!this.oFilter.table.tuples[i].s){_bfe=false;break;}}if(_bfe){this.oFilter.rangeType="all";this.oFilter.all=true;for(i=0;i<_bfc;i++){this.oFilter.table.tuples[i].s=false;}}}_bfd=this.oFilter.all;if(_bfd||this.oFilter.allNotChecked){_4.addClass(this.domNode,"CFAll");}else{_4.removeClass(this.domNode,"CFAll");}if(this.oFilter.exclude){_4.addClass(this.domNode,"CFExclusive");}else{_4.removeClass(this.domNode,"CFExclusive");}this.domContent.innerHTML="";this.updateDomainButton();if(this.modeContents&&this.modeContents.destroy){this.modeContents.destroy();this.modeContents=null;}this.instantiateContent();_bff="FI_"+this.oFilter.name;if(this.session){_bff+=this.session.viewid.toString();}_bfa=(this.mode==="pattern")?this.oFilter.pattern:this.oFilter.table.tuples;if(_c04&&(this.mode==="slider"||this.mode==="checklist"||this.mode==="checkdropdown"||this.mode==="radiolist"||this.mode==="dropdown")){_c05=this.oFilter.table.tuples;for(i=0;i<_c05.length;i++){sum+=_c05[i].f[0].v;}_c03=String(sum);}this.modeContents.instantiate(_bfa,_bff,_bfd,this.oFilter.role,_c03,_c04);this.refreshRangeAnchorAndSelection();this.conditionals.init(this.oFilter.condition,this.oFilter.limit);if(!_bf8){this.layout();}if(!_bf9){this.updateSearch();}},baseInstantiateContent:function(){var _c06=null;if(this.mode==="checkdropdown"){_c06=this.getCheckDropdownCatmodeClass();}else{if(this.mode==="checklist"){_c06=this.getChecklistCatmodeClass();}else{if(this.mode==="radiolist"){_c06=this.getRadiolistCatmodeClass();}else{if(this.mode==="slider"){_c06=this.getSliderCatmodeClass();}else{if(this.mode==="dropdown"){_c06=this.getDropdownCatmodeClass();}else{if(this.mode==="pattern"){_c06=this.getPatternCatmodeClass();}else{if(this.mode==="typeinlist"){_c06=this.getTypeInListCatmodeClass();}}}}}}}if(_c06===null){return;}this.modeContents=new _c06(this,this.domContent,this.attributes);},instantiateContent:function(){this.baseInstantiateContent();},updateSearch:function(){this.searchWidget.updateSearch();},applyChanges:function(){this.modeContents.applyChanges();},applyChangesByChangelist:function(_c07){this.modeContents.applyChangesByChangelist(_c07,this.mode);},updateStateFromSearch:function(_c08){var _c09=false,_c0a=this.isTypeInList;if(this.isTypeInList){this._updateTypeInListStateFromSearch(_c08);}this.initFromState(_c09,_c0a);},_updateTypeInListStateFromSearch:function(_c0b){var _c0c,_c0d={},i,_c0f,item,_c11,_c12,_c13=this.oFilter.table.tuples;for(i=0,_c0f=_c13.length;i<_c0f;i++){item={node:this.fetchChildNodeByIndex(i),tuple:_c13[i]};_c0d[_c13[i].d||_c13[i].t[0].v]=item;}for(i=0,_c0f=_c0b.tuples.length;i<_c0f;i++){_c12=_c0b.tuples[i];_c0c=_c0d[_c12.d||_c12.t[0].v];if(_c0c&&_c0c.node){tableau.FilterItem.setChecked(_c0c.node,_c12.s,_c0c.tuple);}else{_c11=tableau.util.binarySearch(_c12,_c13,0,null,this._tupleDisplayNameComparer);if(!_c11.found){_c13.splice(_c11.index,0,_c12);}}}},_tupleDisplayNameComparer:function(_c14,_c15){var _c16=tableau.format.formatTupleDisplayName(_c14),_c17=tableau.format.formatTupleDisplayName(_c15);if(_c16===_c17){return 0;}else{if(_c16<_c17){return -1;}else{return 1;}}},fetchChildNodeByIndex:function(_c18){return this.modeContents.fetchChildNodeByIndex(_c18);},isSingleSelect:function(){return this.mode!=="checklist"&&this.mode!=="checkdropdown"&&this.mode!=="typeinlist";},updateDomainButton:function(){var t=tableau.types.QFDomain;if(!this.oFilter.domains||this.oFilter.domains.length<=1){_4.style(this.domainButton.domNode,"display","none");return;}_4.removeClass(this.domainButton.iconNode,"wcIconDomainAll");_4.removeClass(this.domainButton.iconNode,"wcIconDomainContext");_4.removeClass(this.domainButton.iconNode,"wcIconDomainRelevant");if(this.attributes.values===t.QFD_RELEVANT){this.domainButton.attr("label",tab.Strings.QuickFilterDomainShowMoreValues);_4.addClass(this.domainButton.iconNode,"wcIconDomainRelevant");}else{if(this.attributes.values===t.QFD_CONTEXT){this.domainButton.attr("label",tab.Strings.QuickFilterDomainShowFewerValues);_4.addClass(this.domainButton.iconNode,"wcIconDomainContext");}else{this.domainButton.attr("label",tab.Strings.QuickFilterDomainShowFewerValues);_4.addClass(this.domainButton.iconNode,"wcIconDomainAll");}}},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},toggleDomain:function(){var _c1a=function(item){return item===tableau.types.QFDomain.QFD_CONTEXT;},t=tableau.types.QFDomain;if(this.attributes.values===t.QFD_RELEVANT){this.doRequestSetAttributes({"values":t.QFD_ALL});}else{if(this.attributes.values===t.QFD_CONTEXT){this.doRequestSetAttributes({"values":t.QFD_RELEVANT});}else{if(_4.some(this.oFilter.domains,_c1a)){this.doRequestSetAttributes({"values":t.QFD_CONTEXT});}else{this.doRequestSetAttributes({"values":t.QFD_RELEVANT});}}}},getTheAllItemNode:function(){return this.domContent.firstChild;},doSelectAll:function(_c1d){var i,len,t,_c21,item,_c23,_c24,_c25=[];if(this.mode==="checklist"||this.mode==="checkdropdown"){if(_4.hasClass(this.domContent,"tiledContent")){len=this.oFilter.table.actual_size;for(i=0;i<len;++i){item=this.fetchChildNodeByIndex(i);if(item){tableau.FilterItem.setChecked(item,_c1d);}}}else{item=this.getTheAllItemNode();for(;item!==null;item=item.nextSibling){tableau.FilterItem.setChecked(item,_c1d);}}}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){_c24=new tab.CategoricalFilterData(this.oFilter.targetSheets,this.field,this.oFilter.exclude,null);if(_c1d){_c24.set_includeAll(true);}tab.FilterClientCommands.updateCategoricalFilter(_c24);}if(_c1d){tab.FilterClientCommands.setCategoricalFilterValues(this.session.get_sheetName(),this.field,"filter-all",null);}else{if(this.mode==="checklist"||this.mode==="checkdropdown"){_c21={schema:this.oFilter.table.schema,tuples:[]};if(this.oFilter.exclude){if(_4.hasClass(this.domContent,"tiledContent")){this.doTiledSelectExcludeAllOff();return;}else{t=this.oFilter.table.tuples;item=this.getTheAllItemNode();if(tableau.FilterItem.isAllItem(item)){item=item.nextSibling;}for(i=0,len=t.length;i<len&&item!==null;i++,item=item.nextSibling){_c21.tuples.push(tableau.FilterItem.setChecked(item,true,t[i]));}}}tab.FilterClientCommands.setCategoricalFilterValues(this.session.get_sheetName(),this.field,"filter-replace",_c25);}}},doTiledSelectExcludeAllOff:function(){var item,i,from=0,to=this.oFilter.table.actual_size-1,_c2a=new tab.Changelist(),_c2b=new tab.RawChange();for(i=from;i<=to;i++){item=this.modeContents.fetchChildNodeByIndex(i);if(item){tableau.FilterItem.setChecked(item,true);}}_c2b.setRange(new tab.IntegerRange(from,to),true);_c2a.addChange(_c2b);this.applyChangesByChangelist(_c2a);},toggleSearchUI:function(){this.searchWidget.toggleUI();},doRequestSetAttributes:function(_c2c,_c2d){var att;for(att in _c2c){if(_c2c.hasOwnProperty(att)){this.attributes[att]=_c2c[att];}}if(!tab.BaseSession.autoUpdate){this.initFromState();}this.requestSetAttributes(_c2c,_c2d);},doscrollHoriz:function(){this.domContent.scrollLeft=this.domHorizScroll.scrollLeft;},isCompactFilter:function(){return this.mode==="slider"||this.mode==="dropdown"||this.mode==="checkdropdown"||this.mode==="pattern";},getTitleOffset:function(){if(_4.hasClass(this.domNode,"CFInlineTitle")){return 0;}else{return this.domTitleBar.offsetHeight;}},_getSearchWidgetDim:function(){var s=this.searchWidget.domNode;return (_4.style(s,"display")==="none")?{h:0,l:0,t:0,w:0}:_4.marginBox(s);},layoutVertical:function(_c30){var _c31,_c32={h:0},_c33={h:0};this._layoutSearchWidget(_c30);_c33=this._getSearchWidgetDim();_c31=_c30.h-_c32.h-_c33.h;this.modeContents.layout({h:_c31,w:_c30.w},false);},_getContentFloatingElement:function(){return this.isTypeInList?this.searchWidget.domNode:this.domContent;},_layoutSearchWidget:function(_c34){var _c35,_c36;if(this.searchWidget.isVisible){_c36={h:0};_c35=_c34.h-_c36.h;this.searchWidget.layout(_c35);}},_layoutTypeInList:function(_c37){if(this.isInlineTitle()){_4.marginBox(this.searchWidget.domNode,_c37);}else{_4.style(this.searchWidget.domNode,{width:"auto",height:"auto"});}this.layoutVertical(_c37);},_layoutCompactFilter:function(_c38){_4.addClass(this.domNode,"CFHorizontal");this._layoutSearchWidget(_c38);this.modeContents.layout({w:_c38.w,h:_c38.h});},layout:function(){var _c39,_c3a,_c3b,_c3c;if(!this.domNode.parentNode){return;}_4.removeClass(this.domNode,"CFHorizontal");_4.removeClass(this.domNode,"CFInlineTitle");_4.style(this.domHorizScroll,"display","none");_c3b=_4.marginBox(this.domTitleImage);if(this.titleH>0){_c3b.h=this.titleH;_4.marginBox(this.domTitleBar,{h:_c3b.h});}if(this.titleW>0){_c3b.w=this.titleW;_4.marginBox(this.domTitleBar,{w:_c3b.w});}_c3c=_4.contentBox(this.domNode);_c3a={w:_c3c.w,h:_c3c.h};if(!this.metricsOnly){if(!this.hideEmptyTitlebar()){_c39=this._getContentFloatingElement();if(this.titleW>0){_c3a.w=_c3c.w-_c3b.w;_4.style(this.domTitleBar,"float","left");_4.style(_c39,"float","left");_4.addClass(this.domNode,"CFInlineTitle");}else{_c3a.h=_c3c.h-_c3b.h;_4.style(this.domTitleBar,"float","none");_4.style(_c39,"float","none");}}}if(this.isCompactFilter()){this._layoutCompactFilter(_c3a);}else{if(this.isTypeInList){this._layoutTypeInList(_c3a);}else{this.layoutVertical(_c3a);}}},_localize:function(){tableau.util.localizeDojoLabeledControls([[this.searchButton,"QuickFilterSearch"],[this.domainButton,"QuickFilterDomainShowFewerValues"]]);}});}if(!_4._hasResource["tableau.base.widget.QuantitativeFilter"]){_4._hasResource["tableau.base.widget.QuantitativeFilter"]=true;_4.provide("tableau.base.widget.QuantitativeFilter");_4.declare("tableau.base.widget.QuantitativeFilter",[_5._Widget,_5._Contained,_5._Templated],{templateString:"<div class=\"QuantitativeFilter\"\r\n    ><div class=\"QuantitativeFilterBox\" dojoAttachPoint=\"domBox\"\r\n        ><div class=\"TitleAndControls\" dojoAttachPoint=\"domControls\"\r\n            ><div class=\"QFTitle\" dojoAttachPoint=\"domTitleBar\"\r\n                ><img dojoAttachPoint=\"domTitleImage\"/></div\r\n            ><div dojoType=\"dijit.form.Button\" class=\"QFButton QFDomainButton\" showlabel=\"false\"\r\n             dojoAttachPoint=\"domainButton\" dojoAttachEvent=\"onClick:toggleDomain\"\r\n             iconClass=\"wcIconDomainAll\">Show Smaller Range</div\r\n            ><div dojoType=\"dijit.form.Button\" class=\"QFButton QFMenuButton\" name=\"type\" dojoAttachPoint=\"menuButton\"\r\n                  dojoAttachEvent=\"onClick:doMenu\" iconClass=\"wcIconContextMenu\"></div>\r\n        </div>\r\n        <div class=\"QFContent\" dojoAttachPoint=\"domContent\"\r\n          ><div class=\"QFReadout QFLowerBound\" dojoAttachEvent=\"onclick:showLowerInput\" dojoAttachPoint=\"domLowerBound\"\r\n              ><span dojoAttachPoint=\"domLowerText\"></span\r\n              ><input type=\"text\" dojoAttachPoint=\"domLowerInput\"></input\r\n          ></div\r\n          ><div class=\"QFReadout QFUpperBound\" dojoAttachEvent=\"onclick:showUpperInput\" dojoAttachPoint=\"domUpperBound\"\r\n              ><span dojoAttachPoint=\"domUpperText\"></span\r\n              ><input type=\"text\" dojoAttachPoint=\"domUpperInput\"></input\r\n          ></div\r\n          ><div dojoAttachPoint=\"domBar\" class=\"QFSlider QFBar\"\r\n              ><div dojoAttachPoint=\"domRange\" class=\"QFRange\" dojoAttachEvent=\"onmousedown:startRangeCapture\"\r\n                  ><div dojoAttachPoint=\"domHighlight\" class=\"QFRangeHighlight\"></div\r\n              ></div\r\n          ></div\r\n          ><span dojoAttachPoint=\"domLowerImg\" class=\"QFSlider QFImg QFIconFilterLeft\" dojoAttachEvent=\"onmousedown:startLowerCapture\"></span\r\n          ><span dojoAttachPoint=\"domUpperImg\" class=\"QFSlider QFImg QFIconFilterRight\" dojoAttachEvent=\"onmousedown:startUpperCapture\"></span\r\n        ></div\r\n    ></div\r\n></div>\r\n",widgetsInTemplate:true,session:null,field:"",oFilter:null,applyDelay:200,iconWidth:10,rid:0,timestamp:0,global:false,format:{},showFullDateTimes:false,domBox:null,domControls:null,domTitleBar:null,domLowerText:null,domUpperText:null,domLowerInput:null,domUpperInput:null,domBar:null,domRange:null,domHighlight:null,domLowerImg:null,domUpperImg:null,domAllValuesMenuItem:null,domNonNullValuesMenuItem:null,domOnlyNullValuesMenuItem:null,domValuesInRangeMenuItem:null,domValuesInRangeOrNullMenuItem:null,classQF:"QF",classQFI_:"QFI_",classQFButtonR:"QFButtonR",classQFButtonHide:"QFButtonHide",classQFDisabled:"QFDisabled",classQFCenterText:"QFCenterText",classQFHideButtons:"QFHideButtons",classQFHideSlider:"QFHideSlider",classQFHideReadout:"QFHideReadout",precision:0,isLowerEnabled:function(){return (this.oCurrentMin.v!==null&&this.oCurrentMin.v!==undefined);},isUpperEnabled:function(){return (this.oCurrentMax.v!==null&&this.oCurrentMax.v!==undefined);},getRangeMin:function(){return (this.vMinOverride!==undefined)?this.vMinOverride:this.oRangeMin.v;},getRangeMax:function(){return (this.vMaxOverride!==undefined)?this.vMaxOverride:this.oRangeMax.v;},getRange:function(){return this.getRangeMax()-this.getRangeMin();},getPrecision:function(){return this.precision;},computePrecision:function(_c3d){var _c3e=(this.getRange())?this.getRange()/_c3d:1,_c3f=Math.log(_c3e)/Math.log(10);this.precision=(_c3f>0)?Math.ceil(_c3f):Math.floor(_c3f);if(this.precision===Number.NEGATIVE_INFINITY||isNaN(this.precision)){this.precision=5;}},scalePixelsToRange:function(_c40,_c41,_c42){var _c43,_c44=_c40*this.getRange()/_c41;if(this.precision>=0){return Math.round(_c42+_c44);}_c43=Math.pow(10,-this.precision);return Math.round((_c42+_c44)*_c43)/_c43;},clearDataRange:function(){if(this.oDataMin){this.oDataMin.v=null;}if(this.oDataMax){this.oDataMax.v=null;}_4.style(this.domHighlight,"visibility","hidden");},hasDataMin:function(){return this.oDataMin&&this.oDataMin.v!==null&&this.oDataMin.v!==undefined;},hasDataMax:function(){return this.oDataMax&&this.oDataMax.v!==null&&this.oDataMax.v!==undefined;},getDataMin:function(){return this.oDataMin.v;},getDataMax:function(){return this.oDataMax.v;},getCurMin:function(){return this.oCurrentMin.v;},getCurMax:function(){return this.oCurrentMax.v;},setMinValue:function(v){var oDT=tableau.types.DataType;if(this.isUpperEnabled()&&v>this.oCurrentMax.v){v=this.oCurrentMax.v;}if(this.oCurrentMin.t===oDT.DT_INTEGER){this.oCurrentMin.v=Math.round(v);}else{this.oCurrentMin.v=v;}_6.data.dom.textContent(this.domLowerText,this.getMinText());if(this.getCurMin()<this.getRangeMin()){this.vMinOverride=this.getCurMin();}},setMaxValue:function(v){var oDT=tableau.types.DataType;if(this.isLowerEnabled()&&v<this.oCurrentMin.v){v=this.oCurrentMin.v;}if(this.oCurrentMax.t===oDT.DT_INTEGER){this.oCurrentMax.v=Math.round(v);}else{this.oCurrentMax.v=v;}_6.data.dom.textContent(this.domUpperText,this.getMaxText());if(this.getCurMax()>this.getRangeMax()){this.vMaxOverride=this.getCurMax();}},resetRange:function(){delete this.vMinOverride;delete this.vMaxOverride;},getValueFromInput:function(_c49){var oDT=tableau.types.DataType,s=_c49.value,date;switch(this.oCurrentMin.t){case oDT.DT_INTEGER:return parseInt(s.replace(/,/g,""),10);case oDT.DT_REAL:return parseFloat(s.replace(/,/g,""));case oDT.DT_TIMESTAMP:case oDT.DT_DATE:date=tableau.format.formatToJSCompliantFormat(s,this.oFilter.editing_format);return tableau.types.OleDateFromJsDate(Date.parse(date+" GMT"));}throw "InvalidType";},speciallyFormatDataValueForQuantitativeQF:function(val){var _c4e,oDT=tableau.types.DataType,oF;this.checkMinMaxForNonMidnightTimes(val);oF=this.oFilter;_c4e=(val.t===oDT.DT_TIMESTAMP||val.t===oDT.DT_DATE)?oF.date_format:oF.format;return tableau.format.formatDataValue(val,oF.role,_c4e,null,this.showFullDateTimes);},checkMinMaxForNonMidnightTimes:function(val){var f=tableau.format.isDateTimeWithNonMidnightTime,oDT=tableau.types.DataType,oF;if(!this.showFullDateTimes){this.showFullDateTimes=f(this.oCurrentMin)||f(this.oCurrentMax)||f(this.oRangeMin)||f(this.oRangeMax)||(val!==undefined&&f(val));if(this.oRangeMin.t===oDT.DT_TIMESTAMP||this.oRangeMin.t===oDT.DT_DATE){oF=this.oFilter;this.showFullDateTimes=this.showFullDateTimes&&oF.date_format.isAutoFormat;}}},getMinText:function(){return this.speciallyFormatDataValueForQuantitativeQF(this.oCurrentMin);},getMaxText:function(){return this.speciallyFormatDataValueForQuantitativeQF(this.oCurrentMax);},getLowerPos:function(){return this.domLowerImg.offsetLeft-this.oMetrics.absOffset+(this.iconWidth-1);},setLowerPos:function(x){_4.style(this.domLowerImg,"left",(x+this.oMetrics.absOffset-(this.iconWidth-1))+"px");},hasLowerImgMoved:function(){return this.lastLowerOffset!==this.domLowerImg.offsetLeft;},getUpperPos:function(){return this.domUpperImg.offsetLeft-this.oMetrics.absOffset;},setUpperPos:function(x){_4.style(this.domUpperImg,"left",(x+this.oMetrics.absOffset)+"px");},hasUpperImgMoved:function(){return this.lastUpperOffset!==this.domUpperImg.offsetLeft;},postMixInProperties:function(){this.inherited(arguments);this.templateRoot=_4.moduleUrl("tableau.base.widget","templates").toString();},isRange:function(){return tableau.types.QFInclude.isRange(this.oFilter.table.included);},nullOrUndefined:function(v){return v===null||v===undefined;},initValues:function(){this.oRangeMin=_4.mixin({},this.oFilter.range.min);this.oRangeMax=_4.mixin({},this.oFilter.range.max);this.oDataMin=_4.mixin({},this.oFilter.data.min);this.oDataMax=_4.mixin({},this.oFilter.data.max);if(this.isRange()&&!(this.nullOrUndefined(this.oFilter.table.min.v)&&this.nullOrUndefined(this.oFilter.table.max.v))){this.oCurrentMin=_4.mixin({},this.oFilter.table.min);this.oCurrentMax=_4.mixin({},this.oFilter.table.max);}else{this.oCurrentMin=_4.mixin({},this.oFilter.range.min);this.oCurrentMax=_4.mixin({},this.oFilter.range.max);}this.checkMinMaxForNonMidnightTimes();this.oMetrics={};this.domLowerInput.value=tableau.format.formatDataValueEditable(this.oCurrentMin,this.oFilter.role,null,this.showFullDateTimes,this.oFilter.editing_format);this.domUpperInput.value=tableau.format.formatDataValueEditable(this.oCurrentMax,this.oFilter.role,null,this.showFullDateTimes,this.oFilter.editing_format);},postCreate:function(){var _c58=0,_c59,_c5a;_4.style(this.domLowerInput,"display","none");_4.style(this.domUpperInput,"display","none");jQuery(this.domLowerInput).on("blur",jQuery.proxy(this.hideLowerInput,this)).on("keypress",jQuery.proxy(this.checkLowerEnter,this));jQuery(this.domUpperInput).on("blur",jQuery.proxy(this.hideUpperInput,this)).on("keypress",jQuery.proxy(this.checkUpperEnter,this));jQuery("body").on("mousedown."+this.domNode.id,jQuery.proxy(function(e){if(e.target!==this.domLowerInput){this.domLowerInput.blur();}if(e.target!==this.domUpperInput){this.domUpperInput.blur();}},this));this.timestamp=new Date().getTime();this._localize();_c5a=tableau.format.formatColumnDisplayName(this.oFilter);_4.attr(this.domTitleBar,"title",_c5a);this.setTitleImage();if(!this.metricsOnly){_c59=function(_c5c,hide,that){if(hide){_4.addClass(_c5c.domNode,that.classQFButtonHide);}else{_c58+=1;_4.addClass(_c5c.domNode,that.classQFButtonR+_c58);}};_c59(this.menuButton,this.shouldHideContextMenu(),this);_c59(this.domainButton,this.shouldHideDomainButton(),this);_4.addClass(this.domControls,this.classQF+_c58+"Button");}},hideEmptyTitlebar:function(){return (""===tableau.format.formatColumnDisplayName(this.oFilter));},setTitleImageSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},shouldHideDomainButton:function(){return this.hideEmptyTitlebar()||this.attributes["show-domain"]==="false";},shouldHideContextMenu:function(){return this.hideEmptyTitlebar()||this.getContextMenuCommands().commandItems.length===0;},destroy:function(_c61){if(this.mousemoveHandle){_4.disconnect(this.mousemoveHandle);}delete this.mousemoveHandle;if(this.mouseupHandle){_4.disconnect(this.mouseupHandle);}delete this.mouseupHandle;jQuery(this.domLowerInput).off("blur").off("keypress");jQuery(this.domUpperInput).off("blur").off("keypress");jQuery("body").off("mousedown."+this.domNode.id);this.inherited(arguments);},resize:function(_c62){_4.marginBox(this.domNode,_c62);this.layout();},getMetrics:function(){var _c63=_4.marginBox(this.domLowerImg),_c64=_4.marginBox(this.domLowerBound);return {fixed:{w:0,h:0},item:{w:0,h:0},slider:{w:0,h:_c63.h+4},readout:{w:0,h:_c64.h+4}};},fetchTitleImage:function(){var _c65=this.layoutSession.formatZoneURL("image/png",this.zid)+"&"+this.rid+"Z"+this.timestamp;if(_c65!==this.domTitleImage.src){++this.rid;this.domTitleImage.src=_c65;}},setTitleImage:function(){if(this.hideEmptyTitlebar()){_4.style(this.domTitleImage,"display","none");_4.marginBox(this.domTitleBar,{h:0});}else{this.fetchTitleImage();}},layout:function(){var barW,_c67,_c68,_c69=200,_c6a,off,_c6c,_c6d,_c6e,_c6f,_c70,_c71;this.initValues();if(this.isLowerEnabled()){_6.data.dom.textContent(this.domLowerText,this.getMinText());_4.removeClass(this.domLowerText.parentNode,this.classQFDisabled);}else{_6.data.dom.textContent(this.domLowerText,this.speciallyFormatDataValueForQuantitativeQF(this.oRangeMin));_4.addClass(this.domLowerText.parentNode,this.classQFDisabled);}if(this.isUpperEnabled()){_6.data.dom.textContent(this.domUpperText,this.getMaxText());_4.removeClass(this.domUpperText.parentNode,this.classQFDisabled);}else{_6.data.dom.textContent(this.domUpperText,this.speciallyFormatDataValueForQuantitativeQF(this.oRangeMax));_4.addClass(this.domUpperText.parentNode,this.classQFDisabled);}_4.addClass(this.domNode,this.classQFHideButtons);_4.removeClass(this.domNode,this.classQFCenterText);_c6c=_4.marginBox(this.domTitleImage);if(this.titleH>0){_c6c.h=this.titleH;_4.marginBox(this.domTitleBar,{h:_c6c.h});}if(this.titleW>0){_c6c.w=this.titleW;_4.marginBox(this.domTitleBar,{w:_c6c.w});}_c6d=_4.contentBox(this.domNode);_c6a={w:_c6d.w,h:_c6d.h};if(!this.metricsOnly){if(!this.hideEmptyTitlebar()){if(this.titleW>0){_c6a.w=_c6d.w-_c6c.w;_4.style(this.domContent,"top","");_4.style(this.domContent,"left",_c6c.w+"px");}else{_4.removeClass(this.domNode,this.classQFHideButtons);_c6a.h=_c6d.h-_c6c.h;_4.style(this.domContent,"top",_c6c.h+"px");_4.style(this.domContent,"left","");}}}_4.marginBox(this.domContent,{w:_c6a.w,h:_c6a.h});if(this.attributes["show-slider"]!=="false"&&this.attributes["show-readout"]!=="false"){_4.removeClass(this.domNode,this.classQFHideReadout);_4.removeClass(this.domNode,this.classQFHideSlider);_c6f=_4.contentBox(this.domLowerBound).h+_4.contentBox(this.domLowerImg).h+8;if(_c6a.h<_c6f&&_c6a.w>200){_4.addClass(this.domNode,this.classQFCenterText);_c70=(this._contentBox(this.domLowerText)).w;_c71=(this._contentBox(this.domUpperText)).w;_4.style(this.domLowerBound,"width","");_4.style(this.domUpperBound,"width","");_4.style(this.domLowerBound,"top","2px");_4.style(this.domUpperBound,"top","2px");barW=_c6a.w-(_c70+_4.contentBox(this.domLowerImg).w)-(_c71+_4.contentBox(this.domUpperImg).w)-2*8;_4.marginBox(this.domBar,{w:barW});_4.style(this.domBar,"top","7px");_4.style(this.domBar,"left",(_c70+_4.contentBox(this.domLowerImg).w+8)+"px");}else{_c67=Math.min(_c69,Math.floor((_c6a.w/2)-4));_4.marginBox(this.domLowerBound,{w:_c67});_4.marginBox(this.domUpperBound,{w:_c67});_4.style(this.domLowerInput,"width",_4.contentBox(this.domLowerBound).w+"px");_4.style(this.domUpperInput,"width",_4.contentBox(this.domUpperBound).w+"px");off=this.domLowerBound.offsetTop+this.domLowerBound.offsetHeight+6;_4.marginBox(this.domBar,{w:_c6a.w-24});_4.style(this.domBar,"top",off+"px");_4.style(this.domBar,"left","12px");}}else{if(this.attributes["show-slider"]!=="false"){_4.addClass(this.domNode,this.classQFHideReadout);_4.removeClass(this.domNode,this.classQFHideSlider);_4.marginBox(this.domBar,{w:_c6a.w-24});_4.style(this.domBar,"left","12px");}else{if(this.attributes["show-readout"]!=="false"){_4.removeClass(this.domNode,this.classQFHideReadout);_4.addClass(this.domNode,this.classQFHideSlider);_c67=Math.min(_c69,Math.floor((_c6a.w/2)-4));_4.marginBox(this.domLowerBound,{w:_c67});_4.marginBox(this.domUpperBound,{w:_c67});_4.style(this.domLowerInput,"width",_4.contentBox(this.domLowerBound).w+"px");_4.style(this.domUpperInput,"width",_4.contentBox(this.domUpperBound).w+"px");}else{_4.addClass(this.domNode,this.classQFHideSlider);_4.addClass(this.domNode,this.classQFHideReadout);}}}this.oMetrics.top=this.domBar.offsetTop;this.oMetrics.absOffset=this.domBar.offsetLeft;this.oMetrics.left=0;this.oMetrics.right=this.domBar.offsetWidth;if(this.isLowerEnabled()){_4.style(this.domLowerImg,"top",(this.oMetrics.top-4)+"px");_4.style(this.domLowerImg,"visibility","visible");}else{_4.style(this.domLowerImg,"visibility","hidden");}if(this.isUpperEnabled()){_4.style(this.domUpperImg,"top",(this.oMetrics.top-4)+"px");_4.style(this.domUpperImg,"visibility","visible");}else{_4.style(this.domUpperImg,"visibility","hidden");}_c68=this.shouldShowDomContent()?"visible":"hidden";_4.style(this.domContent,"visibility",_c68);this.oMetrics.width=this.oMetrics.right-this.oMetrics.left;this.computePrecision(this.oMetrics.width);_c6e=(this.hasDataMin()||this.hasDataMax())?true:false;_4.style(this.domHighlight,"visibility",_c6e?"visible":"hidden");this.updateMinAndMax(this.oCurrentMin.v,this.oCurrentMax.v);this.updateDomainButton();},shouldShowDomContent:function(){return this.isUpperEnabled()||this.isLowerEnabled();},updateFromIcons:function(){var _c72,_c73,_c74,_c75,_c76;if(this.isLowerEnabled()&&this.hasLowerImgMoved()){_c73=this.getLowerPos();_c72=_c73-this.oMetrics.left;if(_c72===0){_c75=this.getRangeMin();}else{if(_c72===this.oMetrics.width){_c75=this.getRangeMax();}else{if(this.isUpperEnabled()&&this.getLowerPos()===this.getUpperPos()){_c75=this.getCurMax();}else{_c75=this.scalePixelsToRange(_c72,this.oMetrics.width,this.getRangeMin());}}}this.setMinValue(_c75);this.lastLowerOffset=this.domLowerImg.offsetLeft;_4.style(this.domRange,"left",_c73+"px");}if(this.isLowerEnabled()){_c74=this.getLowerPos();}else{_c74=this.oMetrics.left;}if(this.isUpperEnabled()){_c76=this.getUpperPos()-_c74;if(this.hasUpperImgMoved()){_c72=this.oMetrics.right-this.getUpperPos();if(_c72===0){_c75=this.getRangeMax();}else{if(_c72===this.oMetrics.width){_c75=this.getRangeMin();}else{if(this.isLowerEnabled()&&this.getLowerPos()===this.getUpperPos()){_c75=this.getCurMin();}else{_c75=this.scalePixelsToRange(-_c72,this.oMetrics.width,this.getRangeMax());}}}this.setMaxValue(_c75);this.lastUpperOffset=this.domUpperImg.offsetLeft;}_4.style(this.domRange,"width",_c76+"px");}else{_4.style(this.domRange,"width",(this.oMetrics.right-_c74)+"px");}this.updateDataBar();},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},updateFromOneInput:function(_c77){var vMin,vMax;if(_c77===this.domLowerInput){vMin=(this.isLowerEnabled())?this.getValueFromInput(this.domLowerInput):-Number.MAX_VALUE;vMax=this.oCurrentMax.v;}else{vMin=this.oCurrentMin.v;vMax=(this.isUpperEnabled())?this.getValueFromInput(this.domUpperInput):Number.MAX_VALUE;}this.updateMinAndMax(vMin,vMax);},updateMinAndMax:function(vMin,vMax){var _c7c,_c7d,_c7e,_c7f,vT;if(typeof (vMin)!==undefined&&vMin!==null&&typeof (vMax)!==undefined&&vMax!==null){if(vMin>vMax){vT=vMin;vMin=vMax;vMax=vT;}}this.resetRange();if(this.isLowerEnabled()&&!isNaN(vMin)){this.setMinValue(vMin);}if(this.isUpperEnabled()&&!isNaN(vMax)){this.setMaxValue(vMax);}_c7d=this.oMetrics.left;if(this.isLowerEnabled()){_c7c=(this.getRange())?Math.round((this.getCurMin()-this.getRangeMin())*this.oMetrics.width/this.getRange()):0;if(this.oMetrics.left+_c7c>this.oMetrics.width){_c7c=this.oMetrics.left+this.oMetrics.width;}this.setLowerPos(this.oMetrics.left+_c7c);this.lastLowerOffset=this.domLowerImg.offsetLeft;_4.style(this.domRange,"left",(this.oMetrics.left+_c7c)+"px");_c7d=this.getLowerPos();}else{_4.style(this.domRange,"left",_c7d+"px");}if(this.isUpperEnabled()){_c7e=(this.isLowerEnabled())?this.getCurMin():this.getRangeMin();_c7f=(this.getRange())?Math.round((this.getCurMax()-_c7e)*this.oMetrics.width/this.getRange()):this.oMetrics.width;this.setUpperPos(_c7d+_c7f);this.lastUpperOffset=this.domUpperImg.offsetLeft;_4.style(this.domRange,"width",Math.max(_c7f,0)+"px");}else{_4.style(this.domRange,"width",Math.max(this.oMetrics.right-_c7d,0)+"px");}this.updateDataBar();},updateDataBar:function(){var _c81,_c82=0,_c83,_c84=(this.isLowerEnabled())?this.getCurMin():this.getRangeMin(),_c85;if(this.hasDataMin()&&this.getRange()){_c82=Math.round((this.getDataMin()-_c84)*this.oMetrics.width/this.getRange());}_4.style(this.domHighlight,"left",_c82+"px");_c85=this.isLowerEnabled()?this.getLowerPos():this.oMetrics.left;_c83=(this.isUpperEnabled()?this.getUpperPos():this.oMetrics.right)-_c85;if(this.hasDataMax()&&this.getRange()){_c81=(this.hasDataMin())?this.getDataMin():this.getRangeMin();_c83=Math.round((this.getDataMax()-_c81)*this.oMetrics.width/this.getRange());_c83=Math.max(_c83,2);}_4.style(this.domHighlight,"width",Math.max(_c83,0)+"px");},startUpperCapture:function(e){this.startCapture(e,false,this.domUpperImg);},startLowerCapture:function(e){this.startCapture(e,false,this.domLowerImg);},startRangeCapture:function(e){if(this.isLowerEnabled()&&this.isUpperEnabled()){this.startCapture(e,true,this.domRange);}},startCapture:function(e,_c8a,item){this.savePreviousMinAndMaxVals();var _c8c=(_c8a)?"onRangeMove":"onMouseMove";_4.stopEvent(e);if(!this.getRange()||this.getRange()===0){return;}this.captureInfo={x:e.pageX,y:e.pageY,xStart:item.offsetLeft,isRange:_c8a,oImg:item};if(_c8a){this.captureInfo.lowerStart=this.getLowerPos();this.captureInfo.upperStart=this.getUpperPos();}if(this.mousemoveHandle){_4.disconnect(this.mousemoveHandle);}delete this.mousemoveHandle;if(this.mouseupHandle){_4.disconnect(this.mouseupHandle);}delete this.mouseupHandle;this.mousemoveHandle=_4.connect(document.documentElement,"onmousemove",this,_c8c);this.mouseupHandle=_4.connect(document.documentElement,"onmouseup",this,"stopCapture");},onMouseMove:function(e){var _c8e=(this.isLowerEnabled())?this.getLowerPos():this.oMetrics.left,_c8f=(this.isUpperEnabled())?this.getUpperPos():this.oMetrics.right,_c90=(this.captureInfo.oImg===this.domLowerImg)?this.oMetrics.left-this.iconWidth:_c8e,_c91=(this.captureInfo.oImg===this.domUpperImg)?this.oMetrics.right:_c8f-this.iconWidth,_c92=(e.pageX-this.captureInfo.x)+this.captureInfo.xStart-this.oMetrics.absOffset,_c93;_4.stopEvent(e);_c92=Math.min(_c91,Math.max(_c90,_c92));if(this.captureInfo.oImg===this.domLowerImg){this.setLowerPos(_c92+this.iconWidth);}else{this.setUpperPos(_c92);}this.updateFromIcons();this.applyQuantFilter(this.oCurrentMin.v,this.oCurrentMax.v);},applyQuantFilter:function(_c94,_c95){var _c96;if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){_c96=new tab.QuantitativeFilterData(this.oFilter.targetSheets,this.field,_c94,_c95,this.previousMinVal,this.previousMaxVal);tab.FilterClientCommands.updateQuantitativeFilter(_c96);}},savePreviousMinAndMaxVals:function(){this.previousMinVal=this.oCurrentMin.v;this.previousMaxVal=this.oCurrentMax.v;},onRangeMove:function(e){var _c98=this.captureInfo.x-(this.captureInfo.lowerStart-this.oMetrics.left),_c99=this.captureInfo.x+(this.oMetrics.right-this.captureInfo.upperStart),_c9a=e.pageX;_c9a=Math.min(_c99,Math.max(_c98,_c9a));_4.stopEvent(e);this.setLowerPos(this.captureInfo.lowerStart+(_c9a-this.captureInfo.x));this.setUpperPos(this.captureInfo.upperStart+(_c9a-this.captureInfo.x));tab.ModelUtils.invalidateVisuals(this.oFilter.targetSheets);this.updateFromIcons();},stopCapture:function(e){if(this.mousemoveHandle){_4.disconnect(this.mousemoveHandle);}delete this.mousemoveHandle;if(this.mouseupHandle){_4.disconnect(this.mouseupHandle);}delete this.mouseupHandle;_4.stopEvent(e);if(this.captureInfo.x!==e.pageX){this.resetRange();this.updateFromIcons();this.notifyChange();}},showLowerInput:function(e){if(!this.isLowerEnabled()){return;}this._showInput(e,this.oCurrentMin,this.domLowerInput);_4.addClass(this.domLowerBound,"active");this.savePreviousMinAndMaxVals();},showUpperInput:function(e){if(!this.isUpperEnabled()){return;}this._showInput(e,this.oCurrentMax,this.domUpperInput);_4.addClass(this.domUpperBound,"active");this.savePreviousMinAndMaxVals();},_showInput:function(e,val,_ca0){_4.stopEvent(e);if(_4.style(_ca0,"display")!=="none"){return;}_ca0.value=tableau.format.formatDataValueEditable(val,this.oFilter.role,null,this.showFullDateTimes,this.oFilter.editing_format);this.showInputStartValue=this.getValueFromInput(_ca0);_4.style(_ca0.previousSibling,"display","none");_4.style(_ca0,"display","");_ca0.focus();_ca0.select();},checkLowerEnter:function(e){this._checkEnter(e,this.domLowerInput);},checkUpperEnter:function(e){this._checkEnter(e,this.domUpperInput);},_checkEnter:function(e,_ca4){if(e.keyCode===_4.keys.ENTER){_4.stopEvent(e);_ca4.blur();}},hideLowerInput:function(e){this._hideInput(e,this.oCurrentMin,this.domLowerInput);_4.removeClass(this.domLowerBound,"active");},hideUpperInput:function(e){this._hideInput(e,this.oCurrentMax,this.domUpperInput);_4.removeClass(this.domUpperBound,"active");},_hideInput:function(e,_ca8,_ca9){var _caa=this.getValueFromInput(_ca9),_cab,_cac=_4.mixin({},_ca8);if(isNaN(_caa)){_caa=this.showInputStartValue;}else{_cac.v=_caa;_cab=this.speciallyFormatDataValueForQuantitativeQF(_cac);}_4.style(_ca9,"display","none");_4.style(_ca9.previousSibling,"display","");_4.stopEvent(e);if(this.showInputStartValue!==_caa){_6.data.dom.textContent(_ca9.previousSibling,_cab);this.updateFromOneInput(_ca9);this.notifyChange();}this.showInputStartValue=null;},applyChanges:function(){var _cad=false,_cae=_4.mixin({},this.oFilter.table);if(this.isLowerEnabled()&&_cae.min.v!==this.getCurMin()){_cad=true;_cae.min=_4.mixin({},this.oCurrentMin);}if(this.isUpperEnabled()&&_cae.max.v!==this.getCurMax()){_cad=true;_cae.max=_4.mixin({},this.oCurrentMax);}if(!_cad){return;}this.clearDataRange();++this.rid;if(!this.isRange()){_cae.included=tableau.types.QFInclude.QFI_RANGE;}tab.FilterClientCommands.setQuantitativeFilterRange(this.session.get_sheetName(),this.field,_cae.min.v,_cae.max.v,_cae.included);},updateDomainButton:function(){var t=tableau.types.QFDomain;if(!this.oFilter.domains||this.oFilter.domains.length<=1){_4.style(this.domainButton.domNode,"display","none");return;}_4.removeClass(this.domainButton.iconNode,"wcIconDomainAll");_4.removeClass(this.domainButton.iconNode,"wcIconDomainContext");_4.removeClass(this.domainButton.iconNode,"wcIconDomainRelevant");if(this.attributes.values===t.QFD_RELEVANT){this.domainButton.attr("label",tab.Strings.QuickFilterShowLargerRange);_4.addClass(this.domainButton.iconNode,"wcIconDomainRelevant");}else{if(this.attributes.values===t.QFD_CONTEXT){this.domainButton.attr("label",tab.Strings.QuickFilterShowSmallerRange);_4.addClass(this.domainButton.iconNode,"wcIconDomainContext");}else{this.domainButton.attr("label",tab.Strings.QuickFilterShowSmallerRange);_4.addClass(this.domainButton.iconNode,"wcIconDomainAll");}}},toggleDomain:function(){var _cb0=function(item){return item===tableau.types.QFDomain.QFD_CONTEXT;},t=tableau.types.QFDomain;if(this.attributes.values===t.QFD_RELEVANT){this.doRequestSetAttributes({"values":t.QFD_ALL});}else{if(this.attributes.values===t.QFD_CONTEXT){this.doRequestSetAttributes({"values":t.QFD_RELEVANT});}else{if(_4.some(this.oFilter.domains,_cb0)){this.doRequestSetAttributes({"values":t.QFD_CONTEXT});}else{this.doRequestSetAttributes({"values":t.QFD_RELEVANT});}}}},doRequestSetAttributes:function(_cb3,_cb4){var att;for(att in _cb3){if(_cb3.hasOwnProperty(att)){this.attributes[att]=_cb3[att];}}if(!tab.BaseSession.autoUpdate){this.initFromState();}this.requestSetAttributes(_cb3,_cb4);},notifyChange:function(){if(this._applyTimer){clearTimeout(this._applyTimer);delete this._applyTimer;}this._applyTimer=setTimeout(_4.hitch(this,this.applyChanges),this.applyDelay);},initFromState:function(){this.setTitleImage();this.layout();},_localize:function(){tableau.util.localizeDojoLabeledControls([[this.domAllValuesMenuItem,"QuickFilterAllValues"],[this.domNonNullValuesMenuItem,"QuickFilterNonNullValues"],[this.domOnlyNullValuesMenuItem,"QuickFilterOnlyNullValues"],[this.domValuesInRangeMenuItem,"QuickFilterValuesInRange"],[this.domValuesInRangeOrNullMenuItem,"QuickFilterValuesInRangeOrNull"]]);},_contentBox:function(node){var _cb7=_4.style(node,"display"),ret={};if(_cb7==="none"){_4.style(node,"display","");}ret=_4.contentBox(node);_4.style(node,"display",_cb7);return ret;}});}if(!_4._hasResource["dojo.cookie"]){_4._hasResource["dojo.cookie"]=true;_4.provide("dojo.cookie");_4.cookie=function(name,_cba,_cbb){var c=document.cookie;if(arguments.length==1){var _cbd=c.match(new RegExp("(?:^|; )"+_4.regexp.escapeString(name)+"=([^;]*)"));return _cbd?decodeURIComponent(_cbd[1]):undefined;}else{_cbb=_cbb||{};var exp=_cbb.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_cbb.expires=d;}if(exp&&exp.toUTCString){_cbb.expires=exp.toUTCString();}_cba=encodeURIComponent(_cba);var _cc0=name+"="+_cba,_cc1;for(_cc1 in _cbb){_cc0+="; "+_cc1;var _cc2=_cbb[_cc1];if(_cc2!==true){_cc0+="="+_cc2;}}document.cookie=_cc0;}};_4.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!_4._hasResource["dijit.Tree"]){_4._hasResource["dijit.Tree"]=true;_4.provide("dijit.Tree");_4.declare("dijit._TreeNode",[_5._Widget,_5._Templated,_5._Container,_5._Contained],{item:null,isTreeNode:true,label:"",isExpandable:null,isExpanded:false,state:"UNCHECKED",templateString:"<div class=\"dijitTreeNode\" waiRole=\"presentation\"\r\n\t><div dojoAttachPoint=\"rowNode\" class=\"dijitTreeRow\" waiRole=\"presentation\"\r\n\t\t><img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"expandoNode\" class=\"dijitTreeExpando\" waiRole=\"presentation\"\r\n\t\t><span dojoAttachPoint=\"expandoNodeText\" class=\"dijitExpandoText\" waiRole=\"presentation\"\r\n\t\t></span\r\n\t\t><span dojoAttachPoint=\"contentNode\" dojoAttachEvent=\"onmouseenter:_onMouseEnter, onmouseleave:_onMouseLeave\"\r\n\t\t\tclass=\"dijitTreeContent\" waiRole=\"presentation\"\r\n\t\t\t><img src=\"${_blankGif}\" alt=\"\" dojoAttachPoint=\"iconNode\" class=\"dijitTreeIcon\" waiRole=\"presentation\"\r\n\t\t\t><span dojoAttachPoint=\"labelNode\" class=\"dijitTreeLabel\" wairole=\"treeitem\" tabindex=\"-1\" waiState=\"selected-false\" dojoAttachEvent=\"onfocus:_onNodeFocus\"></span\r\n\t\t></span\r\n\t></div\r\n\t><div dojoAttachPoint=\"containerNode\" class=\"dijitTreeContainer\" waiRole=\"presentation\" style=\"display: none;\"></div>\r\n</div>\r\n",postCreate:function(){this.setLabelNode(this.label);this._setExpando();this._updateItemClasses(this.item);if(this.isExpandable){_5.setWaiState(this.labelNode,"expanded",this.isExpanded);}},markProcessing:function(){this.state="LOADING";this._setExpando(true);},unmarkProcessing:function(){this._setExpando(false);},_updateItemClasses:function(item){var tree=this.tree,_cc5=tree.model;if(tree._v10Compat&&item===_cc5.root){item=null;}this.iconNode.className="dijitTreeIcon "+tree.getIconClass(item,this.isExpanded);this.labelNode.className="dijitTreeLabel "+tree.getLabelClass(item,this.isExpanded);},_updateLayout:function(){var _cc6=this.getParent();if(!_cc6||_cc6.rowNode.style.display=="none"){_4.addClass(this.domNode,"dijitTreeIsRoot");}else{_4.toggleClass(this.domNode,"dijitTreeIsLast",!this.getNextSibling());}},_setExpando:function(_cc7){var _cc8=["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];var _cc9=["*","-","+","*"];var idx=_cc7?0:(this.isExpandable?(this.isExpanded?1:2):3);_4.forEach(_cc8,function(s){_4.removeClass(this.expandoNode,s);},this);_4.addClass(this.expandoNode,_cc8[idx]);this.expandoNodeText.innerHTML=_cc9[idx];},expand:function(){if(this.isExpanded){return;}this._wipeOut&&this._wipeOut.stop();this.isExpanded=true;_5.setWaiState(this.labelNode,"expanded","true");_5.setWaiRole(this.containerNode,"group");this.contentNode.className="dijitTreeContent dijitTreeContentExpanded";this._setExpando();this._updateItemClasses(this.item);if(!this._wipeIn){this._wipeIn=_4.fx.wipeIn({node:this.containerNode,duration:_5.defaultDuration});}this._wipeIn.play();},collapse:function(){if(!this.isExpanded){return;}this._wipeIn&&this._wipeIn.stop();this.isExpanded=false;_5.setWaiState(this.labelNode,"expanded","false");this.contentNode.className="dijitTreeContent";this._setExpando();this._updateItemClasses(this.item);if(!this._wipeOut){this._wipeOut=_4.fx.wipeOut({node:this.containerNode,duration:_5.defaultDuration});}this._wipeOut.play();},setLabelNode:function(_ccc){this.labelNode.innerHTML="";this.labelNode.appendChild(_4.doc.createTextNode(_ccc));},setChildItems:function(_ccd){var tree=this.tree,_ccf=tree.model;this.getChildren().forEach(function(_cd0){_5._Container.prototype.removeChild.call(this,_cd0);},this);this.state="LOADED";if(_ccd&&_ccd.length>0){this.isExpandable=true;_4.forEach(_ccd,function(item){var id=_ccf.getIdentity(item),_cd3=tree._itemNodeMap[id],node=(_cd3&&!_cd3.getParent())?_cd3:this.tree._createTreeNode({item:item,tree:tree,isExpandable:_ccf.mayHaveChildren(item),label:tree.getLabel(item)});this.addChild(node);tree._itemNodeMap[id]=node;if(this.tree.persist){if(tree._openedItemIds[id]){tree._expandNode(node);}}},this);_4.forEach(this.getChildren(),function(_cd5,idx){_cd5._updateLayout();});}else{this.isExpandable=false;}if(this._setExpando){this._setExpando(false);}if(this==tree.rootNode){var fc=this.tree.showRoot?this:this.getChildren()[0],_cd8=fc?fc.labelNode:this.domNode;_cd8.setAttribute("tabIndex","0");tree.lastFocused=fc;}},removeChild:function(node){this.inherited(arguments);var _cda=this.getChildren();if(_cda.length==0){this.isExpandable=false;this.collapse();}_4.forEach(_cda,function(_cdb){_cdb._updateLayout();});},makeExpandable:function(){this.isExpandable=true;this._setExpando(false);},_onNodeFocus:function(evt){var node=_5.getEnclosingWidget(evt.target);this.tree._onTreeFocus(node);},_onMouseEnter:function(evt){_4.addClass(this.contentNode,"dijitTreeNodeHover");},_onMouseLeave:function(evt){_4.removeClass(this.contentNode,"dijitTreeNodeHover");}});_4.declare("dijit.Tree",[_5._Widget,_5._Templated],{store:null,model:null,query:null,label:"",showRoot:true,childrenAttr:["children"],openOnClick:false,templateString:"<div class=\"dijitTreeContainer\" waiRole=\"tree\"\r\n\tdojoAttachEvent=\"onclick:_onClick,onkeypress:_onKeyPress\">\r\n</div>\r\n",isExpandable:true,isTree:true,persist:true,dndController:null,dndParams:["onDndDrop","itemCreator","onDndCancel","checkAcceptance","checkItemAcceptance","dragThreshold"],onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,dragThreshold:0,_publish:function(_ce0,_ce1){_4.publish(this.id,[_4.mixin({tree:this,event:_ce0},_ce1||{})]);},postMixInProperties:function(){this.tree=this;this._itemNodeMap={};if(!this.cookieName){this.cookieName=this.id+"SaveStateCookie";}},postCreate:function(){if(this.persist){var _ce2=_4.cookie(this.cookieName);this._openedItemIds={};if(_ce2){_4.forEach(_ce2.split(","),function(item){this._openedItemIds[item]=true;},this);}}if(!this.model){this._store2model();}this.connect(this.model,"onChange","_onItemChange");this.connect(this.model,"onChildrenChange","_onItemChildrenChange");this.connect(this.model,"onDelete","_onItemDelete");this._load();this.inherited(arguments);if(this.dndController){if(_4.isString(this.dndController)){this.dndController=_4.getObject(this.dndController);}var _ce4={};for(var i=0;i<this.dndParams.length;i++){if(this[this.dndParams[i]]){_ce4[this.dndParams[i]]=this[this.dndParams[i]];}}this.dndController=new this.dndController(this,_ce4);}},_store2model:function(){this._v10Compat=true;_4.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _ce6={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_ce6.mayHaveChildren=_4.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_ce6.getChildren=_4.hitch(this,function(item,_ce8,_ce9){this.getItemChildren((this._v10Compat&&item===this.model.root)?null:item,_ce8,_ce9);});}this.model=new _5.tree.ForestStoreModel(_ce6);this.showRoot=Boolean(this.label);},_load:function(){this.model.getRoot(_4.hitch(this,function(item){var rn=this.rootNode=this.tree._createTreeNode({item:item,tree:this,isExpandable:true,label:this.label||this.getLabel(item)});if(!this.showRoot){rn.rowNode.style.display="none";}this.domNode.appendChild(rn.domNode);this._itemNodeMap[this.model.getIdentity(item)]=rn;rn._updateLayout();this._expandNode(rn);}),function(err){console.error(this,": error loading root: ",err);});},mayHaveChildren:function(item){},getItemChildren:function(_cee,_cef){},getLabel:function(item){return this.model.getLabel(item);},getIconClass:function(item,_cf2){return (!item||this.model.mayHaveChildren(item))?(_cf2?"dijitFolderOpened":"dijitFolderClosed"):"dijitLeaf";},getLabelClass:function(item,_cf4){},_onKeyPress:function(e){if(e.altKey){return;}var dk=_4.keys;var _cf7=_5.getEnclosingWidget(e.target);if(!_cf7){return;}var key=e.charOrCode;if(typeof key=="string"){if(!e.altKey&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey){this._onLetterKeyNav({node:_cf7,key:key.toLowerCase()});_4.stopEvent(e);}}else{var map=this._keyHandlerMap;if(!map){map={};map[dk.ENTER]="_onEnterKey";map[this.isLeftToRight()?dk.LEFT_ARROW:dk.RIGHT_ARROW]="_onLeftArrow";map[this.isLeftToRight()?dk.RIGHT_ARROW:dk.LEFT_ARROW]="_onRightArrow";map[dk.UP_ARROW]="_onUpArrow";map[dk.DOWN_ARROW]="_onDownArrow";map[dk.HOME]="_onHomeKey";map[dk.END]="_onEndKey";this._keyHandlerMap=map;}if(this._keyHandlerMap[key]){this[this._keyHandlerMap[key]]({node:_cf7,item:_cf7.item});_4.stopEvent(e);}}},_onEnterKey:function(_cfa){this._publish("execute",{item:_cfa.item,node:_cfa.node});this.onClick(_cfa.item,_cfa.node);},_onDownArrow:function(_cfb){var node=this._getNextNode(_cfb.node);if(node&&node.isTreeNode){this.focusNode(node);}},_onUpArrow:function(_cfd){var node=_cfd.node;var _cff=node.getPreviousSibling();if(_cff){node=_cff;while(node.isExpandable&&node.isExpanded&&node.hasChildren()){var _d00=node.getChildren();node=_d00[_d00.length-1];}}else{var _d01=node.getParent();if(!(!this.showRoot&&_d01===this.rootNode)){node=_d01;}}if(node&&node.isTreeNode){this.focusNode(node);}},_onRightArrow:function(_d02){var node=_d02.node;if(node.isExpandable&&!node.isExpanded){this._expandNode(node);}else{if(node.hasChildren()){node=node.getChildren()[0];if(node&&node.isTreeNode){this.focusNode(node);}}}},_onLeftArrow:function(_d04){var node=_d04.node;if(node.isExpandable&&node.isExpanded){this._collapseNode(node);}else{var _d06=node.getParent();if(_d06&&_d06.isTreeNode&&!(!this.showRoot&&_d06===this.rootNode)){this.focusNode(_d06);}}},_onHomeKey:function(){var node=this._getRootOrFirstNode();if(node){this.focusNode(node);}},_onEndKey:function(_d08){var node=this;while(node.isExpanded){var c=node.getChildren();node=c[c.length-1];}if(node&&node.isTreeNode){this.focusNode(node);}},_onLetterKeyNav:function(_d0b){var node=_d0b.node,_d0d=node,key=_d0b.key;do{node=this._getNextNode(node);if(!node){node=this._getRootOrFirstNode();}}while(node!==_d0d&&(node.label.charAt(0).toLowerCase()!=key));if(node&&node.isTreeNode){if(node!==_d0d){this.focusNode(node);}}},_onClick:function(e){var _d10=e.target;var _d11=_5.getEnclosingWidget(_d10);if(!_d11||!_d11.isTreeNode){return;}if((this.openOnClick&&_d11.isExpandable)||(_d10==_d11.expandoNode||_d10==_d11.expandoNodeText)){if(_d11.isExpandable){this._onExpandoClick({node:_d11});}}else{this._publish("execute",{item:_d11.item,node:_d11});this.onClick(_d11.item,_d11);this.focusNode(_d11);}_4.stopEvent(e);},_onExpandoClick:function(_d12){var node=_d12.node;this.focusNode(node);if(node.isExpanded){this._collapseNode(node);}else{this._expandNode(node);}},onClick:function(item,node){},onOpen:function(item,node){},onClose:function(item,node){},_getNextNode:function(node){if(node.isExpandable&&node.isExpanded&&node.hasChildren()){return node.getChildren()[0];}else{while(node&&node.isTreeNode){var _d1b=node.getNextSibling();if(_d1b){return _d1b;}node=node.getParent();}return null;}},_getRootOrFirstNode:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0];},_collapseNode:function(node){if(node.isExpandable){if(node.state=="LOADING"){return;}node.collapse();this.onClose(node.item,node);if(this.persist&&node.item){delete this._openedItemIds[this.model.getIdentity(node.item)];this._saveState();}}},_expandNode:function(node){if(!node.isExpandable){return;}var _d1e=this.model,item=node.item;switch(node.state){case "LOADING":return;case "UNCHECKED":node.markProcessing();var _d20=this;_d1e.getChildren(item,function(_d21){node.unmarkProcessing();node.setChildItems(_d21);_d20._expandNode(node);},function(err){console.error(_d20,": error loading root children: ",err);});break;default:node.expand();this.onOpen(node.item,node);if(this.persist&&item){this._openedItemIds[_d1e.getIdentity(item)]=true;this._saveState();}}},blurNode:function(){var node=this.lastFocused;if(!node){return;}var _d24=node.labelNode;_4.removeClass(_d24,"dijitTreeLabelFocused");_d24.setAttribute("tabIndex","-1");_5.setWaiState(_d24,"selected",false);this.lastFocused=null;},focusNode:function(node){node.labelNode.focus();},_onBlur:function(){this.inherited(arguments);if(this.lastFocused){var _d26=this.lastFocused.labelNode;_4.removeClass(_d26,"dijitTreeLabelFocused");}},_onTreeFocus:function(node){if(node){if(node!=this.lastFocused){this.blurNode();}var _d28=node.labelNode;_d28.setAttribute("tabIndex","0");_5.setWaiState(_d28,"selected",true);_4.addClass(_d28,"dijitTreeLabelFocused");this.lastFocused=node;}},_onItemDelete:function(item){var _d2a=this.model.getIdentity(item);var node=this._itemNodeMap[_d2a];if(node){var _d2c=node.getParent();if(_d2c){_d2c.removeChild(node);}delete this._itemNodeMap[_d2a];node.destroyRecursive();}},_onItemChange:function(item){var _d2e=this.model,_d2f=_d2e.getIdentity(item),node=this._itemNodeMap[_d2f];if(node){node.setLabelNode(this.getLabel(item));node._updateItemClasses(item);}},_onItemChildrenChange:function(_d31,_d32){var _d33=this.model,_d34=_d33.getIdentity(_d31),_d35=this._itemNodeMap[_d34];if(_d35){_d35.setChildItems(_d32);}},_onItemDelete:function(item){var _d37=this.model,_d38=_d37.getIdentity(item),node=this._itemNodeMap[_d38];if(node){node.destroyRecursive();delete this._itemNodeMap[_d38];}},_saveState:function(){if(!this.persist){return;}var ary=[];for(var id in this._openedItemIds){ary.push(id);}_4.cookie(this.cookieName,ary.join(","),{expires:365});},destroy:function(){if(this.rootNode){this.rootNode.destroyRecursive();}if(this.dndController&&!_4.isString(this.dndController)){this.dndController.destroy();}this.rootNode=null;this.inherited(arguments);},destroyRecursive:function(){this.destroy();},_createTreeNode:function(args){return new _5._TreeNode(args);}});_4.declare("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],labelAttr:"",root:null,query:null,constructor:function(args){_4.mixin(this,args);this.connects=[];var _d3e=this.store;if(!_d3e.getFeatures()["dojo.data.api.Identity"]){throw new Error("dijit.Tree: store must support dojo.data.Identity");}if(_d3e.getFeatures()["dojo.data.api.Notification"]){this.connects=this.connects.concat([_4.connect(_d3e,"onNew",this,"_onNewItem"),_4.connect(_d3e,"onDelete",this,"_onDeleteItem"),_4.connect(_d3e,"onSet",this,"_onSetItem")]);}},destroy:function(){_4.forEach(this.connects,_4.disconnect);},getRoot:function(_d3f,_d40){if(this.root){_d3f(this.root);}else{this.store.fetch({query:this.query,onComplete:_4.hitch(this,function(_d41){if(_d41.length!=1){throw new Error(this.declaredClass+": query "+_4.toJson(this.query)+" returned "+_d41.length+" items, but must return exactly one item");}this.root=_d41[0];_d3f(this.root);}),onError:_d40});}},mayHaveChildren:function(item){return _4.some(this.childrenAttrs,function(attr){return this.store.hasAttribute(item,attr);},this);},getChildren:function(_d44,_d45,_d46){var _d47=this.store;var _d48=[];for(var i=0;i<this.childrenAttrs.length;i++){var vals=_d47.getValues(_d44,this.childrenAttrs[i]);_d48=_d48.concat(vals);}var _d4b=0;_4.forEach(_d48,function(item){if(!_d47.isItemLoaded(item)){_d4b++;}});if(_d4b==0){_d45(_d48);}else{var _d4d=function _d4d(item){if(--_d4b==0){_d45(_d48);}};_4.forEach(_d48,function(item){if(!_d47.isItemLoaded(item)){_d47.loadItem({item:item,onItem:_d4d,onError:_d46});}});}},getIdentity:function(item){return this.store.getIdentity(item);},getLabel:function(item){if(this.labelAttr){return this.store.getValue(item,this.labelAttr);}else{return this.store.getLabel(item);}},newItem:function(args,_d53){var _d54={parent:_d53,attribute:this.childrenAttrs[0]};return this.store.newItem(args,_d54);},pasteItem:function(_d55,_d56,_d57,_d58){var _d59=this.store,_d5a=this.childrenAttrs[0];if(_d56){_4.forEach(this.childrenAttrs,function(attr){if(_d59.containsValue(_d56,attr,_d55)){if(!_d58){var _d5c=_4.filter(_d59.getValues(_d56,attr),function(x){return x!=_d55;});_d59.setValues(_d56,attr,_d5c);}_d5a=attr;}});}if(_d57){_d59.setValues(_d57,_d5a,_d59.getValues(_d57,_d5a).concat(_d55));}},onChange:function(item){},onChildrenChange:function(_d5f,_d60){},onDelete:function(_d61,_d62){},_onNewItem:function(item,_d64){if(!_d64){return;}this.getChildren(_d64.item,_4.hitch(this,function(_d65){this.onChildrenChange(_d64.item,_d65);}));},_onDeleteItem:function(item){this.onDelete(item);},_onSetItem:function(item,_d68,_d69,_d6a){if(_4.indexOf(this.childrenAttrs,_d68)!=-1){this.getChildren(item,_4.hitch(this,function(_d6b){this.onChildrenChange(item,_d6b);}));}else{this.onChange(item);}}});_4.declare("dijit.tree.ForestStoreModel",_5.tree.TreeStoreModel,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(_d6c){this.root={store:this,root:true,id:_d6c.rootId,label:_d6c.rootLabel,children:_d6c.rootChildren};},mayHaveChildren:function(item){return item===this.root||this.inherited(arguments);},getChildren:function(_d6e,_d6f,_d70){if(_d6e===this.root){if(this.root.children){_d6f(this.root.children);}else{this.store.fetch({query:this.query,onComplete:_4.hitch(this,function(_d71){this.root.children=_d71;_d6f(_d71);}),onError:_d70});}}else{this.inherited(arguments);}},getIdentity:function(item){return (item===this.root)?this.root.id:this.inherited(arguments);},getLabel:function(item){return (item===this.root)?this.root.label:this.inherited(arguments);},newItem:function(args,_d75){if(_d75===this.root){this.onNewRootItem(args);return this.store.newItem(args);}else{return this.inherited(arguments);}},onNewRootItem:function(args){},pasteItem:function(_d77,_d78,_d79,_d7a){if(_d78===this.root){if(!_d7a){this.onLeaveRoot(_d77);}}_5.tree.TreeStoreModel.prototype.pasteItem.call(this,_d77,_d78===this.root?null:_d78,_d79===this.root?null:_d79);if(_d79===this.root){this.onAddToRoot(_d77);}},onAddToRoot:function(item){console.log(this,": item ",item," added to root");},onLeaveRoot:function(item){console.log(this,": item ",item," removed from root");},_requeryTop:function(){var _d7d=this.root.children||[];this.store.fetch({query:this.query,onComplete:_4.hitch(this,function(_d7e){this.root.children=_d7e;if(_d7d.length!=_d7e.length||_4.some(_d7d,function(item,idx){return _d7e[idx]!=item;})){this.onChildrenChange(this.root,_d7e);}})});},_onNewItem:function(item,_d82){this._requeryTop();this.inherited(arguments);},_onDeleteItem:function(item){if(_4.indexOf(this.root.children,item)!=-1){this._requeryTop();}this.inherited(arguments);}});}if(!_4._hasResource["tableau.base.TreeSupport"]){_4._hasResource["tableau.base.TreeSupport"]=true;_4.provide("tableau.base.TreeSupport");_4.declare("tableau.base.widget.hsm.TreeModel",null,{root:null,session:null,field:null,levels:0,isSingleSelect:false,isRaggedOrSkipped:function(_d84){var _d85,_d86,_d87,_d88,_d89;_d85=_d84.t;if(!_d85||_d85.length===0){return false;}_d86=_d85[_d85.length-1];_d87=_d86.s;_d88=tableau.types.DataSpecial.DS_RAGGED;_d89=tableau.types.DataSpecial.DS_SKIPPED;return (_d87===_d88||_d87===_d89);},itemsFromTable:function(data,_d8b){var _d8c,_d8d,_d8e,i,_d90=[],t=data.table?data.table.tuples:null,tF=tableau.format;if(!data.table){return _d90;}for(i=0;i<t.length;i++){_d8e=tF.formatTupleDisplayName(t[i]);_d8d=null;if(data.children){_d8d=this.itemsFromTable(data.children[i],_d8b+1);}_d8c={id:tF.formatTupleUniqueName(t[i]),schema:data.table.schema,tuple:t[i],label:_d8e,level:_d8b,children:_d8d,isRaggedOrSkipped:this.isRaggedOrSkipped(t[i])};_d90.push(_d8c);}return _d90;},constructor:function(_d93,_d94,_d95,_d96){this.session=_d93;this.field=_d94;this.levels=_d95;this.isSingleSelect=_d96;this.root={schema:null,tuple:{},label:"$ROOT$",level:-1,children:null};},onChange:function(item){},onChildrenChange:function(_d98,_d99){_d98.children=_d99;},getIdentity:function(item){return item.id;},getLabel:function(item){return item.label;},isChecked:function(item){return item.tuple.s?true:false;},mayHaveChildren:function(item){return item.level+1<this.levels;},getRoot:function(_d9e,_d9f){_d9e(this.root);},getChildren:function(_da0,_da1,_da2){var _da3,_da4;if(_da0.children||_da0===this.root){_da1(_da0.children);}else{_da3=_4.hitch(this,function(_da5){if(!_da5[0].table){_da0.children=null;}else{_da0.children=this.itemsFromTable(_da5[0],_da0.level+1);}_da1(_da0.children);});_da4={schema:_da0.schema,tuples:[_da0.tuple]};this.session.requestHSMChildren(this.field,_da4,_da3,_da2);}},refresh:function(_da6){this._refreshChildren(this.root,_da6);},_refreshChildren:function(_da7,_da8){var _da9,i,_dab,_dac;if(!_da7.children){return;}this.refreshItems(_da7.children,_da8[0].table);for(i=0;i<_da7.children.length;i++){_da9=_da7.children[i];if(_da9.children){if(_da8[0].children&&i<_da8[0].children.length){this._refreshChildren(_da9,[_da8[0].children[i]]);}else{_dac=_4.hitch(this,"_refreshChildren",_da9);_dab={schema:_da9.schema,tuples:[_da9.tuple]};this.session.requestHSMChildren(this.field,_dab,_dac);}}}},refreshItems:function(_dad,_dae){var i,t=_dae.tuples;for(i=0;i<t.length;i++){if(_dad[i].tuple.s!==t[i].s){_dad[i].tuple.s=t[i].s;this.onChange(_dad[i]);}}return _dad;}});_4.declare("tableau.base.widget.hsm._TreeNode",_5._TreeNode,{isChecked:false,clickHandle:null,destroy:function(_db1){_4.disconnect(this.clickHandle);delete this.clickHandle;this.inherited(arguments);},setLabelNode:function(_db2){var html,_db4,_db5;this.isChecked=this.tree.model.isChecked(this.item);_db5=(this.isChecked)?" checked=\"checked\"":"";html="<input type=";if(this.tree.model.isSingleSelect){_db4=this.tree.model.field;if(this.tree.model.session){_db4+=this.tree.model.session.viewid.toString();}html+="\"radio\" name=\"FI_"+_db4+"\"";}else{html+="\"checkbox\"";}html+=_db5+"/><a title=\""+_db2+"\">"+_db2+"</a>";this.labelNode.innerHTML=html;if(this.clickHandle){_4.disconnect(this.clickHandle);}this.clickHandle=_4.connect(this.labelNode.firstChild,"onclick",this,"onClick");},onClick:function(e){this.isChecked=this.labelNode.firstChild.checked;this.tree.notifyChange(e);e.stopPropagation();}});_4.declare("tableau.base.widget.hsm.Tree",_5.Tree,{_createTreeNode:function(_db7){_db7.isChecked=this.model.isChecked(_db7.item);return new tableau.base.widget.hsm._TreeNode(_db7);},mayHaveChildren:function(item){return this.model.mayHaveChildren(item);},getIconClass:function(item,_dba){return "HFTreeNodeIcon";},getLabelClass:function(item,_dbc){var _dbd;_dbd=(this.model.isSingleSelect)?"HFTreeNodeLabelSS":"HFTreeNodeLabel";_dbd+=(item.isRaggedOrSkipped)?" HFTreeNodeRaggedOrSkipped":"";return _dbd;},focusNode:function(node){var i=_4.attr(node.labelNode,"tabindex");if(i){_4.removeAttr(node.labelNode,"tabindex");}this.inherited(arguments);if(i){_4.attr(node.labelNode,"tabindex",i);}},notifyChange:function(e){},getDepth:function(node){var _dc2=0;while(node!==this.rootNode){_dc2+=1;node=node.getParent();}return _dc2;},findEarlierNode:function(_dc3,_dc4,_dc5){return this._rEarlierContained(this.rootNode,0,_dc3,_dc4,_dc5);},_rEarlierContained:function(_dc6,_dc7,n1,n2,_dca){var i,kids,l,_dce;if(_dc7>_dca){return false;}else{if(_dc7<_dca){kids=_dc6.getChildren();l=kids.length;_dce=false;for(i=0;i<l;i++){_dce=this._rEarlierContained(kids[i],_dc7+1,n1,n2,_dca);if(_dce){return _dce;}}}else{if(_dc6===n1){return n1;}if(_dc6===n2){return n2;}return false;}}}});}if(!_4._hasResource["tableau.base.widget.HierarchicalFilter"]){_4._hasResource["tableau.base.widget.HierarchicalFilter"]=true;_4.provide("tableau.base.widget.HierarchicalFilter");_4.declare("tableau.base.widget.HierarchicalFilter",[_5._Widget,_5._Contained,_5._Templated],{templateString:"<div class=\"HierarchicalFilter\"\r\n  ><div dojoAttachPoint=\"domBox\" class=\"HierarchicalFilterBox\"\r\n    ><div class=\"TitleAndControls\" dojoAttachPoint=\"domControls\"\r\n      ><div class=\"FilterTitle\" dojoAttachPoint=\"domTitleBar\"\r\n        ><img dojoAttachPoint=\"domTitleImage\"/></div\r\n      ><div dojoType=\"dijit.form.Button\" class=\"HFButton HFSearchButton\" showlabel=\"false\"\r\n            dojoAttachPoint=\"searchButton\" dojoAttachEvent=\"onClick:toggleSearchUI\"\r\n            iconClass=\"wcIconSearch\">Search</div\r\n      ><div dojoType=\"dijit.form.Button\" class=\"HFButton HFMenuButton\" dojoAttachPoint=\"menuButton\"\r\n            name=\"type\" dojoAttachEvent=\"onClick:doMenu\" iconClass=\"wcIconContextMenu\">\r\n      </div>\r\n    </div\r\n    ><div dojoType=\"tableau.base.widget.SearchWidget\" dojoAttachPoint=\"searchWidget\"></div\r\n    ><div class=\"HFLevels\" dojoAttachPoint=\"domLevelBox\"\r\n      ><table cellspacing=\"2\"><tr dojoAttachPoint=\"domLevelContainer\"></tr></table></div\r\n    ><div class=\"HFSelection\" dojoAttachPoint=\"domContent\"></div\r\n    ><div dojoType=\"tableau.base.widget.ConditionalsWidget\" dojoAttachPoint=\"conditionals\"></div\r\n  ></div\r\n></div>\r\n",widgetsInTemplate:true,session:null,field:"",oFilter:null,applyDelay:500,items:[],attributes:{},stateId:0,rid:0,timestamp:0,format:{},domBox:null,domTitleBar:null,domLevelBox:null,domContent:null,domControls:null,searchButton:null,RANGE_START:"minValue",RANGE_END:"maxValue",postCreate:function(){var _dcf=0,_dd0,that,tree;that=this;this.getSID=_4.hitch(this,function(){return this.stateId;});if(this.searchWidget){this.searchWidget.qf=this;}this.timestamp=new Date().getTime();this.initFromState(true);this._localize();tree=this.tree;_4.forEach(this.tree.rootNode.getChildren(),function(node){if(node.isExpandable){tree._expandNode(node);}});if(!this.metricsOnly){_dd0=function(_dd4,hide){if(!that._hasDomNode(_dd4)){return;}if(hide){_4.addClass(_dd4.domNode,"HFButtonHide");}else{_dcf+=1;_4.addClass(_dd4.domNode,"HFButtonR"+_dcf);}};_dd0(this.menuButton,this.shouldHideContextMenu());_dd0(this.searchButton,this.shouldHideSearchButton());_4.addClass(this.domControls,"HF"+_dcf+"Button");}},fixIEInitialDraw:function(){var that=this,_dd7;if(_4.isIE){_4.style(that.domContent,"zoom","1");_dd7=function(from,to,by,_ddb){var _ddc=from,end=to,step=by,_ddf=1000/_ddb,_de0;_de0=function(){if(that.domContent){if(_ddc>end){return;}_4.style(that.domContent,"filter","alpha(opacity="+_ddc+")");_4.style(that.domContent,"opacity",_ddc/100);_ddc+=step;_ddf+=_ddf;setTimeout(_de0,_ddf);}};setTimeout(_de0,_ddf);};_dd7(96,100,1,8);}},shouldHideLevelButtons:function(){return (this.attributes["show-levels"]==="false");},shouldHideSearchButton:function(){return this.hideEmptyTitlebar()||(this.attributes["show-search"]==="false");},shouldHideContextMenu:function(){return this.hideEmptyTitlebar()||this.getContextMenuCommands().commandItems.length===0;},resize:function(_de1){_4.marginBox(this.domNode,_de1);this.layout();},getMetrics:function(){var _de2=this.tree.rootNode.getChildren().length,_de3=_4.contentBox(this.tree.domNode),_de4=_4.marginBox(this.domNode);return {fixed:{w:0,h:_de4.h-_de3.h+1},item:{w:0,h:Math.max(_de3.h/_de2,20)}};},isSingleSelect:function(){return (this.mode!=="checklist");},initMode:function(){this.mode=this.getModeFromAttributes();},getModeFromAttributes:function(){var m="checklist";if(this.attributes.mode){m=this.attributes.mode;}return m;},createTreeDom:function(){var _de6=new tableau.base.widget.hsm.TreeModel(this.session,this.field,this.oFilter.levels.length,this.isSingleSelect());_de6.onChildrenChange(_de6.root,_de6.itemsFromTable(this.oFilter.table[0],0));this.tree=new tableau.base.widget.hsm.Tree({model:_de6,showRoot:false});this.connect(this.tree,"notifyChange","notifyMemberChange");this.connect(this.tree,"_onTreeFocus","updateRangeAnchor");this.domContent.appendChild(this.tree.domNode);},hideEmptyTitlebar:function(){return (""===tableau.format.formatColumnDisplayName(this.oFilter));},setTitleImageSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},fetchTitleImage:function(){++this.rid;this.domTitleImage.src=this.layoutSession.formatZoneURL("image/png",this.zid)+"&"+this.rid+"Z"+this.timestamp;},initFromState:function(_de9){var _dea,tF=tableau.format;if(this.getModeFromAttributes()!==this.mode){_6.data.dom.removeChildren(this.domContent);}if(!this.domContent.hasChildNodes()){this.initMode();this.createTreeDom();}_dea=tF.formatColumnDisplayName(this.oFilter);_4.attr(this.domTitleBar,"title",_dea);if(this.hideEmptyTitlebar()){_4.style(this.domTitleImage,"display","none");_4.marginBox(this.domTitleBar,{h:0});}else{this.fetchTitleImage();}if(this.domLevelContainer){_6.data.dom.removeChildren(this.domLevelContainer);}if(this.shouldHideLevelButtons()){if(this.domLevelBox){_4.attr(this.domLevelBox,"display","none");}}else{this.formatLevelButtons();}if(!_de9){this.tree.model.refresh(this.oFilter.table);}if(this.tree.anchor){_4.addClass(this.tree.anchor.labelNode,"anchorSelection");}else{this.tree.anchor=null;}this.conditionals.init(this.oFilter.condition,this.oFilter.limit);this.layout();if(this.searchWidget){this.searchWidget.updateSearch();}},formatLevelButtons:function(){var _dec,i;if(!this.domLevelBox){return;}_dec=_4.doc.createElement("td");_dec.appendChild(_4.doc.createTextNode(""));_4.addClass(_dec,"HFLevelSpacer");for(i=0;i<this.oFilter.levels.length;i++){_dec=_4.doc.createElement("td");_dec.appendChild(_4.doc.createTextNode(i.toString()));this.domLevelContainer.appendChild(_dec);if(this.mode!=="radiolist"){if(this.oFilter.levels[i]===0){_4.addClass(_dec,"HFLevelAllSelected");}else{if(this.oFilter.levels[i]===1){_4.addClass(_dec,"HFLevelNoneSelected");}else{_4.addClass(_dec,"HFLevelSomeSelected");}}}if(i===0){_4.addClass(_dec,"HFLevelFirst");}else{if(i<this.oFilter.levels.length-1){_4.addClass(_dec,"HFLevelNonLeaf");}else{_4.addClass(_dec,"HFLevelLast");}}this.connect(_dec,"onclick",this.onLevelClick);}},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},applyChanges:function(){var _dee={schema:[],tuples:[]},data,node,_df1=[].concat(this.tree.rootNode.getChildren()),t,_df3="filter-delta",_df4=[],_df5=[],_df6,_df7,i,_df9;if(_df1.length===0){return;}do{node=_df1.shift();t=node.item.tuple;if(node.item.schema.length>_dee.schema.length){_dee.schema=node.item.schema;}if(node.isChecked&&!t.s){t.s=true;_dee.tuples.push(t);if(this.isSingleSelect()){_df3="filter-replace";break;}}else{if(!node.isChecked&&t.s){delete t.s;_dee.tuples.push(t);}}_df1=_df1.concat(node.getChildren());}while(_df1.length!==0);_df6=_dee.tuples;if(_df6.length!==0){for(i=0;i<_df6.length;i++){_df7=_df6[i].t.length-1;_df9=_df6[i].t[_df7].v;if(_df6[i].s){_df4.push(_df9);}else{_df5.push(_df9);}}tab.FilterClientCommands.doMemberHierarchialFilter(this.session.get_sheetName(),this.field,_df4,_df5,_df3);}},applyRangeChanges:function(_dfa,_dfb){if(!_dfa||!_dfb){return;}var _dfc=this.tree.getDepth(_dfb),_dfd=this.tree.findEarlierNode(_dfb,_dfa,_dfc),_dfe=(_dfd===_dfb)?_dfa:_dfb,_dff=_dfd.item.tuple.t,_e00=_dfe.item.tuple.t,_e01=_dff[_dff.length-1].v,_e02=_e00[_e00.length-1].v,_e03={},_e04={},_e05="filter-delta";if(_dfa.isChecked){_e03[this.RANGE_START]=_e01;_e03[this.RANGE_END]=_e02;}else{_e04[this.RANGE_START]=_e01;_e04[this.RANGE_END]=_e02;}tab.FilterClientCommands.doRangeHierarchialFilter(this.session.get_sheetName(),this.field,_e03,_e04,_e05);},updateStateFromSearch:function(_e06){var _e07={},i,_e09,_e0a=_e06.tuples,node,_e0c,t;for(i=0;i<_e0a.length;i++){_e07[_e0a[i].d]=(_e0a[i].s===true);}_e0c=[].concat(this.tree.rootNode.getChildren());while(_e0c.length!==0){node=_e0c.shift();t=node.item.tuple;_e09=_e07[t.d];if(_e09!==undefined){if(_e09!==t.s){if(_e09){node.isChecked=true;node.labelNode.firstChild.checked=true;t.s=true;}else{node.isChecked=false;node.labelNode.firstChild.checked=false;delete t.s;}}}else{if(this.isSingleSelect()&&t.s){node.isChecked=false;node.labelNode.firstChild.checked=false;delete t.s;}}_e0c=_e0c.concat(node.getChildren());}},updateRangeAnchor:function(node){if(this.isSingleSelect()){return;}if(this.tree.anchor===node){return;}if(this.tree.anchor){_4.removeClass(this.tree.anchor.labelNode,"anchorSelection");_4.removeClass(this.tree.anchor.labelNode,"dijitTreeLabelFocused");this.tree.prev_anchor=this.tree.anchor;}this.tree.anchor=node;_4.addClass(this.tree.anchor.labelNode,"anchorSelection");},notifyMemberChange:function(e){var _e10;if(e.target.tagName.toLowerCase()==="input"){if(this._applyTimer){clearTimeout(this._applyTimer);delete this._applyTimer;}this.stateId++;_e10=_5.getEnclosingWidget(e.target.parentNode);if(this.tree.anchor!==_e10){this.updateRangeAnchor(_e10);}if(e.shiftKey===true&&this.tree.prev_anchor&&this.tree.getDepth(this.tree.prev_anchor)===this.tree.getDepth(this.tree.anchor)&&!this.isSingleSelect()){this.updateCheckboxRange(this.tree.anchor,this.tree.prev_anchor);this.applyRangeChanges(this.tree.anchor,this.tree.prev_anchor);}else{this._applyTimer=setTimeout(_4.hitch(this,this.applyChanges),this.applyDelay);}}},updateCheckboxRange:function(_e11,_e12){var _e13=this.tree.getDepth(_e12),_e14=this.tree.findEarlierNode(_e12,_e11,_e13),_e15=(_e14===_e12)?_e11:_e12,_e16=_e11.isChecked,node=_e14;this.tree.anchorIsStart=(_e14!==_e12);while(node&&node.isTreeNode&&node!==_e15){node.labelNode.firstChild.checked=_e16;node.isChecked=_e16;node=this.getNextInLevel(node,_e13);}_e15.labelNode.firstChild.checked=_e16;_e15.isChecked=_e16;},getNextInLevel:function(node,_e19){var _e1a=_e19,_e1b=node,_e1c,_e1d=node.getNextSibling();if(_e1d){return _e1d;}while(!_e1d&&_e1a>=0){_e1b=_e1b.getParent();_e1a-=1;_e1d=_e1b.getNextSibling();while(_e1d){_e1c=this._rGetFirstChildInLevel(_e1d,_e1a,_e19);if(_e1c){return _e1c;}_e1d=_e1d.getNextSibling();}}if(_e1a>=0){return _e1d;}return null;},_rGetFirstChildInLevel:function(node,_e1f,_e20){var i,_e22,l,kids;if(!node){return null;}if(_e1f<0){return null;}if(_e1f>_e20){return null;}if(_e1f===_e20){return node;}if(node.hasChildren()){kids=node.getChildren();l=kids.length;for(i=0;i<l;i++){_e22=this._rGetFirstChildInLevel(kids[i],_e1f+1,_e20);if(_e22){return _e22;}}}return null;},toggleSearchUI:function(){if(this.searchWidget){this.searchWidget.toggleUI();}},onLevelClick:function(e){var _e26=e.target,lvl,_e28,_e29,_e2a=[],_e2b=[];if(_e26.tagName.toLowerCase()!=="td"){return;}_4.stopEvent(e);if(this.isSingleSelect()){return;}lvl=parseInt(_6.data.dom.textContent(_e26),10);if(this.oFilter.levels[lvl]===0){_e28=false;_4.removeClass(_e26,"HFLevelAllSelected");_4.removeClass(_e26,"HFLevelSomeSelected");_4.addClass(_e26,"HFLevelNoneSelected");this.oFilter.levels[lvl]=1;}else{_e28=true;_4.removeClass(_e26,"HFLevelNoneSelected");_4.removeClass(_e26,"HFLevelSomeSelected");_4.addClass(_e26,"HFLevelAllSelected");this.oFilter.levels[lvl]=0;}if(_e28){_e2a.push(lvl);}else{_e2b.push(lvl);}if(_e2a.length>0||_e2b.length>0){tab.FilterClientCommands.doLevelHierarchialFilter(this.session.get_sheetName(),this.field,_e2a,_e2b,"filter-delta");}},layout:function(){var _e2c,h,_e2e,_e2f,_e30,_e31,_e32,_e33,_e34;_4.removeClass(this.domNode,"HFHorizontal");_e33=_4.contentBox(this.domNode);_e32=_4.marginBox(this.domTitleImage);_e30=this.domLevelBox?_4.marginBox(this.domLevelBox):{w:0,h:0};_e2f=_4.marginBox(this.conditionals.domNode);_e31={h:0};if(this.titleH>0){_e32.h=this.titleH;_4.marginBox(this.domTitleBar,{h:_e32.h});}if(this.titleW>0){_e32.w=this.titleW;_4.marginBox(this.domTitleBar,{w:_e32.w});}_e34=_e32.h;_e2c=_e33.w;if(!this.hideEmptyTitlebar()&&this.titleW>0){_4.addClass(this.domNode,"HFHorizontal");_4.style(this.domTitleBar,"float","left");if(this.domLevelBox){_4.style(this.domLevelBox,"float","left");}if(this._hasDomNode(this.menuButton)){_4.addClass(this.menuButton.domNode,"HFButtonHide");}if(this._hasDomNode(this.searchButton)){_4.addClass(this.searchButton.domNode,"HFButtonHide");}_e2c-=_e32.w;_e34=0;}else{if(!this.shouldHideContextMenu()&&this._hasDomNode(this.menuButton)){_4.removeClass(this.menuButton.domNode,"HFButtonHide");}if(!this.shouldHideSearchButton()&&this._hasDomNode(this.searchButton)){_4.removeClass(this.searchButton.domNode,"HFButtonHide");}_4.style(this.domTitleBar,"float","none");if(this.domLevelBox){_4.style(this.domLevelBox,"float","none");}}if(this.searchWidget&&this.searchWidget.isVisible){_e2e=_e33.h-_e34-_e30.h-_e2f.h;this.searchWidget.layout(_e2e);_e31=_4.marginBox(this.searchWidget.domNode);}h=_e33.h-_e34-_e30.h-_e2f.h-_e31.h;if(this.domLevelBox){_4.marginBox(this.domLevelBox,{w:_e2c});}_4.marginBox(this.domContent,{h:h,w:_e2c});this.fixIEInitialDraw();},_hasDomNode:function(_e35){return !tab.MiscUtil.isNullOrUndefined(_e35)&&!tab.MiscUtil.isNullOrUndefined(_e35.domNode);},_localize:function(){tableau.util.localizeDojoLabeledControls([[this.searchButton,"QuickFilterSearch"],[this.domSingleSelect,"QuickFilterSingleSelect"],[this.domMultiSelect,"QuickFilterMultiSelect"]]);}});}if(!_4._hasResource["dijit.form.CheckBox"]){_4._hasResource["dijit.form.CheckBox"]=true;_4.provide("dijit.form.CheckBox");_4.declare("dijit.form.CheckBox",_5.form.ToggleButton,{templateString:"<div class=\"dijitReset dijitInline\" waiRole=\"presentation\"\r\n\t><input\r\n\t \ttype=\"${type}\" name=\"${name}\"\r\n\t\tclass=\"dijitReset dijitCheckBoxInput\"\r\n\t\tdojoAttachPoint=\"focusNode\"\r\n\t \tdojoAttachEvent=\"onmouseover:_onMouse,onmouseout:_onMouse,onclick:_onClick\"\r\n/></div>\r\n",baseClass:"dijitCheckBox",type:"checkbox",value:"on",_setValueAttr:function(_e36){if(typeof _e36=="string"){this.value=_e36;_4.attr(this.focusNode,"value",_e36);_e36=true;}if(this._created){this.attr("checked",_e36);}},_getValueAttr:function(){return (this.checked?this.value:false);},postMixInProperties:function(){if(this.value==""){this.value="on";}this.inherited(arguments);},_fillContent:function(_e37){},reset:function(){this._hasBeenBlurred=false;this.attr("checked",this.params.checked||false);this.value=this.params.value||"on";_4.attr(this.focusNode,"value",this.value);},_onFocus:function(){if(this.id){_4.query("label[for='"+this.id+"']").addClass("dijitFocusedLabel");}},_onBlur:function(){if(this.id){_4.query("label[for='"+this.id+"']").removeClass("dijitFocusedLabel");}}});_4.declare("dijit.form.RadioButton",_5.form.CheckBox,{type:"radio",baseClass:"dijitRadio",_setCheckedAttr:function(_e38){this.inherited(arguments);if(!this._created){return;}if(_e38){var _e39=this;_4.query("INPUT[type=radio][name="+this.name+"]",this.focusNode.form||_4.doc).forEach(function(_e3a){if(_e3a!=_e39.focusNode&&_e3a.form==_e39.focusNode.form){var _e3b=_5.getEnclosingWidget(_e3a);if(_e3b&&_e3b.checked){_e3b.attr("checked",false);}}});}},_clicked:function(e){if(!this.checked){this.attr("checked",true);}}});}if(!_4._hasResource["tableau.base.widget.RelativeDateFilter"]){_4._hasResource["tableau.base.widget.RelativeDateFilter"]=true;_4.provide("tableau.base.widget.RelativeDateFilter");_4.declare("tableau.base.widget.RelativeDateFilter",[_5._Widget,_5._Contained,_5._Templated],{templateString:"<div class=\"RelativeDateFilter\"\r\n    ><div class=\"RelativeDateFilterBox\" dojoAttachPoint=\"domBox\"\r\n        ><div class=\"TitleAndControls\" dojoAttachPoint=\"domControls\"\r\n            ><div class=\"FilterTitle\" dojoAttachPoint=\"domTitleBar\"\r\n                ><img dojoAttachPoint=\"domTitleImage\"/></div\r\n        ><div dojoType=\"dijit.form.Button\" class=\"RDFButton RDFMenuButton\" name=\"type\" dojoAttachPoint=\"menuButton\"\r\n                          dojoAttachEvent=\"onClick:doMenu\" iconClass=\"wcIconContextMenu\"></div></div\r\n        ><div dojoType=\"dijit.form.DropDownButton\" dojoAttachPoint=\"domDropdownButton\"\r\n            ><span class=\"RDText\">date description</span\r\n            ><div dojoType=\"dijit.TooltipDialog\" dojoAttachPoint=\"domTooltipDialog\"\r\n                ><div class=\"RelativeDateFilterDialog\" dojoAttachPoint=\"domDialog\"\r\n                    ><div class=\"RangeButtonsBar\"\r\n                      ><div dojotype=\"dijit.form.ToggleButton\" dojoAttachEvent=\"onClick:setPYear\"\r\n                            dojoAttachPoint=\"bYear\" name=\"year\">Years</div\r\n                      ><div dojotype=\"dijit.form.ToggleButton\" dojoAttachEvent=\"onClick:setPQuarter\"\r\n                            dojoAttachPoint=\"bQuarter\" name=\"quarter\">Quarters</div\r\n                      ><div dojotype=\"dijit.form.ToggleButton\" dojoAttachEvent=\"onClick:setPMonth\"\r\n                            dojoAttachPoint=\"bMonth\" name=\"month\">Months</div\r\n                      ><div dojotype=\"dijit.form.ToggleButton\" dojoAttachEvent=\"onClick:setPWeek\"\r\n                            dojoAttachPoint=\"bWeek\" name=\"week\">Weeks</div\r\n                      ><div dojotype=\"dijit.form.ToggleButton\" dojoAttachEvent=\"onClick:setPDay\"\r\n                            dojoAttachPoint=\"bDay\" name=\"day\">Days</div\r\n                      ><div dojotype=\"dijit.form.ToggleButton\" dojoAttachEvent=\"onClick:setPHour\"\r\n                            dojoAttachPoint=\"bHour\" name=\"hour\">Hours</div\r\n                      ><div dojotype=\"dijit.form.ToggleButton\" dojoAttachEvent=\"onClick:setPMinute\"\r\n                            dojoAttachPoint=\"bMinute\" name=\"minute\">Minutes</div\r\n                    ></div\r\n                    ><div class=\"vertSpacer topHR\"></div\r\n                    ><div class=\"radioLine\"\r\n                      ><div class=\"column1\"\r\n                        ><input class=\"rradio\" type=\"radio\" name=\"radio-${field}\" value=\"last\"\r\n                                dojoAttachPoint=\"rLast\" dojoAttachEvent=\"onclick:setRLast\"></input\r\n                        ><span class=\"rlabel\" dojoAttachPoint=\"tLast\" dojoAttachEvent=\"onclick:setRLast\"></span\r\n                      ></div\r\n                      ><div class=\"column2\"\r\n                        ><input class=\"rradio\" type=\"radio\" name=\"radio-${field}\" value=\"lastn\"\r\n                                dojoAttachPoint=\"rLastn\" dojoAttachEvent=\"onclick:setRLastn\"></input\r\n                        ><span class=\"rlabel alignLN\" dojoAttachPoint=\"tLastn1\" dojoAttachEvent=\"onclick:setRLastn\"></span\r\n                        ><input class=\"rtext\" type=\"text\" size=\"2\" dojoAttachPoint=\"inLastn\" value=\"3\"\r\n                                dojoAttachEvent=\"onkeyup:onTypingLast\"></input\r\n                        ><span class=\"spinner\" dojoAttachPoint=\"lastSpinner\"\r\n                            ><div class=\"spinnerElement spinnerUp\" dojoAttachPoint=\"lastUp\"\r\n                                  dojoAttachEvent=\"onmouseover:overLastUp,onmouseout:outLastUp,onclick:upLast\"></div\r\n                            ><div class=\"spinnerElement spinnerDown\" dojoAttachPoint=\"lastDown\"\r\n                                  dojoAttachEvent=\"onmouseover:overLastDown,onmouseout:outLastDown,onclick:downLast\"></div\r\n                        ></span\r\n                        ><span class=\"rlabel\" dojoAttachPoint=\"tLastn2\" dojoAttachEvent=\"onclick:setRLastn\"></span\r\n                      ></div\r\n                    ></div\r\n                    ><div class=\"radioLine\"\r\n                      ><div class=\"column1\"\r\n                        ><input class=\"rradio\" type=\"radio\" name=\"radio-${field}\" value=\"curr\"\r\n                                dojoAttachPoint=\"rCurr\" dojoAttachEvent=\"onclick:setRCurr\"></input\r\n                        ><span class=\"rlabel\" dojoAttachPoint=\"tCurr\" dojoAttachEvent=\"onclick:setRCurr\"></span\r\n                      ></div\r\n                      ><div class=\"column2\"\r\n                        ><input class=\"rradio\" type=\"radio\" name=\"radio-${field}\" value=\"nextn\"\r\n                                dojoAttachPoint=\"rNextn\" dojoAttachEvent=\"onclick:setRNextn\"></input\r\n                        ><span class=\"rlabel alignLN\" dojoAttachPoint=\"tNextn1\" dojoAttachEvent=\"onclick:setRNextn\"></span\r\n                        ><input class=\"rtext\" type=\"text\" size=\"2\" dojoAttachPoint=\"inNextn\" value=\"3\"\r\n                                dojoAttachEvent=\"onkeyup:onTypingNext\"></input\r\n                        ><span class=\"spinner\" dojoAttachPoint=\"nextSpinner\"\r\n                            ><div class=\"spinnerElement spinnerUp\" dojoAttachPoint=\"nextUp\"\r\n                                  dojoAttachEvent=\"onmouseover:overNextUp,onmouseout:outNextUp,onclick:upNext\"></div\r\n                            ><div class=\"spinnerElement spinnerDown\" dojoAttachPoint=\"nextDown\"\r\n                                  dojoAttachEvent=\"onmouseover:overNextDown,onmouseout:outNextDown,onclick:downNext\"></div\r\n                        ></span\r\n                        ><span class=\"rlabel\" dojoAttachPoint=\"tNextn2\" dojoAttachEvent=\"onclick:setRNextn\"></span\r\n                      ></div\r\n                    ></div\r\n                    ><div class=\"radioline\"\r\n                      ><div class=\"column1\"\r\n                        ><input class=\"rradio\" type=\"radio\" name=\"radio-${field}\" value=\"next\"\r\n                                dojoAttachPoint=\"rNext\" dojoAttachEvent=\"onclick:setRNext\"></input\r\n                        ><span class=\"rlabel\" dojoAttachPoint=\"tNext\" dojoAttachEvent=\"onclick:setRNext\"></span\r\n                      ></div\r\n                      ><div class=\"column2\"\r\n                        ><input class=\"rradio\" type=\"radio\" name=\"radio-${field}\" value=\"todate\"\r\n                                dojoAttachPoint=\"rTodate\" dojoAttachEvent=\"onclick:setRTodate\"></input\r\n                        ><span class=\"rlabel\" dojoAttachPoint=\"tTodate\" dojoAttachEvent=\"onclick:setRTodate\"></span\r\n                      ></div\r\n                    ></div\r\n                    ><div class=\"vertSpacer bottomHR\"></div\r\n                    ><div class=\"preview\"\r\n                      ><span dojoAttachPoint=\"domPreview\"></span\r\n                    ></div\r\n                ></div\r\n            ></div\r\n        ></div\r\n    ></div\r\n></div>\r\n",widgetsInTemplate:true,session:null,field:"",oFilter:null,format:{},stateId:0,rid:0,timestamp:0,rangeButtons:[],periodInputs:[],periodType:"",rangeType:"",rangeN:0,anchorDateTime:0,fy:0,UPDATE_DELAY:800,firstPeriod:0,lastPeriod:0,isFutureIncluded:true,domBox:null,domTitleBar:null,domText:null,domDropdownButton:null,domDialog:null,bYear:null,bQuarter:null,bMonth:null,bWeek:null,bDay:null,bHour:null,bMinute:null,rLast:null,rCurr:null,rNext:null,rLastn:null,rNextn:null,rTodate:null,tLast:null,tCurr:null,tNext:null,tLastn1:null,tLastn2:null,tNextn1:null,tNextn2:null,tTodate:null,inLastn:null,inNextn:null,lastSpinner:null,nextSpinner:null,lastUp:null,lastDown:null,nextUp:null,nextDown:null,domPreview:null,classButtonR:"RDFButtonR",classButtonHide:"RDFButtonHide",postCreate:function(){var _e3d,_e3e=0;this._connections=[];this._localize();this.getSID=_4.hitch(this,function(){return this.stateId;});if(this.oFilter.fy){this.fy=this.oFilter.fy-1;}this.timestamp=new Date().getTime();this.rangeButtons=[this.bYear,this.bQuarter,this.bMonth,this.bWeek,this.bDay];if(this.oFilter.noTime){_4.style(this.bHour.domNode,"display","none");_4.style(this.bMinute.domNode,"display","none");}else{this.rangeButtons.push(this.bHour);this.rangeButtons.push(this.bMinute);}this._connections.push(_4.connect(this.domTooltipDialog,"onOpen",this,"openDialog"));this.initFromState();_e3d=function(_e3f,hide,that){if(hide){_4.addClass(_e3f.domNode,that.classButtonHide);}else{_e3e+=1;_4.addClass(_e3f.domNode,that.classButtonR+_e3e);}};_e3d(this.menuButton,this.shouldHideContextMenu(),this);},shouldHideContextMenu:function(){return this.hideEmptyTitlebar()||this.getContextMenuCommands().commandItems.length===0;},hideEmptyTitlebar:function(){return (""===tableau.format.formatColumnDisplayName(this.oFilter));},setTitleImageSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},destroy:function(_e44){_4.forEach(this._connections,_4.disconnect);if(this.domText){this.domText.innerHTML="";}this.inherited(arguments);},layout:function(){var _e45,_e46,_e47,_e48,text,_e4a;_4.removeClass(this.domNode,"RDFHorizontal");_e46=_4.marginBox(this.domDialog);if(!_e46||!_e46.w||_e46.w===0){return;}_e47=_4.marginBox(this.domTitleImage);if(this.titleH>0){_e47.h=this.titleH;_4.marginBox(this.domTitleBar,{h:_e47.h});}if(this.titleW>0){_e47.w=this.titleW;_4.marginBox(this.domTitleBar,{w:_e47.w});}_e48=_4.contentBox(this.domNode);_e4a=_e48.w-4;if(!this.hideEmptyTitlebar()&&this.titleW>0){_4.addClass(this.domNode,"RDFHorizontal");_4.style(this.domTitleBar,"float","left");_4.style(this.domDropdownButton.domNode,"float","left");_e4a=_e48.w-_e47.w-6;}else{_4.style(this.domTitleBar,"float","none");_4.style(this.domDropdownButton.domNode,"float","none");}if(_e4a>29){_4.style(this.domDropdownButton.domNode,"width",_e4a+"px");_4.style(this.domDropdownButton.domNode.firstChild,"width",(_e4a-4)+"px");_e4a=_e4a-25;text=this.domDropdownButton.domNode.firstChild.firstChild.firstChild.childNodes[1];if(text){_4.style(text,"width",_e4a+"px");}}_e45=Math.floor((_e46.w-10)/this.rangeButtons.length);_4.forEach(this.rangeButtons,function(n){_4.style(n.titleNode,"width",(_e45-5)+"px");});},getMetrics:function(){var _e4c=_4.marginBox(this.domNode);return {fixed:{w:0,h:_e4c.h}};},initFromState:function(){var a,f=this.oFilter.table,_e4f;this.domDropdownButton.attr("label",this.oFilter.text);this.periodType=f.periodType;this.rangeType=f.rangeType;this.rangeN=f.rangeN;if(f.anchor!==undefined){a=f.anchor;this.anchorDateTime=new Date(a.year,a.month-1,a.day,a.hour,a.minute,a.second);}this.setRangeType(this.rangeType,this.rangeN);_e4f=tableau.format.formatColumnDisplayName(this.oFilter);_4.attr(this.domTitleBar,"title",_e4f);if(this.hideEmptyTitlebar()){_4.style(this.domTitleImage,"display","none");_4.marginBox(this.domTitleBar,{h:0});}else{this.fetchTitleImage();}},fetchTitleImage:function(){this.rid+=1;this.domTitleImage.src=this.layoutSession.formatZoneURL("image/png",this.zid)+"&"+this.rid+"Z"+this.timestamp;},applyChanges:function(){var data={},node;data.periodType=this.periodType;data.rangeType=this.rangeType;data.rangeN=this.rangeN;this.stateId+=1;node=tableau.util.findDirectParentByClassName(this.domDialog,"dijitPopup",_4.body());if(!tab.MiscUtil.isNullOrUndefined(node)){_4.style(node,"zIndex","980");}tab.FilterClientCommands.doRelativeDateQuickFilter(this.session.get_sheetName(),this.field,this.periodType,this.rangeType,this.rangeN);},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},getDefaultDateFormat:function(){var f=this.oFilter&&this.oFilter.default_format;return (f&&f.length===3)?f[0]:"*M/d/yyyy";},getDefaultTimeFormat:function(){var f=this.oFilter&&this.oFilter.default_format;return (f&&f.length===3)?f[1].substr(1):"hh:nn:ss ampm";},getLocale:function(){var f=this.oFilter&&this.oFilter.default_format;return (f&&f.length===3)?f[2]:"en_US";},openDialog:function(){this.setPeriodUI(this.periodType);this.setRangeUI(this.rangeType,this.rangeN);this.setPreviewUI();},onTypingLast:function(){this.onTyping(this.inLastn);},onTypingNext:function(){this.onTyping(this.inNextn);},onTyping:function(_e55){if(this._applyTimer){clearTimeout(this._applyTimer);delete this._applyTimer;}_e55.value=_e55.value.replace(/[^0-9]/g,"");if(_e55.value.length>0&&_e55.value!==this.oFilter.rangeN){this.rangeN=_e55.value;this.rangeType=(_e55===this.inLastn)?"lastn":"nextn";this.setRangeType(this.rangeType,this.rangeN);this._applyTimer=setTimeout(_4.hitch(this,this.applyChanges),this.UPDATE_DELAY);}this.setPreviewUI();},setRLast:function(){this.setRange("last");},setRCurr:function(){this.setRange("curr");},setRNext:function(){this.setRange("next");},setRLastn:function(){this.setRange("lastn",this.inLastn.value);},setRNextn:function(){this.setRange("nextn",this.inNextn.value);},setRTodate:function(){this.setRange("todate");},setRange:function(_e56,n){n=n||0;if(this._applyTimer){clearTimeout(this._applyTimer);delete this._applyTimer;}if(_e56!==this.rangeType){this.rangeType=_e56;this.setRangeType(_e56,n);this.setRangeUI(_e56,n);this._applyTimer=setTimeout(_4.hitch(this,this.applyChanges),this.UPDATE_DELAY);}this.setPreviewUI();},setRangeUI:function(_e58,n){this.inLastn.disabled=true;this.inNextn.disabled=true;_4.style(this.lastSpinner,"display","none");_4.removeClass(this.rLastn,"spinnerBugFix");_4.style(this.nextSpinner,"display","none");_4.removeClass(this.rNextn,"spinnerBugFix");switch(_e58){case "last":this.rLast.checked=true;break;case "curr":this.rCurr.checked=true;break;case "next":this.rNext.checked=true;break;case "lastn":this.rLastn.checked=true;this.inLastn.value=this.rangeN=n;this.inLastn.disabled=false;_4.style(this.lastSpinner,"display","");_4.addClass(this.rLastn,"spinnerBugFix");break;case "nextn":this.rNextn.checked=true;this.inNextn.value=this.rangeN=n;this.inNextn.disabled=false;_4.style(this.nextSpinner,"display","");_4.addClass(this.rNextn,"spinnerBugFix");break;case "todate":this.rTodate.checked=true;break;}},setPYear:function(){this.setPeriod("year");},setPQuarter:function(){this.setPeriod("quarter");},setPMonth:function(){this.setPeriod("month");},setPWeek:function(){this.setPeriod("week");},setPDay:function(){this.setPeriod("day");},setPHour:function(){this.setPeriod("hour");},setPMinute:function(){this.setPeriod("minute");},setPSecond:function(){this.setPeriod("second");},setPeriod:function(_e5a){if(this._applyTimer){clearTimeout(this._applyTimer);delete this._applyTimer;}if(_e5a!==this.periodType){if(this.oFilter.noTime&&_e5a==="day"){_4.style(this.rTodate,"display","none");_4.style(this.tTodate,"display","none");}else{_4.style(this.rTodate,"display","");_4.style(this.tTodate,"display","");}this.periodType=_e5a;this.setPreviewUI();this.setPeriodUI(_e5a);this._applyTimer=setTimeout(_4.hitch(this,this.applyChanges),this.UPDATE_DELAY*2);}},setPeriodUI:function(_e5b){var _e5c,i,l,_e5f,_e60,_e61,_e62;for(i=0,l=this.rangeButtons.length;i<l;i++){this.rangeButtons[i].attr("checked",this.rangeButtons[i].name===_e5b);}if(this.anchorDateTime===0){_e5c=tab.RelativeDateFilter.get_nonAnchoredDescriptions()[_e5b];}else{_e5c=tab.RelativeDateFilter.get_anchoredDescriptions()[_e5b];}this.tLast.innerHTML=_e5c[tab.RelativeDateFilterRangeType.last];this.tCurr.innerHTML=_e5c[tab.RelativeDateFilterRangeType.curr];this.tNext.innerHTML=_e5c[tab.RelativeDateFilterRangeType.next];_e5f=_e5c[tab.RelativeDateFilterRangeType.lastn].split("%");this.tLastn1.innerHTML=_e5f[0];this.tLastn2.innerHTML=_e5f[1];_e60=_e5c[tab.RelativeDateFilterRangeType.nextn].split("%");this.tNextn1.innerHTML=_e60[0];this.tNextn2.innerHTML=_e60[1];this.tTodate.innerHTML=_e5c[tab.RelativeDateFilterRangeType.todate];_e61=_4.style(this.tLastn1,"width");_e62=_4.style(this.tNextn1,"width");if(_e61>_e62){_4.style(this.tNextn1,"width",_e61+"px");}else{if(_e61<_e62){_4.style(this.tLastn1,"width",_e62+"px");}}},setPreviewUI:function(){this.domPreview.innerHTML=this.getPreviewMessage();},getPreviewMessage:function(){var _e63=this.getEffectiveAnchor(),_e64,_e65=this.getDefaultDateFormat(),_e66=this.getLocale(),_e67,_e68,_e69=this.getDefaultTimeFormat(),_e6a,str,_e6c=this.getAnchorPeriod(_e63),_e6d=this.evaluateFirstDate(_e6c),_e6e=_e65+" "+_e69,_e6f=this.evaluateLastDate(_e63,_e6c);_e6d=new Date(Date.UTC(_e6d.getFullYear(),_e6d.getMonth(),_e6d.getDate(),_e6d.getHours(),_e6d.getMinutes(),_e6d.getSeconds()));_e6f=new Date(Date.UTC(_e6f.getFullYear(),_e6f.getMonth(),_e6f.getDate(),_e6f.getHours(),_e6f.getMinutes(),_e6f.getSeconds()));if(this.isRangeValid(_e6d,_e6f)){_e64=tableau.format.formatCustomJSDateTime(_e6d,_e65,null,null,_e66);_e6a=tableau.format.formatCustomJSDateTime(_e6f,_e65,null,null,_e66);if(this.periodType==="hour"||this.periodType==="minute"||this.periodType==="second"||(this.periodType==="day"&&!this.isFutureIncluded)){_e67=_e6e;_e68=(_e64===_e6a)?_e69:_e6e;_e64=tableau.format.formatCustomJSDateTime(_e6d,_e67,null,null,_e66);_e6a=tableau.format.formatCustomJSDateTime(_e6f,_e68,null,null,_e66);}str=tab.Strings.RelDateFilterPreview(_e64,_e6a);}else{str="Invalid relative date";if(this._applyTimer){clearTimeout(this._applyTimer);delete this._applyTimer;}}return str;},lowestAllowedDate:new Date(1753,0,1),highestAllowedDate:new Date(9999,11,31),isRangeValid:function(_e70,_e71){var _e72=true;if(isNaN(_e70)||isNaN(_e71)){_e72=false;}else{if(this.firstPeriod>this.lastPeriod||(this.firstPeriod>0&&!this.isFutureIncluded)){_e72=false;}else{if(!_e70||!_e71){_e72=false;}else{if(_e70<this.lowestAllowedDate||_e71>this.highestAllowedDate){_e72=false;}}}}return _e72;},getEffectiveAnchor:function(){return (this.anchorDateTime===0)?new Date():this.anchorDateTime;},getAnchorPeriod:function(_e73){return this.roundToPeriod(this.fy,_e73);},evaluateFirstDate:function(_e74){return tab.DateUtil.adjustDateByPeriod(_e74,this.periodType,this.firstPeriod);},evaluateLastDate:function(_e75,_e76){var _e77=tab.DateUtil.adjustDateByPeriod(_e76,this.periodType,this.lastPeriod+1),_e78=this.adjustLastDate(_e77);if(!this.isFutureIncluded){_e78=Math.min(_e75.getTime(),_e78.getTime());}return new Date(_e78);},roundToPeriod:function(_e79,d){var _e7b,_e7c=d.getMonth(),_e7d,_e7e,ret,year=d.getFullYear();switch(this.periodType){case "year":if(_e7c<_e79){year-=1;}return new Date(year,_e79);case "quarter":if(_e7c>=_e79){_e7e=Math.floor((_e7c-_e79)/3);_e7c=_e79+(_e7e*3);}else{_e7e=Math.floor((_e7c+12-_e79)/3);_e7d=(_e79+(_e7e*3))%12;if(_e7d===0){_e7d=12;}if(_e7d>_e7c){--year;}_e7c=_e7d;}return new Date(year,_e7c);case "month":return new Date(year,_e7c);case "week":_e7b=d.getDay();ret=new Date(year,_e7c,d.getDate());return new Date(ret.getTime()-(_e7b*tab.DateUtil.oneDay));case "day":return new Date(year,_e7c,d.getDate());case "hour":return new Date(year,_e7c,d.getDate(),d.getHours());case "minute":return new Date(year,_e7c,d.getDate(),d.getHours(),d.getMinutes());case "second":return new Date(year,_e7c,d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds());}},adjustLastDate:function(d){var _e82;switch(this.periodType){case "year":case "quarter":case "month":case "week":case "day":_e82=new Date(d.getFullYear(),d.getMonth(),d.getDate());_e82=new Date(_e82.getTime()-tab.DateUtil.oneSecond);break;case "hour":case "minute":case "second":_e82=new Date(d.getTime()-tab.DateUtil.oneSecond);break;}return _e82;},getRangeType:function(){var _e83=this.isFutureIncluded,_e84=this.firstPeriod,_e85=this.lastPeriod,_e86;if(_e84===0&&_e85===0&&_e83){_e86="curr";}else{if(_e84===0&&_e85===0&&!_e83){_e86="todate";}else{if(_e84===-1&&_e85===-1&&_e83){_e86="last";}else{if(_e84===1&&_e85===1&&_e83){_e86="next";}else{if(_e84<0&&_e85===0&&_e83){_e86="lastn";}else{if(_e84===0&&_e85>0&&_e83){_e86="nextn";}else{if(_e84>0&&_e85>0&&!_e83){_e86="invalid";}else{if(_e84>_e85){_e86="invalid";}else{if(_e84===_e85){_e86="other";}else{_e86="othern";}}}}}}}}}return _e86;},getPeriods:function(){return this.lastPeriod-this.firstPeriod+1;},setRangeType:function(_e87,n){var _e89,_e8a,_e8b;switch(_e87){case "curr":_e89=0;_e8a=0;_e8b=true;break;case "todate":_e89=0;_e8a=0;_e8b=false;break;case "last":_e89=-1;_e8a=-1;_e8b=true;break;case "next":_e89=1;_e8a=1;_e8b=true;break;case "lastn":_e89=(1-n);_e8a=0;_e8b=true;break;case "nextn":_e89=0;_e8a=(n-1);_e8b=true;break;default:return;}this.firstPeriod=_e89;this.lastPeriod=_e8a;this.isFutureIncluded=_e8b;},overLastUp:function(){_4.addClass(this.lastUp,"hover");},outLastUp:function(){_4.removeClass(this.lastUp,"hover");},overLastDown:function(){_4.addClass(this.lastDown,"hover");},outLastDown:function(){_4.removeClass(this.lastDown,"hover");},overNextUp:function(){_4.addClass(this.nextUp,"hover");},outNextUp:function(){_4.removeClass(this.nextUp,"hover");},overNextDown:function(){_4.addClass(this.nextDown,"hover");},outNextDown:function(){_4.removeClass(this.nextDown,"hover");},spin:function(elem,up){var _e8e=parseInt(elem.value,10)+(up?1:-1);if(_e8e<1){return;}elem.value=_e8e;this.onTyping(elem);},upLast:function(){this.spin(this.inLastn,true);},downLast:function(){this.spin(this.inLastn,false);},upNext:function(){this.spin(this.inNextn,true);},downNext:function(){this.spin(this.inNextn,false);},_localize:function(){tableau.util.localizeDojoLabeledControls([[this.bYear,"RelDateFilterYears"],[this.bQuarter,"RelDateFilterQuarters"],[this.bMonth,"RelDateFilterMonths"],[this.bWeek,"RelDateFilterWeeks"],[this.bDay,"RelDateFilterDays"],[this.bHour,"RelDateFilterHours"],[this.bMinute,"RelDateFilterMinutes"]]);}});}if(!_4._hasResource["tableau.base.widget.RelativeDatePickFilter"]){_4._hasResource["tableau.base.widget.RelativeDatePickFilter"]=true;_4.provide("tableau.base.widget.RelativeDatePickFilter");_4.declare("tableau.base.widget.RelativeDatePickFilter",[_5._Widget,_5._Contained,_5._Templated],{templateString:"<div class=\"RelativeDatePickFilter\"\r\n    ><div dojoAttachPoint=\"domBox\" class=\"RelativeDatePickFilterBox\"\r\n        ><div class=\"TitleAndControls\" dojoAttachPoint=\"domControls\"\r\n            ><div class=\"FilterTitle\" dojoAttachPoint=\"domTitleBar\"\r\n                ><img dojoAttachPoint=\"domTitleImage\"/></div\r\n            ><div dojoType=\"dijit.form.Button\" class=\"RDFButton RDFMenuButton\" name=\"type\" dojoAttachPoint=\"menuButton\"\r\n                  dojoAttachEvent=\"onClick:doMenu\" iconClass=\"wcIconContextMenu\"></div\r\n            ><div class=\"PicklistContentDiv\" dojoAttachPoint=\"domPicker\"></div\r\n        ></div\r\n    ></div\r\n></div>\r\n",widgetsInTemplate:true,field:"",stateId:0,rid:0,timestamp:0,currentRange:null,domTitleBar:null,domPicker:null,classButtonR:"RDFButtonR",classButtonHide:"RDFButtonHide",postCreate:function(){var _e8f,_e90=0;this._connections=[];this.getSID=_4.hitch(this,function(){return this.stateId;});this.timestamp=new Date().getTime();this.initFromState();_e8f=function(_e91,hide,that){if(hide){_4.addClass(_e91.domNode,that.classButtonHide);}else{_e90+=1;_4.addClass(_e91.domNode,that.classButtonR+_e90);}};_e8f(this.menuButton,this.shouldHideContextMenu(),this);},shouldHideContextMenu:function(){return this.hideEmptyTitlebar()||this.getContextMenuCommands().commandItems.length===0;},destroy:function(_e94){_4.forEach(this._connections,_4.disconnect);this.domPicker.innerHTML="";this.inherited(arguments);},getMetrics:function(){var _e95=_4.marginBox(this.domNode);return {fixed:{w:0,h:_e95.h}};},initFromState:function(){var i,len,div,_e99=tab.RelativeDatePickFilter.pickerDurations,_e9a=tab.RelativeDatePickFilter.pickerStringsShort,_e9b;this.currentRange=this.oFilter.table;this.currentAbbrev=this.toAbbrev(this.currentRange);this.domPicker.innerHTML="";_e9b=tableau.format.formatColumnDisplayName(this.oFilter);_4.attr(this.domTitleBar,"title",_e9b);if(this.hideEmptyTitlebar()){_4.style(this.domTitleImage,"display","none");_4.marginBox(this.domTitleBar,{h:0});}else{this.fetchTitleImage();}for(i=0,len=_e9a.length;i<len;i++){div=document.createElement("div");div.innerHTML=tableau.format.escapeHTML(_e9a[i]);_4.addClass(div,"PickLabel");this.domPicker.appendChild(div);this._connections.push(_4.connect(div,"onmouseover",this,"onMouseOver"));this._connections.push(_4.connect(div,"onmouseout",this,"onMouseOut"));this._connections.push(_4.connect(div,"onclick",_4.hitch(this,"onClick",i)));if(this.currentAbbrev===_e99[i]){_4.addClass(div,"Selected");this.currentDiv=div;}}this.layout();},fetchTitleImage:function(){++this.rid;this.domTitleImage.src=this.layoutSession.formatZoneURL("image/png",this.zid)+"&"+this.rid+"Z"+this.timestamp;},formatTuple:function(_e9c){return tableau.format.formatTupleDisplayName(_e9c,true,this.oFilter.role);},toAbbrev:function(_e9d){var n=_e9d.rangeN.toString(),_e9f=tab.RelativeDateFilterPeriodType,_ea0=tab.RelativeDateFilterRangeType,s="";switch(_e9d.rangeType){case _ea0.curr:s="0";break;case _ea0.lastn:s="-"+n;break;case _ea0.nextn:s=n;break;default:return "";}switch(_e9d.periodType){case _e9f.year:s+="y";break;case _e9f.quarter:s+="q";break;case _e9f.month:s+="m";break;case _e9f.week:s+="w";break;case _e9f.day:s+="d";break;case _e9f.hour:s+="h";break;default:return "";}return s;},onMouseOver:function(e){_4.addClass(e.target,"HoverActive");},onMouseOut:function(e){_4.removeClass(e.target,"HoverActive");},onClick:function(_ea4,e){var _ea6=tab.RelativeDatePickFilter.pickerDurationsInteger,_ea7=_ea6[_ea4];if(e.target!==this.currentDiv){if(this.currentDiv){_4.removeClass(this.currentDiv,"Selected");}_4.addClass(e.target,"Selected");tab.FilterClientCommands.doRelativeDateQuickFilter(this.session.get_sheetName(),this.field,tab.RelativeDateFilterPeriodType.day,tab.RelativeDateFilterRangeType.lastn,_ea7);}},hideEmptyTitlebar:function(){return (""===tableau.format.formatColumnDisplayName(this.oFilter));},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},setTitleImageSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},_adjustLabelPickWidth:function(_eaa){var _eab=Math.floor((_eaa-1)/tab.RelativeDatePickFilter.pickerDurations.length);_4.forEach(this.domPicker.childNodes,function(n){_4.style(n,"width",(_eab-3)+"px");});},layout:function(){var _ead,_eae,_eaf,_eb0;_4.removeClass(this.domNode,"RDPFHorizontal");_ead=_4.marginBox(this.domPicker);if(!_ead||!_ead.w||_ead.w===0){return;}_eae=_4.marginBox(this.domTitleImage);if(this.titleH>0){_eae.h=this.titleH;_4.marginBox(this.domTitleBar,{h:_eae.h});}if(this.titleW>0){_eae.w=this.titleW;_4.marginBox(this.domTitleBar,{w:_eae.w});}_eaf=_4.contentBox(this.domNode);_eb0=_eaf.w;if(!this.hideEmptyTitlebar()&&this.titleW>0){_4.addClass(this.domNode,"RDPFHorizontal");_4.style(this.domTitleBar,"float","left");_4.style(this.domPicker,"float","left");_eb0=_eaf.w-_eae.w;}else{_4.style(this.domTitleBar,"float","none");_4.style(this.domPicker,"float","none");}_4.contentBox(this.domPicker,{w:_eb0});this._adjustLabelPickWidth(_eb0);}});}if(!_4._hasResource["tableau.base.widget.FilterPanel"]){_4._hasResource["tableau.base.widget.FilterPanel"]=true;_4.provide("tableau.base.widget.FilterPanel");_4.declare("tableau.base.widget.FilterPanel",[_5.layout._LayoutWidget,_5._Templated],{templateString:"<div class=\"FilterPanel\" dojoAttachPoint=\"containerNode\" dojoAttachEvent=\"onmousedown:onMouseDown\">\r\n</div>\r\n",session:null,field:"",attributes:null,filter:null,format:{},width:null,constructor:function(){this._subscriptions=[];this._connections=[];},postCreate:function(){if(this.metricsOnly){return;}this._subscriptions.push(this.session.registerEventListener(tab.EventMap.refreshFilterModel,this,"onUpdateFilterState"));var zone=tab.ApplicationModel.get_instance().findZone(this.zid);_4.style(this.domNode,"backgroundColor",zone.get_dashboardModel().get_backgroundColor());},destroy:function(){_4.forEach(this._subscriptions,_4.unsubscribe);_4.forEach(this._connections,_4.disconnect);this.inherited(arguments);},makeQuantitativeFilter:function(_eb2){return new tableau.base.widget.QuantitativeFilter(_eb2);},makeHierarchicalFilter:function(_eb3){return new tableau.base.widget.HierarchicalFilter(_eb3);},makeCategoricalFilter:function(_eb4){return new tableau.base.widget.CategoricalFilter(_eb4);},makeRelativeDateFilter:function(_eb5){return new tableau.base.widget.RelativeDateFilter(_eb5);},makeRelativeDatePickFilter:function(_eb6){return new tableau.base.widget.RelativeDatePickFilter(_eb6);},_setupEventHandlers:function(){this._connections.push(_4.connect(this.filter.domNode,"onmouseover",this,"showControls"));this._connections.push(_4.connect(this.filter.domNode,"onmouseout",this,"onMouseOut"));},onUpdateFilterState:function(_eb7){if(this.field!==tableau.format.formatQualifiedName(_eb7.name)){return;}if(this.filter&&((this.filter.oFilter.type!==_eb7.type)||(_eb7.type==="RD"&&_eb7.showRelDatePick!==this.filter.oFilter.showRelDatePick)||(_eb7.type==="C"&&_eb7.mode!==this.filter.oFilter.mode))){this.filter.destroy();this.filter=null;}if(!this.filter){var _eb8={field:this.field,oFilter:_eb7,layoutSession:this.layoutSession,zid:this.zid,format:this.format,attributes:this.attributes||{},requestSetAttributes:this.requestSetAttributes,titleH:this.titleH,titleW:this.titleW,width:this.width,getContextMenuCommands:_.bind(this.getContextMenuCommands,this),showContextMenu:_.bind(this.showContextMenu,this)};if(this.session){_eb8.session=this.session;}else{_eb8.metricsOnly=true;}if(_eb7.type==="Q"){this.filter=this.makeQuantitativeFilter(_eb8);}else{if(_eb7.type==="H"){this.filter=this.makeHierarchicalFilter(_eb8);}else{if(_eb7.type==="C"){this.filter=this.makeCategoricalFilter(_eb8);}else{if(_eb7.type==="RD"&&_eb7.showRelDatePick===true){this.filter=this.makeRelativeDatePickFilter(_eb8);}else{if(_eb7.type==="RD"){this.filter=this.makeRelativeDateFilter(_eb8);}else{_4.style(this.domNode,"display","none");return;}}}}}this.addChild(this.filter);this._setupEventHandlers();if(!_eb8.metricsOnly){_4.marginBox(this.filter.domNode,_4.contentBox(this.domNode));}this.filter.layout();}else{this.filter.attributes=this.attributes||{};this.filter.oFilter=_eb7;this.filter.setTitleImageSize(this.titleH,this.titleW);this.filter.initFromState();}this.hideControls();},showControls:function(){_4.removeClass(this.filter.domControls,"HideControls");var data={over:true,node:this.domNode};this.session.fireEvent(tab.EventMap.hoverChanged,data);},hideControls:function(){if(this.session){var data={over:false,node:this.domNode};this.session.fireEvent(tab.EventMap.hoverChanged,data);}_4.addClass(this.filter.domControls,"HideControls");},onMouseOut:function(e){var c=_4.coords(this.filter.domNode,true);if(c.x>e.pageX||(c.x+c.w)<=e.pageX||c.y>e.pageY||(c.y+c.h)<=e.pageY){this.hideControls();}},onMouseDown:function(e){},setTitleImageSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},layout:function(){if(this.filter){var _ec0=(_4.contentBox(this.domNode).w===_4.marginBox(this.filter.domNode).w&&_4.contentBox(this.domNode).h===_4.marginBox(this.filter.domNode).h);_4.marginBox(this.filter.domNode,_4.contentBox(this.domNode));if(!_ec0){this.filter.setTitleImageSize(this.titleH,this.titleW);this.filter.layout();}}},getMetrics:function(_ec1){this.onUpdateFilterState(_ec1);if(!this.filter){return {fixed:{w:0,h:0},item:{w:0,h:0}};}else{return this.filter.getMetrics();}},getContextMenuCommands:function(){var zone=tab.ApplicationModel.get_instance().findZone(this.zid);if(zone&&zone.get_model()&&zone.get_model().get_quickFilterCommands()){return zone.get_model().get_quickFilterCommands();}else{return {commandItems:[]};}},showContextMenu:function(_ec3){var _ec4=this.getContextMenuCommands(),_ec5=[];tab.MenuItem.newFromCommands(_ec5,_ec4,function(c){return function(){var cmd=tab.CommandSerializer.deserialize(c.command);tab.ServerCommands.executeServerCommand(cmd,"immediately");};});tab.MenuViewModel.createForMenu(new tab.Menu(_ec5),function(mi){mi.get_data()();}).show(new tab.ShowMenuOptions($(_ec3),false));}});(function(){var _ec9,_eca,_ecb=tabBootstrap.UIMetricType,_ecc=[{fixedType:_ecb.qfixed,sliderType:_ecb.qslider,readoutType:_ecb.qreadout,state:{field:"[DS].[QField]",caption:"",type:"Q",name:["DS","QField"],data:{min:{t:"r",v:0},max:{t:"r",v:1}},range:{min:{t:"r",v:0},max:{t:"r",v:1}},table:{included:"range",min:{t:"r",v:0},max:{t:"r",v:1}}}},{fixedType:_ecb.cfixed,itemType:_ecb.citem,state:{actual_size:1,field:"[DS].[CField]",caption:"",type:"C",name:["DS","CField"],table:{tuples:[{d:"Value",s:true,t:[{v:"Value",t:"s"}]}]}},attributes:{mode:"checklist"}},{fixedType:_ecb.cmdropdown,state:{field:"[DS].[CField]",caption:"",type:"C",name:["DS","CField"],table:{tuples:[{d:"Value",s:true,t:[{v:"Value",t:"s"}]}]}},attributes:{mode:"dropdown"}},{fixedType:_ecb.cmslider,state:{field:"[DS].[CField]",caption:"",type:"C",name:["DS","CField"],table:{tuples:[{d:"Value",s:true,t:[{v:"Value",t:"s"}]}]}},attributes:{mode:"slider"}},{fixedType:_ecb.cmpattern,state:{field:"[DS].[CField]",caption:"",type:"C",name:["DS","CField"],pattern:"testpattern"}},{fixedType:_ecb.hfixed,itemType:_ecb.hitem,state:{field:"[DS].[HField]",caption:"",type:"H",levels:[0],name:["DS","HField"],table:[{table:{tuples:[{d:"Value",s:true,t:[{v:"Value",t:"s"}]}]}}]}}];function measureMetric(_ecd,_ece,_ecf){var _ed0,_ed1,_ed2;_ed1=new tableau.base.widget.FilterPanel({field:_ece.state.field,metricsOnly:true,attributes:_ece.attributes});_ed0=_ed1.domNode;try{_4.style(_ed0,{position:"absolute",cssFloat:"left",left:"-10000px",width:"80px"});_ecd.appendChild(_ed0);_ed2=_ed1.getMetrics(_ece.state);if(_ece.fixedType){_ecf[_ece.fixedType]=_ed2.fixed;}if(_ece.itemType){_ecf[_ece.itemType]=_ed2.item;}if(_ece.sliderType){_ecf[_ece.sliderType]=_ed2.slider;}if(_ece.readoutType){_ecf[_ece.readoutType]=_ed2.readout;}}finally{if(_ed0){_ecd.removeChild(_ed0);}_ed0=null;if(_ed1){_ed1.destroyRecursive();}_ed1=null;}};function lazyMeasureAndReportMetrics(_ed3,_ed4){var i=0,_ed6=_ecc.length,_ed7=new tabBootstrap.LayoutMetrics(),_ed8;if(_ec9){_ed4(_ec9);return;}if(_eca){clearTimeout(_eca);_eca=null;}_ed8=function(){if(i<_ed6){tableau.base.widget.FilterPanel.measuringMetrics=true;measureMetric(_ed3,_ecc[i],_ed7);i++;_eca=setTimeout(_ed8,0);}else{tableau.base.widget.FilterPanel.measuringMetrics=false;_ec9=_ed7;_ed4(_ed7);}};_eca=setTimeout(_ed8,3000);};tableau.base.widget.FilterPanel.lazyMeasureAndReportMetrics=lazyMeasureAndReportMetrics;}());}if(!_4._hasResource["dijit.layout.SplitContainer"]){_4._hasResource["dijit.layout.SplitContainer"]=true;_4.provide("dijit.layout.SplitContainer");_4.declare("dijit.layout.SplitContainer",_5.layout._LayoutWidget,{constructor:function(){_4.deprecated("dijit.layout.SplitContainer is deprecated","use BorderContainer with splitter instead",2);},activeSizing:false,sizerWidth:7,orientation:"horizontal",persist:true,baseClass:"dijitSplitContainer",postMixInProperties:function(){this.inherited("postMixInProperties",arguments);this.isHorizontal=(this.orientation=="horizontal");},postCreate:function(){this.inherited(arguments);this.sizers=[];if(_4.isMozilla){this.domNode.style.overflow="-moz-scrollbars-none";}if(typeof this.sizerWidth=="object"){try{this.sizerWidth=parseInt(this.sizerWidth.toString());}catch(e){this.sizerWidth=7;}}var _ed9=this.virtualSizer=_4.doc.createElement("div");_ed9.style.position="relative";_ed9.style.zIndex=10;_ed9.className=this.isHorizontal?"dijitSplitContainerVirtualSizerH":"dijitSplitContainerVirtualSizerV";this.domNode.appendChild(_ed9);_4.setSelectable(_ed9,false);},destroy:function(){delete this.virtualSizer;_4.forEach(this._ownconnects,_4.disconnect);this.inherited(arguments);},startup:function(){if(this._started){return;}_4.forEach(this.getChildren(),function(_eda,i,_edc){this._setupChild(_eda);if(i<_edc.length-1){this._addSizer();}},this);if(this.persist){this._restoreState();}this.inherited(arguments);},_setupChild:function(_edd){this.inherited(arguments);_edd.domNode.style.position="absolute";_4.addClass(_edd.domNode,"dijitSplitPane");},_addSizer:function(){var i=this.sizers.length;var _edf=this.sizers[i]=_4.doc.createElement("div");this.domNode.appendChild(_edf);_edf.className=this.isHorizontal?"dijitSplitContainerSizerH":"dijitSplitContainerSizerV";var _ee0=_4.doc.createElement("div");_ee0.className="thumb";_edf.appendChild(_ee0);var self=this;var _ee2=(function(){var _ee3=i;return function(e){self.beginSizing(e,_ee3);};})();this.connect(_edf,"onmousedown",_ee2);_4.setSelectable(_edf,false);},removeChild:function(_ee5){if(this.sizers.length){var i=_4.indexOf(this.getChildren(),_ee5);if(i!=-1){if(i==this.sizers.length){i--;}_4._destroyElement(this.sizers[i]);this.sizers.splice(i,1);}}this.inherited(arguments);if(this._started){this.layout();}},addChild:function(_ee7,_ee8){this.inherited(arguments);if(this._started){var _ee9=this.getChildren();if(_ee9.length>1){this._addSizer();}this.layout();}},layout:function(){this.paneWidth=this._contentBox.w;this.paneHeight=this._contentBox.h;var _eea=this.getChildren();if(!_eea.length){return;}var _eeb=this.isHorizontal?this.paneWidth:this.paneHeight;if(_eea.length>1){_eeb-=this.sizerWidth*(_eea.length-1);}var _eec=0;_4.forEach(_eea,function(_eed){_eec+=_eed.sizeShare;});var _eee=_eeb/_eec;var _eef=0;_4.forEach(_eea.slice(0,_eea.length-1),function(_ef0){var size=Math.round(_eee*_ef0.sizeShare);_ef0.sizeActual=size;_eef+=size;});_eea[_eea.length-1].sizeActual=_eeb-_eef;this._checkSizes();var pos=0;var size=_eea[0].sizeActual;this._movePanel(_eea[0],pos,size);_eea[0].position=pos;pos+=size;if(!this.sizers){return;}_4.some(_eea.slice(1),function(_ef4,i){if(!this.sizers[i]){return true;}this._moveSlider(this.sizers[i],pos,this.sizerWidth);this.sizers[i].position=pos;pos+=this.sizerWidth;size=_ef4.sizeActual;this._movePanel(_ef4,pos,size);_ef4.position=pos;pos+=size;},this);},_movePanel:function(_ef6,pos,size){if(this.isHorizontal){_ef6.domNode.style.left=pos+"px";_ef6.domNode.style.top=0;var box={w:size,h:this.paneHeight};if(_ef6.resize){_ef6.resize(box);}else{_4.marginBox(_ef6.domNode,box);}}else{_ef6.domNode.style.left=0;_ef6.domNode.style.top=pos+"px";var box={w:this.paneWidth,h:size};if(_ef6.resize){_ef6.resize(box);}else{_4.marginBox(_ef6.domNode,box);}}},_moveSlider:function(_efa,pos,size){if(this.isHorizontal){_efa.style.left=pos+"px";_efa.style.top=0;_4.marginBox(_efa,{w:size,h:this.paneHeight});}else{_efa.style.left=0;_efa.style.top=pos+"px";_4.marginBox(_efa,{w:this.paneWidth,h:size});}},_growPane:function(_efd,pane){if(_efd>0){if(pane.sizeActual>pane.sizeMin){if((pane.sizeActual-pane.sizeMin)>_efd){pane.sizeActual=pane.sizeActual-_efd;_efd=0;}else{_efd-=pane.sizeActual-pane.sizeMin;pane.sizeActual=pane.sizeMin;}}}return _efd;},_checkSizes:function(){var _eff=0;var _f00=0;var _f01=this.getChildren();_4.forEach(_f01,function(_f02){_f00+=_f02.sizeActual;_eff+=_f02.sizeMin;});if(_eff<=_f00){var _f03=0;_4.forEach(_f01,function(_f04){if(_f04.sizeActual<_f04.sizeMin){_f03+=_f04.sizeMin-_f04.sizeActual;_f04.sizeActual=_f04.sizeMin;}});if(_f03>0){var list=this.isDraggingLeft?_f01.reverse():_f01;_4.forEach(list,function(_f06){_f03=this._growPane(_f03,_f06);},this);}}else{_4.forEach(_f01,function(_f07){_f07.sizeActual=Math.round(_f00*(_f07.sizeMin/_eff));});}},beginSizing:function(e,i){var _f0a=this.getChildren();this.paneBefore=_f0a[i];this.paneAfter=_f0a[i+1];this.isSizing=true;this.sizingSplitter=this.sizers[i];if(!this.cover){this.cover=_4.doc.createElement("div");this.domNode.appendChild(this.cover);var s=this.cover.style;s.position="absolute";s.zIndex=1;s.top=0;s.left=0;s.width="100%";s.height="100%";}else{this.cover.style.zIndex=1;}this.sizingSplitter.style.zIndex=2;this.originPos=_4.coords(_f0a[0].domNode,true);if(this.isHorizontal){var _f0c=e.layerX||e.offsetX||0;var _f0d=e.pageX;this.originPos=this.originPos.x;}else{var _f0c=e.layerY||e.offsetY||0;var _f0d=e.pageY;this.originPos=this.originPos.y;}this.startPoint=this.lastPoint=_f0d;this.screenToClientOffset=_f0d-_f0c;this.dragOffset=this.lastPoint-this.paneBefore.sizeActual-this.originPos-this.paneBefore.position;if(!this.activeSizing){this._showSizingLine();}this._ownconnects=[];this._ownconnects.push(_4.connect(_4.doc.documentElement,"onmousemove",this,"changeSizing"));this._ownconnects.push(_4.connect(_4.doc.documentElement,"onmouseup",this,"endSizing"));_4.stopEvent(e);},changeSizing:function(e){if(!this.isSizing){return;}this.lastPoint=this.isHorizontal?e.pageX:e.pageY;this.movePoint();if(this.activeSizing){this._updateSize();}else{this._moveSizingLine();}_4.stopEvent(e);},endSizing:function(e){if(!this.isSizing){return;}if(this.cover){this.cover.style.zIndex=-1;}if(!this.activeSizing){this._hideSizingLine();}this._updateSize();this.isSizing=false;if(this.persist){this._saveState(this);}_4.forEach(this._ownconnects,_4.disconnect);},movePoint:function(){var p=this.lastPoint-this.screenToClientOffset;var a=p-this.dragOffset;a=this.legaliseSplitPoint(a);p=a+this.dragOffset;this.lastPoint=p+this.screenToClientOffset;},legaliseSplitPoint:function(a){a+=this.sizingSplitter.position;this.isDraggingLeft=!!(a>0);if(!this.activeSizing){var min=this.paneBefore.position+this.paneBefore.sizeMin;if(a<min){a=min;}var max=this.paneAfter.position+(this.paneAfter.sizeActual-(this.sizerWidth+this.paneAfter.sizeMin));if(a>max){a=max;}}a-=this.sizingSplitter.position;this._checkSizes();return a;},_updateSize:function(){var pos=this.lastPoint-this.dragOffset-this.originPos;var _f16=this.paneBefore.position;var _f17=this.paneAfter.position+this.paneAfter.sizeActual;this.paneBefore.sizeActual=pos-_f16;this.paneAfter.position=pos+this.sizerWidth;this.paneAfter.sizeActual=_f17-this.paneAfter.position;_4.forEach(this.getChildren(),function(_f18){_f18.sizeShare=_f18.sizeActual;});if(this._started){this.layout();}},_showSizingLine:function(){this._moveSizingLine();_4.marginBox(this.virtualSizer,this.isHorizontal?{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth});this.virtualSizer.style.display="block";},_hideSizingLine:function(){this.virtualSizer.style.display="none";},_moveSizingLine:function(){var pos=(this.lastPoint-this.startPoint)+this.sizingSplitter.position;_4.style(this.virtualSizer,(this.isHorizontal?"left":"top"),pos+"px");},_getCookieName:function(i){return this.id+"_"+i;},_restoreState:function(){_4.forEach(this.getChildren(),function(_f1b,i){var _f1d=this._getCookieName(i);var _f1e=_4.cookie(_f1d);if(_f1e){var pos=parseInt(_f1e);if(typeof pos=="number"){_f1b.sizeShare=pos;}}},this);},_saveState:function(){if(!this.persist){return;}_4.forEach(this.getChildren(),function(_f20,i){_4.cookie(this._getCookieName(i),_f20.sizeShare,{expires:365});},this);}});_4.extend(_5._Widget,{sizeMin:10,sizeShare:10});}if(!_4._hasResource["dojox.form._FormSelectWidget"]){_4._hasResource["dojox.form._FormSelectWidget"]=true;_4.provide("dojox.form._FormSelectWidget");_4.declare("dojox.form._FormSelectWidget",_5.form._FormValueWidget,{multiple:"",_multiValue:false,options:null,getOptions:function(_f22){var _f23=_f22,opts=this.options||[],l=opts.length;if(_f23===undefined){return opts;}if(_4.isArray(_f23)){return _4.map(_f23,"return this.getOptions(item);",this);}if(_4.isObject(_f22)){if(!_4.some(this.options,function(o,idx){if(o===_f23||(o.value&&o.value===_f23.value)){_f23=idx;return true;}return false;})){_f23=-1;}}if(typeof _f23=="string"){for(var i=0;i<l;i++){if(opts[i].value===_f23){_f23=i;break;}}}if(typeof _f23=="number"&&_f23>=0&&_f23<l){return this.options[_f23];}return null;},addOption:function(_f29){if(!_4.isArray(_f29)){_f29=[_f29];}_4.forEach(_f29,function(i){if(i&&_4.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_f2b){if(!_4.isArray(_f2b)){_f2b=[_f2b];}var _f2c=this.getOptions(_f2b);_4.forEach(_f2c,function(i){this.options=_4.filter(this.options,function(node,idx){return (node.value!==i.value);});this._removeOptionItem(i);},this);this._loadChildren();},updateOption:function(_f30){if(!_4.isArray(_f30)){_f30=[_f30];}_4.forEach(_f30,function(i){var _f32=this.getOptions(i),k;if(_f32){for(k in i){_f32[k]=i[k];}}},this);this._loadChildren();},_setValueAttr:function(_f34,_f35){var opts=this.getOptions()||[];if(!_4.isArray(_f34)){_f34=[_f34];}_4.forEach(_f34,function(i,idx){if(!_4.isObject(i)){i=i+"";}if(typeof i==="string"){_f34[idx]=_4.filter(opts,function(node){return node.value===i;})[0]||{value:"",label:""};}},this);_f34=_4.filter(_f34,function(i){return i&&i.value;});if(!this._multiValue&&(!_f34[0]||!_f34[0].value)&&opts.length){_f34[0]=opts[0];}_4.forEach(opts,function(i){i.selected=_4.some(_f34,function(v){return v.value===i.value;});});var val=_4.map(_f34,function(i){return i.value;}),disp=_4.map(_f34,function(i){return i.label;});this.value=this._multiValue?val:val[0];this._setDisplay(this._multiValue?disp:disp[0]);this._updateSelection();this._handleOnChange(this.value,_f35);},_getValueDeprecated:false,getValue:function(){return this._lastValue;},undo:function(){this._setValueAttr(this._lastValueReported,false);},_loadChildren:function(){_4.forEach(this._getChildren(),function(_f41){_f41.destroyRecursive();});_4.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this.value=this._getValueFromOpts();var val=this.value;if(!_4.isArray(val)){val=[val];}if(val&&val[0]){_4.forEach(this._getChildren(),function(_f43){var _f44=_4.some(val,function(v){return _f43.option&&(v===_f43.option.value);});_4.toggleClass(_f43.domNode,this.baseClass+"SelectedOption",_f44);_5.setWaiState(_f43.domNode,"selected",_f44);},this);}this._handleOnChange(this.value);},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this._multiValue&&opts.length){var opt=_4.filter(opts,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{opts[0].selected=true;return opts[0].value;}}else{if(this._multiValue){return _4.map(_4.filter(opts,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},postMixInProperties:function(){this._multiValue=(this.multiple.toLowerCase()==="true");this.inherited(arguments);},_fillContent:function(){var opts=this.options;if(!opts){opts=this.options=this.srcNodeRef?_4.query(">",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:node.getAttribute("value"),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};},this):[];}if(!this.value){this.value=this._getValueFromOpts();}else{if(this._multiValue&&typeof this.value=="string"){this.value=this.value.split(",");}}},postCreate:function(){_4.setSelectable(this.focusNode,false);this.inherited(arguments);this.connect(this,"onChange","_updateSelection");this.connect(this,"startup","_loadChildren");this._setValueAttr(this.value,null);},_addOptionItem:function(_f4d){},_removeOptionItem:function(_f4e){},_setDisplay:function(_f4f){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions(this.attr("value"));}});}if(!_4._hasResource["dojox.form._HasDropDown"]){_4._hasResource["dojox.form._HasDropDown"]=true;_4.provide("dojox.form._HasDropDown");_4.declare("dojox.form._HasDropDown",null,{dropDownNode:null,popupStateNode:null,aroundNode:null,dropDown:null,autoWidth:true,popupExtraClass:"",_stopClickEvents:true,_onMenuMouseup:function(e){},_onDropDownMouse:function(e){if(e.type=="click"&&!this._seenKeydown){return;}this._seenKeydown=false;if(e.type=="mousedown"){this._docHandler=this.connect(_4.doc,"onmouseup","_onDropDownMouseup");}if(this.disabled||this.readOnly){return;}if(this._stopClickEvents){_4.stopEvent(e);}this.toggleDropDown();if(e.type=="click"||e.type=="keypress"){this._onDropDownMouseup();}},_onDropDownMouseup:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _f53=this.dropDown,_f54=false;if(e&&this._opened){var t=e.target;while(t&&!_f54){if(_4.hasClass(t,"dijitPopup")){_f54=true;}else{t=t.parentNode;}}if(_f54){this._onMenuMouseup(e);return;}}if(this._opened&&_f53.focus){window.setTimeout(_4.hitch(_f53,"focus"),1);}else{_5.focus(this.focusNode);}},_setupDropdown:function(){this.dropDownNode=this.dropDownNode||this.focusNode||this.domNode;this.popupStateNode=this.popupStateNode||this.focusNode||this.dropDownNode;this.aroundNode=this.aroundNode||this.domNode;this.connect(this.dropDownNode,"onmousedown","_onDropDownMouse");this.connect(this.dropDownNode,"onclick","_onDropDownMouse");this.connect(this.dropDownNode,"onkeydown","_onDropDownKeydown");this.connect(this.dropDownNode,"onblur","_onDropDownBlur");this.connect(this.dropDownNode,"onkeypress","_onKey");if(this._setStateClass){this.connect(this,"openDropDown","_setStateClass");this.connect(this,"closeDropDown","_setStateClass");}},postCreate:function(){this._setupDropdown();this.inherited("postCreate",arguments);},startup:function(){_5.popup.prepare(this.dropDown.domNode);this.inherited("startup",arguments);},destroyDescendants:function(){if(this.dropDown){this.dropDown.destroyRecursive();delete this.dropDown;}this.inherited("destroyDescendants",arguments);},_onDropDownKeydown:function(e){this._seenKeydown=true;},_onKeyPress:function(e){if(this._opened&&e.charOrCode==_4.keys.ESCAPE&&!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.toggleDropDown();_4.stopEvent(e);return;}this.inherited(arguments);},_onDropDownBlur:function(e){this._seenKeydown=false;},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){return;}}if(d&&this._opened&&e.keyCode==_4.keys.ESCAPE){this.toggleDropDown();return;}if(e.keyCode==_4.keys.DOWN_ARROW){this._onDropDownMouse(e);}},_onBlur:function(){this.closeDropDown();this.inherited("_onBlur",arguments);},isLoaded:function(){return true;},loadDropDown:function(_f5b){_f5b();},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}this.focus();var _f5c=this.dropDown;if(!_f5c){return;}if(!this._opened){if(!this.isLoaded()){this.loadDropDown(_4.hitch(this,"openDropDown"));return;}else{this.openDropDown();}}else{this.closeDropDown();}},openDropDown:function(){var _f5d=this.dropDown;var _f5e=_f5d.domNode.style.width;var self=this;var _f60=_5.popup.open({parent:this,popup:_f5d,around:this.aroundNode,extraClass:this.popupExtraClass,orient:this.isLeftToRight()?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"},onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_f5d.domNode.style.width=_f5e;_4.attr(self.popupStateNode,"popupActive",false);_4.removeClass(self.popupStateNode,"dojoxHasDropDownOpen");self._opened=false;self.state="";}});if(this.autoWidth&&this.domNode.offsetWidth>_f5d.domNode.offsetWidth){var _f61=null;if(!this.isLeftToRight()){_f61=_f5d.domNode.parentNode;var _f62=_f61.offsetLeft+_f61.offsetWidth;}if(_f5d.resize){_f5d.resize({w:this.domNode.offsetWidth});}else{_4.marginBox(_f5d.domNode,{w:this.domNode.offsetWidth});}if(_f61){_f61.style.left=_f62-this.domNode.offsetWidth+"px";}}_4.attr(this.popupStateNode,"popupActive","true");_4.addClass(self.popupStateNode,"dojoxHasDropDownOpen");this._opened=true;this.state="Opened";if(_f5d.focus){_f5d.focus();}return _f60;},closeDropDown:function(_f63){if(this._opened){_5.popup.close(this.dropDown);if(_f63){this.focus();}this._opened=false;this.state="";}}});}if(!_4._hasResource["dojox.form.DropDownSelect"]){_4._hasResource["dojox.form.DropDownSelect"]=true;_4.provide("dojox.form.DropDownSelect");_4.declare("dojox.form.DropDownSelect",[_6.form._FormSelectWidget,_6.form._HasDropDown],{baseClass:"dojoxDropDownSelect",templateString:"<span class=\"dijit dijitReset dijitLeft dijitInline\"\r\n\tdojoAttachPoint=\"dropDownNode\"\r\n\tdojoAttachEvent=\"onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse\"\r\n\t><span class='dijitReset dijitRight dijitInline'\r\n\t\t><span class='dijitReset dijitInline dijitButtonNode'\r\n\t\t\t><table class=\"dojoxDropDownSelectTable\" dojoAttachPoint=\"tableNode\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tbody><tr\r\n\t\t\t\t><td class=\"dojoxDropDownSelectTableContent\" \r\n\t\t\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"  dojoAttachPoint=\"containerNode,popupStateNode\" id=\"${id}_label\"></span\r\n\t\t\t\t></td><td class=\"dojoxDropDownSelectTableButton\" \r\n\t\t\t\t\t><button class=\"dijitReset dijitStretch dijitButtonContents\" type=\"button\" name=\"${name}\"\r\n\t\t\t\t\t\tdojoAttachPoint=\"focusNode,titleNode\" waiRole=\"button\" waiState=\"haspopup-true,labelledby-${id}_label\"\r\n\t\t\t\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\">&thinsp;</span\r\n\t\t\t\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\" waiRole=\"presentation\">&#9660;</span\r\n\t\t\t\t\t></button\r\n\t\t\t\t></td\r\n\t\t\t></tr></tbody></table\r\n\t\t></span\r\n\t></span\r\n></span>\r\n",attributeMap:_4.mixin(_4.clone(_6.form._FormSelectWidget.prototype.attributeMap),{style:"tableNode"}),required:false,state:"",tooltipPosition:[],emptyLabel:"",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value){var si=this.srcNodeRef.selectedIndex;this.value=this.options[si!=-1?si:0].value;}this.dropDown=new _5.Menu();_4.addClass(this.dropDown.domNode,this.baseClass+"Menu");},_getMenuItemForOption:function(_f65){if(!_f65.value){return new _5.MenuSeparator();}else{var _f66=_4.hitch(this,"_setValueAttr",_f65);return new _5.MenuItem({option:_f65,label:_f65.label,onClick:_f66,disabled:_f65.disabled||false});}},_addOptionItem:function(_f67){this.dropDown.addChild(this._getMenuItemForOption(_f67));},_getChildren:function(){return this.dropDown.getChildren();},_loadChildren:function(){this.inherited(arguments);var len=this.options.length;this._isLoaded=false;this._childrenLoaded=true;if(!this._iReadOnly){this.attr("readOnly",(len===1));delete this._iReadOnly;}if(!this._iDisabled){this.attr("disabled",(len===0));delete this._iDisabled;}this._setValueAttr(this.value);},_setDisplay:function(_f69){this.containerNode.innerHTML="<span class=\" "+this.baseClass+"Label\">"+(_f69||this.emptyLabel||"&nbsp;")+"</span>";this._layoutHack();},validate:function(_f6a){var _f6b=this.isValid(_f6a);this.state=_f6b?"":"Error";this._setStateClass();_5.setWaiState(this.focusNode,"invalid",_f6b?"false":"true");var _f6c=_f6b?"":this._missingMsg;if(this._message!==_f6c){this._message=_f6c;_5.hideTooltip(this.domNode);if(_f6c){_5.showTooltip(_f6c,this.domNode,this.tooltipPosition);}}return _f6b;},isValid:function(_f6d){return (!this.required||!(/^\s*$/.test(this.value)));},reset:function(){this.inherited(arguments);_5.hideTooltip(this.domNode);this.state="";this._setStateClass();delete this._message;},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=_4.i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);if(_4.attr(this.srcNodeRef,"disabled")){this.attr("disabled",true);}},startup:function(){if(this._started){return;}if(!this.dropDown){var _f6e=_4.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=_5.byNode(_f6e);delete this.dropDownContainer;}this.inherited(arguments);},_onMenuMouseup:function(e){var _f70=this.dropDown,t=e.target;if(_f70.onItemClick){var _f72;while(t&&!(_f72=_5.byNode(t))){t=t.parentNode;}if(_f72&&_f72.onClick&&_f72.getParent){_f72.getParent().onItemClick(_f72,e);}}},isLoaded:function(){return this._isLoaded;},loadDropDown:function(_f73){this._loadChildren();this._isLoaded=true;_f73();},_setReadOnlyAttr:function(_f74){this._iReadOnly=_f74;if(!_f74&&this._childrenLoaded&&this.options.length===1){return;}this.readOnly=_f74;},_setDisabledAttr:function(_f75){this._iDisabled=_f75;if(!_f75&&this._childrenLoaded&&this.options.length===0){return;}this.inherited(arguments);}});}if(!_4._hasResource["tableau.base.widget.ui.iDropDownSelect"]){_4._hasResource["tableau.base.widget.ui.iDropDownSelect"]=true;_4.provide("tableau.base.widget.ui.iDropDownSelect");_4.declare("tableau.base.widget.ui.iDropDownSelect",[_6.form.DropDownSelect],{_getMenuItemForOption:function(_f76){if(!_f76.value){return new _5.MenuSeparator();}else{var _f77=_4.hitch(this,"_setValueAttr",_f76);return new tableau.base.widget.ui.iMenuItem({option:_f76,label:_f76.label,onClick:_f77,disabled:_f76.disabled||false});}}});}if(!_4._hasResource["tableau.base.widget.CurrentPagePanel"]){_4._hasResource["tableau.base.widget.CurrentPagePanel"]=true;_4.provide("tableau.base.widget.CurrentPagePanel");_4.declare("tableau.base.widget.CurrentPagePanel",[_5.layout._LayoutWidget,_5._Templated],{baseClass:"currentPagePanel",templateString:"<div dojoAttachPoint=containerNode baseClass=\"currentPagePanel\" dojoAttachEvent=\"onmouseover:showControls,onmouseout:hideControls\">\r\n   <div dojoAttachPoint=\"_titlePane\" style=\"border:0; float:left;\">\r\n      <img dojoAttachPoint=\"domTitleImage\" dojoAttachEvent=\"onload:setTitleSize,onerror:hideImage\"/>\r\n   </div>\r\n   <div dojoType=\"dijit.layout.SplitContainer\" persist=\"false\" dojoAttachPoint=\"innerWrapper\" orientation=\"${cpOrientation}\" sizerWidth=\"0\" dragRestriction=\"true\" activeSizing=\"false\" style=\"float:left;\">\r\n    <div dojoType=\"dijit.layout.LayoutContainer\" sizeShare=\"24\" sizeMin=\"24\" style=\"display:${display_dropdown};\" dojoAttachPoint=\"buttonsContainer\" >\r\n      <button dojoAttachEvent=\"onClick:prevPage\" dojoType=\"dijit.form.Button\" layoutAlign=\"left\" style=\"margin:0; margin-right:2px;\" iconClass=\"dijitIcon cpLeftArrowBlack\" showLabel=\"false\" dojoAttachPoint=\"_leftBtn\"></button>\r\n      <select dojoAttachEvent=\"onChange:onSelection\" dojoType=\"tableau.base.widget.ui.iDropDownSelect\" dojoAttachPoint=\"_dropdown\" layoutAlign=\"client\" autoWidth=\"true\" minSize=\"100\" hasDownArrow=\"true\" popupExtraClass=\"${popupClass}\"></select>\r\n      <button dojoAttachEvent=\"onClick:nextPage\" dojoType=\"dijit.form.Button\" layoutAlign=\"right\" style=\"clear: left; margin:0; margin-left:2px;\" iconClass=\"dijitIcon cpRightArrowBlack\" showLabel=\"false\" dojoAttachPoint=\"_rightBtn\"></button>\r\n    </div>\r\n    <div dojoType=\"dijit.layout.ContentPane\" sizeShare=\"24\" sizeMin=\"24\" style=\"display:${display_slider}; padding:6px 0 0 0; border:0; overflow:hidden;\" dojoAttachPoint=\"sliderPane\">\r\n      <div dojoAttachEvent=\"onChange:onSliderChange\" dojoType=\"dijit.form.HorizontalSlider\" slideDuration=\"0\"\r\n      pageIncrement=\"1\" minimum=\"0\" maximum=\"${maximum}\" discreteValues=\"${discrete_values}\" intermediateChanges=\"false\" showButtons=\"false\"\r\n      dojoAttachPoint=\"_slider\"></div>\r\n      <div dojoAttachPoint=\"_horizontalRuleNode\"></div>\r\n    </div>\r\n  </div>\r\n  <div dojoType=\"dijit.layout.ContentPane\" dojoAttachPoint=\"_checkboxPane\" style=\"padding:0; height:16px; width:110px; display:${display_toggle}; border:0; position:relative; float:left;\">\r\n    <input dojoAttachEvent=\"onChange:onCheckboxChange\" dojoType=\"dijit.form.CheckBox\" dojoAttachPoint=\"_showHistoryCb\"/>\r\n  </div>\r\n</div>\r\n",widgetsInTemplate:true,rid:0,timestamp:0,_horizontalRule:null,_subscriptions:[],oldSize:null,BUTTONS_HEIGHT:26,ONLY_BUTTONS:24,SLIDER_HEIGHT:16,ONLY_SLIDER:15,TOGGLE_HEIGHT:16,TOGGLE_WIDTH_OFFSET:90,RULE_OFFSET:5,DOM_OFFSET:4,WIDGET_SPACE:8,SCROLL_PAGES:14,startup:function(){var _f78,_f79;this.containerNode=this.domNode;this.titleSize={w:0,h:0};_4.marginBox(this._titlePane,this.titleSize);this.inherited(arguments);this.innerWrapper.startup();this.buttonsContainer.startup();this.refreshLayout(this.pages,this.current_page);if(this.show_toggle){_f79=_4.doc.createElement("label");_f79.innerHTML=tableau.format.escapeHTML(tab.Strings.CurrentPagePanelShowHistory);_4.attr(_f79,"for",this._showHistoryCb.id);_4.place(_f79,this._checkboxPane.domNode);}this.refreshWidget(this.current_page);_f78=tab.ModelUtils.getModelByZoneId(tab.ApplicationModel.get_instance(),this.zid,"current-page");_f78.add_newPage(ss.Delegate.create(this,this.onPageChanged));},onPageChanged:function(_f7a){this.refreshLayout(_f7a.pageNames,_f7a.currentPage,_f7a.pageTrailOptions.state);},layout:function(){var _f7b,_f7c,_f7d,_f7e,_f7f,_f80,_f81,_f82,_f83=0,_f84=0,_f85=0,_f86;if(this.titleSize===undefined||(this.lTitle&&this.titleSize.w===0)){return;}_f81=_4.marginBox(this.containerNode);_f7e=_f81.w-this.DOM_OFFSET;_f7f=0;if(this.titleSize.w<_f81.w){if(_f81.h<this.getWidgetOffset()){this.cpOrientation="horizontal";}else{this.cpOrientation="vertical";}_f7e-=(this.titleSize.w);_f83=this.titleSize.w;}else{if(_f81.h-this.titleSize.h<this.getWidgetOffset()){this.cpOrientation="horizontal";}else{this.cpOrientation="vertical";}_f84=this.titleSize.h/2;}if(this.cpOrientation==="horizontal"){if(this.show_toggle){_f7e-=this.TOGGLE_WIDTH_OFFSET;}_f7f=this.show_dropdown?this.BUTTONS_HEIGHT:this.SLIDER_HEIGHT;}else{_f7f=(this.show_slider)?this.SLIDER_HEIGHT:0;_f7f+=(this.show_dropdown)?this.BUTTONS_HEIGHT:0;_f85=(this.show_toggle)?this.TOGGLE_HEIGHT/2:0;}this.innerWrapper.isHorizontal=this.cpOrientation==="horizontal";_4.marginBox(this.innerWrapper.domNode,{w:_f7e,h:_f7f});this.innerWrapper.resize();_f82=_4.marginBox(this.sliderPane.domNode);if(this._horizontalRule!==null&&_f82.w>0){_4.marginBox(this._horizontalRule.domNode,{w:_f82.w-this.RULE_OFFSET});if(this.pages.length*2>_f82.w-this.RULE_OFFSET){_4.style(this._horizontalRule.domNode,"display","none");}else{_4.style(this._horizontalRule.domNode,"display","");}}_f7b=Math.min((_f81.h-_f7f)/2-_f84-_f85,6);_f7c=_f7b+2*_f84;_4.style(this.innerWrapper.domNode,{"top":Math.max(_f7c,0)+"px","position":"absolute","left":(_f83+this.DOM_OFFSET/2)+"px"});if(this.cpOrientation==="vertical"){_4.style(this.buttonsContainer.domNode,{"height":this.ONLY_BUTTONS+"px","position":"relative","top":"","left":"","padding":"0 0 2px 0"});this.buttonsContainer.resize();_4.style(this.sliderPane.domNode,{"height":this.SLIDER_HEIGHT+"px","position":"relative","top":"","left":""});_4.style(this._checkboxPane.domNode,{"width":Math.max(_f81.w-1,0)+"px","top":Math.max(_f7c,0)+_f7f+_f7b+"px","position":"absolute","left":_f83+"px"});}else{_4.marginBox(this.sliderPane.domNode,{w:_f82.w-this.WIDGET_SPACE});if(this._horizontalRule!==null){_4.marginBox(this._horizontalRule.domNode,{w:_f82.w-this.WIDGET_SPACE-this.RULE_OFFSET});}_f80=_4.marginBox(this._dropdown.domNode);_4.marginBox(this._dropdown.domNode,{w:_f80.w-this.WIDGET_SPACE});_4.marginBox(this._rightBtn.domNode,{l:_f80.l+_f80.w-this.WIDGET_SPACE});_4.style(this.buttonsContainer.domNode,{"height":this.ONLY_BUTTONS+"px","position":"","top":"","left":"","padding":"0 0 2px 0"});this.buttonsContainer.resize();_4.style(this.sliderPane.domNode,{"height":this.SLIDER_HEIGHT+"px","position":"","top":"","left":(_f7e+this.DOM_OFFSET)/2+"px"});_4.style(this._checkboxPane.domNode,{"top":Math.max(_f7c,0)+"px","position":"absolute","left":_f83+_f7e+this.DOM_OFFSET/2+"px"});}_f86=_4.style(this._dropdown.domNode,"width")-24;_4.marginBox(this._dropdown.containerNode,{w:_f86});},getWidgetOffset:function(){var _f87=this.show_dropdown?this.BUTTONS_HEIGHT:0;_f87+=this.show_slider?this.SLIDER_HEIGHT:0;_f87+=this.show_toggle?this.TOGGLE_HEIGHT:0;return _f87;},postMixInProperties:function(){this.display_dropdown=this.show_dropdown?"block":"none";this.display_slider=this.show_slider?"block":"none";this.display_toggle=this.show_toggle?"block":"none";var _f88=parseInt(this.pages.length,10);this.maximum=_f88-1;this.discrete_values=_f88;this.show_ruler=this.show_slider?"block":"none";this.ruler_count=_f88;this.popupClass=_f88>this.SCROLL_PAGES?"cpPopupEx":"cpPopup";this.cpOrientation=this.cpHeight<this.getWidgetOffset()?"horizontal":"vertical";},postCreate:function(){var i,_f8a=this.pages;this.inherited(arguments);this.timestamp=new Date().getTime();if(!this.show_dropdown){this.innerWrapper.removeChild(this.buttonsContainer);}if(!this.show_slider){this.innerWrapper.removeChild(this.sliderPane);}if(this.show_toggle&&this._showHistoryCb.attr){this._showHistoryCb.attr("checked",this.enable);}},setPageFunc:function(_f8b,_f8c){this.clearRequestTimeout();this.requestTimeout=setTimeout(_4.hitch(this,this.doSetPage,_f8b,_f8c),500);},clearRequestTimeout:function(){if(this.requestTimeout){clearTimeout(this.requestTimeout);delete this.requestTimeout;}},doSetPage:function(_f8d,_f8e){this.clearRequestTimeout();if(this.isDashboard){tab.PageServerCommands.syncedChangePage(tsConfig.current_sheet_name,this.zid,_f8d);}else{tab.PageServerCommands.changePage(_f8d,this.sheetid);}},destroy:function(_f8f){_4.forEach(this._subscriptions,_4.unsubscribe);this.clearRequestTimeout();this.inherited(arguments);},setTitle:function(){++this.rid;var _f90,_f91;_f90=this.rid+"Z"+this.timestamp;_f91=tab.CommandController.get().get_legacySession();this.domTitleImage.src=_f91.formatZoneURL("image/png",this.zid)+"&"+_f90;},hideImage:function(){_4.style(this._titlePane,"display","none");},setTitleSize:function(){var _f92=_4.marginBox(this.domTitleImage);_4.marginBox(this._titlePane,{w:_f92.w,h:_f92.h});this.titleSize=_f92;this.layout();},refreshLayout:function(_f93,page,_f95){var i,_f97,_f98,_f99,_f9a;this.refreshed=false;this.current_page=parseInt(page,10);this.pages=_f93;if(this.show_dropdown){_f98=_f93.length;_f9a=false;if(_f98!==this._dropdown.options.length){_f9a=true;}else{for(i=0;i<_f98;i++){if(_f93[i]!==this._dropdown.options[i].label){_f9a=true;break;}}}if(_f9a){this._dropdown.options=[];_f97=[];for(i=0,_f98=_f93.length;i<_f98;i++){_f97.push({label:_f93[i],value:i.toString(10),selected:i===this.current_page});}this._dropdown.addOption(_f97);this._dropdown.popupExtraClass=_f93.length>this.SCROLL_PAGES?"cpPopupEx":"cpPopup";this._dropdown.startup();}else{this._dropdown.setValue(this.current_page);}}if(this.show_slider){if(this._horizontalRule){this._horizontalRule.destroy(false);this._horizontalRule=null;}this._slider.maximum=_f93.length-1;this._slider.discreteValues=_f93.length;_5.setWaiState(this._slider.focusNode,"valuemax",_f93.length);if(_f93.length<1200){_f99={style:"width:100%; height:3px; margin-left:4px;",count:_f93.length};this._horizontalRule=new _5.form.HorizontalRule(_f99,this._horizontalRuleNode);this._horizontalRule.placeAt(this.sliderPane.domNode,2);this._horizontalRule.startup();}this._slider.startup();}if(this.show_toggle&&arguments.length>2){this._showHistoryCb.attr("value",_f95);this.enable=_f95;}this.setTitle();this.layout();this.refreshed=true;this.refreshWidget(this.current_page);},refreshWidget:function(page){this.current_page=parseInt(page,10);if(this.show_dropdown&&this._dropdown){this._dropdown.setValue(this.current_page);this._rightBtn.setAttribute("disabled",this.current_page===(this.pages.length-1));this._rightBtn.attr("iconClass","dijitIcon cpRightArrow"+(this.current_page===(this.pages.length-1)?"Grey":"Black"));this._leftBtn.setAttribute("disabled",this.current_page===0);this._leftBtn.attr("iconClass","dijitIcon cpLeftArrow"+(this.current_page===0?"Grey":"Black"));}if(this.show_slider&&this._slider){this._slider.setValue(this.current_page);}},prevPage:function(){if(this.current_page===0){return;}this.setPageFunc(this.current_page-1,this.current_page);this.refreshWidget(this.current_page-1);},nextPage:function(){if(this.current_page===(this.pages.length-1)){return;}this.setPageFunc(this.current_page+1,this.current_page);this.refreshWidget(this.current_page+1);},onCheckboxChange:function(){if(!this.refreshed){return;}this.enable=!this.enable;tab.PageServerCommands.toggleTrails(this.sheetid);},onSelection:function(_f9c){if(parseInt(_f9c,10)===this.current_page||!this._started||!this.refreshed){return;}this.doSetPage(_f9c,this.current_page);this.refreshWidget(_f9c);},onSliderChange:function(_f9d){if(parseInt(_f9d,10)===this.current_page||!this.refreshed){return;}this.setPageFunc(_f9d,this.current_page);this.refreshWidget(_f9d);},hoverControls:function(show){var data={over:show,node:this.domNode};this.session.fireEvent(tab.EventMap.hoverChanged,data);},showControls:function(){this.hoverControls(true);},hideControls:function(){this.hoverControls(false);}});}if(!_4._hasResource["tableau.web.WebClient"]){_4._hasResource["tableau.web.WebClient"]=true;_4.provide("tableau.web.WebClient");}}};});
